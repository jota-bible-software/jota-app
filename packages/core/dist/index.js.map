{"version":3,"sources":["../src/bible/translation-utils.ts","../src/bible/books.ts","../src/search/parser.ts","../src/search/engine.ts","../src/search/reference-resolver.ts","../src/format/passage-formatter.ts","../src/format/template-engine.ts","../src/highlight/highlighter.ts","../src/audio/audio-manager.ts","../src/plans/reading-plans.ts","../src/utils/date.ts","../src/utils/text.ts","../src/utils/locale.ts"],"names":["content","chapter","verses","book","verse","text","end","regex","bi","ci","translationContent","template","passage","bookNames","si","ei","start","includesNumbers","includesNewLines","oneVerse","separator","Direction"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Utility functions to access Bible translation data regardless of format (3D array or map)\n * Framework-agnostic - no Vue/Quasar dependencies\n */\n\nimport type {\n  TranslationContent,\n  TranslationContentArray,\n  TranslationContentMap,\n} from '../types'\n\n/**\n * Check if content is in array format\n */\nexport function isArrayFormat(content: TranslationContent): content is TranslationContentArray {\n  return Array.isArray(content)\n}\n\n/**\n * Check if content is in map format\n */\nexport function isMapFormat(content: TranslationContent): content is TranslationContentMap {\n  return !Array.isArray(content) && typeof content === 'object' && content !== null\n}\n\n/**\n * Get a single verse from the translation content\n * @param content - Translation content in either format\n * @param bookIndex - 0-based book index\n * @param chapterIndex - 0-based chapter index\n * @param verseIndex - 0-based verse index\n * @returns The verse text or undefined if not found\n */\nexport function getVerse(\n  content: TranslationContent,\n  bookIndex: number,\n  chapterIndex: number,\n  verseIndex: number\n): string | undefined {\n  if (isArrayFormat(content)) {\n    // 3D array format (0-indexed)\n    return content[bookIndex]?.[chapterIndex]?.[verseIndex]\n  } else if (isMapFormat(content)) {\n    // Map format (1-indexed)\n    const bookNumber = bookIndex + 1\n    const chapterNumber = chapterIndex + 1\n    const verseNumber = verseIndex + 1\n    return content[bookNumber]?.[chapterNumber]?.[verseNumber]\n  }\n  return undefined\n}\n\n/**\n * Get all verses from a chapter\n * @param content - Translation content in either format\n * @param bookIndex - 0-based book index\n * @param chapterIndex - 0-based chapter index\n * @returns Array of verse strings or undefined if chapter not found\n */\nexport function getChapter(\n  content: TranslationContent,\n  bookIndex: number,\n  chapterIndex: number\n): string[] | undefined {\n  if (isArrayFormat(content)) {\n    return content[bookIndex]?.[chapterIndex]\n  } else if (isMapFormat(content)) {\n    const bookNumber = bookIndex + 1\n    const chapterNumber = chapterIndex + 1\n    const chapter = content[bookNumber]?.[chapterNumber]\n    if (!chapter) return undefined\n\n    // Convert map to array, maintaining verse order\n    const verses: string[] = []\n    const verseNumbers = Object.keys(chapter).map(Number).sort((a, b) => a - b)\n    for (const verseNum of verseNumbers) {\n      verses[verseNum - 1] = chapter[verseNum]\n    }\n    return verses\n  }\n  return undefined\n}\n\n/**\n * Get all chapters from a book\n * @param content - Translation content in either format\n * @param bookIndex - 0-based book index\n * @returns 2D array of chapters and verses or undefined if book not found\n */\nexport function getBook(\n  content: TranslationContent,\n  bookIndex: number\n): string[][] | undefined {\n  if (isArrayFormat(content)) {\n    return content[bookIndex]\n  } else if (isMapFormat(content)) {\n    const bookNumber = bookIndex + 1\n    const book = content[bookNumber]\n    if (!book) return undefined\n\n    // Convert map to 2D array\n    const chapters: string[][] = []\n    const chapterNumbers = Object.keys(book).map(Number).sort((a, b) => a - b)\n\n    for (const chapterNum of chapterNumbers) {\n      const chapter = book[chapterNum]\n      const verses: string[] = []\n      const verseNumbers = Object.keys(chapter).map(Number).sort((a, b) => a - b)\n\n      for (const verseNum of verseNumbers) {\n        verses[verseNum - 1] = chapter[verseNum]\n      }\n      chapters[chapterNum - 1] = verses\n    }\n    return chapters\n  }\n  return undefined\n}\n\n/**\n * Get the number of books in the translation\n */\nexport function getBookCount(content: TranslationContent): number {\n  if (isArrayFormat(content)) {\n    return content.length\n  } else if (isMapFormat(content)) {\n    return Object.keys(content).length\n  }\n  return 0\n}\n\n/**\n * Get the number of chapters in a book\n */\nexport function getChapterCount(content: TranslationContent, bookIndex: number): number {\n  if (isArrayFormat(content)) {\n    return content[bookIndex]?.length || 0\n  } else if (isMapFormat(content)) {\n    const bookNumber = bookIndex + 1\n    const book = content[bookNumber]\n    return book ? Object.keys(book).length : 0\n  }\n  return 0\n}\n\n/**\n * Get the number of verses in a chapter\n */\nexport function getVerseCount(\n  content: TranslationContent,\n  bookIndex: number,\n  chapterIndex: number\n): number {\n  if (isArrayFormat(content)) {\n    return content[bookIndex]?.[chapterIndex]?.length || 0\n  } else if (isMapFormat(content)) {\n    const bookNumber = bookIndex + 1\n    const chapterNumber = chapterIndex + 1\n    const chapter = content[bookNumber]?.[chapterNumber]\n    return chapter ? Object.keys(chapter).length : 0\n  }\n  return 0\n}\n\n/**\n * Convert any translation content to 3D array format for backward compatibility\n */\nexport function toArrayFormat(content: TranslationContent): TranslationContentArray {\n  if (isArrayFormat(content)) {\n    return content\n  }\n\n  if (isMapFormat(content)) {\n    const result: TranslationContentArray = []\n    const bookNumbers = Object.keys(content).map(Number).sort((a, b) => a - b)\n\n    for (const bookNum of bookNumbers) {\n      const book = content[bookNum]\n      const chapters: string[][] = []\n      const chapterNumbers = Object.keys(book).map(Number).sort((a, b) => a - b)\n\n      for (const chapterNum of chapterNumbers) {\n        const chapter = book[chapterNum]\n        const verses: string[] = []\n        const verseNumbers = Object.keys(chapter).map(Number).sort((a, b) => a - b)\n\n        for (const verseNum of verseNumbers) {\n          verses[verseNum - 1] = chapter[verseNum]\n        }\n        chapters[chapterNum - 1] = verses\n      }\n      result[bookNum - 1] = chapters\n    }\n    return result\n  }\n\n  return []\n}\n\n/**\n * Convert any translation content to map format\n */\nexport function toMapFormat(content: TranslationContent): TranslationContentMap {\n  if (isMapFormat(content)) {\n    return content\n  }\n\n  const result: TranslationContentMap = {}\n\n  if (isArrayFormat(content)) {\n    const arrayContent = content as TranslationContentArray\n\n    for (let bookIndex = 0; bookIndex < arrayContent.length; bookIndex++) {\n      const book = arrayContent[bookIndex]\n      const bookNumber = bookIndex + 1\n      result[bookNumber] = {}\n\n      for (let chapterIndex = 0; chapterIndex < book.length; chapterIndex++) {\n        const chapter = book[chapterIndex]\n        const chapterNumber = chapterIndex + 1\n        result[bookNumber][chapterNumber] = {}\n\n        for (let verseIndex = 0; verseIndex < chapter.length; verseIndex++) {\n          const verse = chapter[verseIndex]\n          const verseNumber = verseIndex + 1\n          result[bookNumber][chapterNumber][verseNumber] = verse\n        }\n      }\n    }\n  }\n\n  return result\n}\n","/**\n * Bible book metadata - names, abbreviations, and chapter counts\n * Framework-agnostic - no browser/Vue dependencies\n */\n\n/**\n * OSIS book codes (standard identifiers)\n */\nexport const osisBooks = [\n  'Gen', 'Exod', 'Lev', 'Num', 'Deut', 'Josh', 'Judg', 'Ruth',\n  '1Sam', '2Sam', '1Kgs', '2Kgs', '1Chr', '2Chr', 'Ezra', 'Neh',\n  'Esth', 'Job', 'Ps', 'Prov', 'Eccl', 'Song', 'Isa', 'Jer',\n  'Lam', 'Ezek', 'Dan', 'Hos', 'Joel', 'Amos', 'Obad', 'Jonah',\n  'Mic', 'Nah', 'Hab', 'Zeph', 'Hag', 'Zech', 'Mal', 'Matt',\n  'Mark', 'Luke', 'John', 'Acts', 'Rom', '1Cor', '2Cor', 'Gal',\n  'Eph', 'Phil', 'Col', '1Thess', '2Thess', '1Tim', '2Tim', 'Titus',\n  'Phlm', 'Heb', 'Jas', '1Pet', '2Pet', '1John', '2John', '3John',\n  'Jude', 'Rev',\n  // Apocrypha\n  'Jdt', 'Tob', '1Macc', '2Macc', 'Wis', 'Sir', 'Bar'\n] as const\n\n/**\n * Full English book names\n */\nexport const fullEnglishBooks = [\n  'Genesis', 'Exodus', 'Leviticus', 'Numbers', 'Deuteronomy',\n  'Joshua', 'Judges', 'Ruth', '1 Samuel', '2 Samuel',\n  '1 Kings', '2 Kings', '1 Chronicles', '2 Chronicles', 'Ezra',\n  'Nehemiah', 'Esther', 'Job', 'Psalms', 'Proverbs',\n  'Ecclesiastes', 'Song of Solomon', 'Isaiah', 'Jeremiah', 'Lamentations',\n  'Ezekiel', 'Daniel', 'Hosea', 'Joel', 'Amos',\n  'Obadiah', 'Jonah', 'Micah', 'Nahum', 'Habakkuk',\n  'Zephaniah', 'Haggai', 'Zechariah', 'Malachi', 'Matthew',\n  'Mark', 'Luke', 'John', 'Acts', 'Romans',\n  '1 Corinthians', '2 Corinthians', 'Galatians', 'Ephesians', 'Philippians',\n  'Colossians', '1 Thessalonians', '2 Thessalonians', '1 Timothy', '2 Timothy',\n  'Titus', 'Philemon', 'Hebrews', 'James', '1 Peter',\n  '2 Peter', '1 John', '2 John', '3 John', 'Jude',\n  'Revelation',\n  // Apocrypha\n  'Judith', 'Tobith', '1 Maccabees', '2 Maccabees', 'Wisdom', 'Sirah', 'Baruch'\n] as const\n\n/**\n * Full Polish book names\n */\nexport const fullPolishBooks = [\n  'Rodzaju', 'Wyjścia', 'Kapłańska', 'Liczb', 'Powtórzonego Prawa',\n  'Jozuego', 'Sędziów', 'Rut', '1 Samuela', '2 Samuela',\n  '1 Królewska', '2 Królewska', '1 Kronik', '2 Kronik', 'Ezdrasza',\n  'Nehemiasza', 'Estery', 'Hioba', 'Psalmy', 'Przypowieści',\n  'Pieśń nad Pieśniami', 'Kaznodziei', 'Izajasza', 'Jeremiasza', 'Lamentacje',\n  'Ezechiela', 'Daniela', 'Ozeasza', 'Joela', 'Amosa',\n  'Abdiasza', 'Jonasza', 'Micheasza', 'Nahuma', 'Habakuka',\n  'Sofoniasza', 'Aggeusza', 'Zachariasza', 'Malachiasza', 'Mateusza',\n  'Marka', 'Łukasza', 'Jana', 'Dzieje Apostolskie', 'List do Rzymian',\n  '1 List do Koryntian', '2 List do Koryntian', 'List do Galatów', 'List do Efezjan', 'List do Filipian',\n  'List do Kolosan', '1 List do Tesaloniczan', '2 List do Tesaloniczan', '1 List do Tymoteusza', '2 List do Tymoteusza',\n  'List do Tytusa', 'List do Filemona', 'List do Hebrajczyków', 'List Jakuba', '1 List Piotra',\n  '2 List Piotra', '1 List Jana', '2 List Jana', '3 List Jana', 'List Judy',\n  'Objawienie Jana'\n] as const\n\n/**\n * Book abbreviations by language\n */\nexport const bookAbbreviations = {\n  pl: [\n    '1 Moj', '2 Moj', '3 Moj', '4 Moj', '5 Moj', 'Joz', 'Sdz', 'Rut',\n    '1 Sam', '2 Sam', '1 Krl', '2 Krl', '1 Krn', '2 Krn', 'Ezd', 'Ne',\n    'Est', 'Job', 'Ps', 'Prz', 'Kz', 'Pnp', 'Iz', 'Jr',\n    'Tr', 'Ez', 'Dn', 'Oz', 'Jl', 'Am', 'Ab', 'Jon',\n    'Mi', 'Na', 'Ha', 'So', 'Ag', 'Za', 'Ml', 'Mt',\n    'Mr', 'Łk', 'Jn', 'Dz', 'Rz', '1 Kor', '2 Kor', 'Ga',\n    'Ef', 'Flp', 'Kol', '1 Tes', '2 Tes', '1 Tm', '2 Tm', 'Tt',\n    'Flm', 'Hbr', 'Jk', '1 Pt', '2 Pt', '1 Jn', '2 Jn', '3 Jn',\n    'Jud', 'Obj',\n    // Apocrypha\n    'Jdt', 'Tob', '1Ma', '2Ma', 'Mdr', 'Syr', 'Bar'\n  ],\n  en: [\n    'Gen', 'Exo', 'Lev', 'Num', 'Deu', 'Jos', 'Jdg', 'Rth',\n    '1Sa', '2Sa', '1Ki', '2Ki', '1Ch', '2Ch', 'Ezr', 'Neh',\n    'Est', 'Job', 'Psa', 'Pro', 'Ecc', 'Son', 'Isa', 'Jer',\n    'Lam', 'Eze', 'Dan', 'Hos', 'Joe', 'Amo', 'Oba', 'Jon',\n    'Mic', 'Nah', 'Hab', 'Zep', 'Hag', 'Zec', 'Mal', 'Mat',\n    'Mar', 'Luk', 'Joh', 'Act', 'Rom', '1Co', '2Co', 'Gal',\n    'Eph', 'Phi', 'Col', '1Th', '2Th', '1Ti', '2Ti', 'Tit',\n    'Phm', 'Heb', 'Jas', '1Pe', '2Pe', '1Jo', '2Jo', '3Jo',\n    'Jud', 'Rev'\n  ]\n} as const\n\n/**\n * Number of chapters per book (canonical books only)\n */\nexport const chapterCounts = [\n  50, 40, 27, 36, 34, 24, 21, 4, 31, 24,\n  22, 25, 29, 36, 10, 13, 10, 42, 150, 31,\n  12, 8, 66, 52, 5, 48, 12, 14, 3, 9,\n  1, 4, 7, 3, 3, 3, 2, 14, 3, 28,\n  16, 24, 21, 28, 16, 16, 13, 6, 6, 4,\n  4, 5, 3, 6, 4, 3, 1, 13, 5, 5,\n  3, 5, 1, 1, 1, 22\n] as const\n\n/**\n * Total number of canonical books (excluding Apocrypha)\n */\nexport const CANONICAL_BOOK_COUNT = 66\n\n/**\n * Total number of books including Apocrypha\n */\nexport const TOTAL_BOOK_COUNT = osisBooks.length\n\n/**\n * Get the OSIS code for a book by index\n */\nexport function getOsisCode(bookIndex: number): string | undefined {\n  return osisBooks[bookIndex]\n}\n\n/**\n * Get the book index from an OSIS code\n */\nexport function getBookIndexFromOsis(osisCode: string): number {\n  return osisBooks.indexOf(osisCode as typeof osisBooks[number])\n}\n\n/**\n * Get the chapter count for a book\n */\nexport function getChapterCountForBook(bookIndex: number): number {\n  return chapterCounts[bookIndex] || 0\n}\n\n/**\n * Check if a book is apocryphal\n */\nexport function isApocryphal(bookIndex: number): boolean {\n  return bookIndex >= CANONICAL_BOOK_COUNT\n}\n\n/**\n * Combined books data object for backward compatibility\n */\nexport const books = {\n  osis: osisBooks,\n  fullEnglish: fullEnglishBooks,\n  fullPolish: fullPolishBooks,\n  bookAbbreviations,\n  chapterCount: chapterCounts,\n}\n\nexport default books\n","/**\n * Bible reference parsing\n * Framework-agnostic wrapper for jota-parser\n */\n\nimport { Parser, enUS, plPL } from 'jota-parser'\nimport type { Passage } from '../types'\nimport { osisBooks } from '../bible/books'\n\n// Create default parser with English and Polish locales\nconst defaultParser = new Parser({ locales: [plPL, enUS] })\n\n/**\n * Parse Bible references from text input\n * @param input - Text containing Bible references\n * @param parser - Optional custom parser instance\n * @returns Array of passages\n */\nexport function parseReferences(input: string, parser = defaultParser): Passage[] {\n  return parser.parse(input).map((v: number[]) => {\n    const b = v[0]\n    const c = v[1] - 1\n    const s = v[2] ? v[2] - 1 : undefined\n    const e = v[3] ? v[3] - 1 : s\n    return [b, c, s, e] as Passage\n  })\n}\n\n/**\n * Convert OSIS code to passage indices\n * @param osis - OSIS code like \"Gen.1.1\"\n * @returns Array of [bookIndex, chapterIndex, verseIndex]\n */\nexport function osisToPassage(osis: string): number[] {\n  const match = [...osis.matchAll(/(\\w+)\\.(\\d+)\\.?(\\d+)?/g)][0] || [null, osis]\n  return [osisBooks.indexOf(match[1] as typeof osisBooks[number]), parseInt(match[2]) - 1, parseInt(match[3]) - 1]\n}\n\n/**\n * Create a new parser with custom locales\n */\nexport function createParser(options: { locales: unknown[] }): InstanceType<typeof Parser> {\n  return new Parser(options)\n}\n\nexport { Parser, enUS, plPL }\n","/**\n * Bible content search engine\n * Framework-agnostic search implementation\n */\n\nimport type { Passage, Progress, SearchOptions, TranslationContent } from '../types'\nimport { getBookCount, getChapterCount, getVerseCount, getVerse } from '../bible/translation-utils'\nimport { parseReferences } from './parser'\n\n/**\n * Search result item\n */\nexport interface SearchResultItem {\n  passage: [number, number, number, number]\n  bookIndex: number\n  chapterIndex: number\n  verseIndex: number\n}\n\n/**\n * General search function\n * If text does not start with \"/\" then try to find passage references.\n * Otherwise search for the text in the Bible content.\n *\n * @param bible - Translation content\n * @param text - Search input\n * @param options - Search options\n * @param progress - Progress reporting callback\n * @returns Array of passages\n */\nexport async function search(\n  bible: TranslationContent,\n  text: string,\n  options: SearchOptions,\n  progress: Progress\n): Promise<Passage[]> {\n  // Clean up special characters that may come from mobile devices\n  text = text.replace(/[\\u202d\\u202c]/gm, '')\n\n  // If text is a regular expression (starts with /)\n  if (text.startsWith('/')) {\n    const end = text.lastIndexOf('/')\n    // If there is no regex flags, add \"gi\" automatically\n    const flags = end === text.length - 1 ? 'gi' : text.substring(end + 1, text.length)\n    let regex: RegExp\n    let error: unknown\n\n    try {\n      regex = new RegExp(`(${text.substring(1, end)})`, flags)\n    } catch (ex) {\n      error = ex\n      throw Error(`Invalid regular expression RegExp(${text.substring(1, end)}, ${flags})${error ? ', ' + error : ''}`)\n    }\n\n    return searchContent(regex, bible, progress)\n  }\n\n  // Determine if apocrypha should be included\n  options.apocrypha = options.apocrypha === undefined ? getBookCount(bible) > 66 : options.apocrypha\n\n  // Try to find passage references\n  const fragments = parseReferences(text)\n  if (fragments.length) return fragments\n\n  // If no references found, search in content\n  let regex: RegExp\n  if (options.words) {\n    const notWord = '[^a-zA-ZąćęłńóśźżĄĘŁŃÓŚŹŻ]' // cspell:disable-line\n    regex = new RegExp(`(^|${notWord})(${text.trim()})($|${notWord})`, 'i')\n  } else {\n    regex = new RegExp(`(${text})`, 'i')\n  }\n\n  return searchContent(regex, bible, progress)\n}\n\n/**\n * Search for regex pattern in Bible content\n *\n * @param regex - Regular expression to search for\n * @param bible - Translation content\n * @param progress - Progress reporting callback\n * @returns Array of matching passages\n */\nexport async function searchContent(\n  regex: RegExp,\n  bible: TranslationContent,\n  progress: Progress\n): Promise<Passage[]> {\n  const found: Passage[] = []\n  const bookCount = getBookCount(bible)\n\n  // Process books with setTimeout to allow UI updates\n  await Promise.all(\n    Array.from({ length: bookCount }, (_, bi) =>\n      new Promise<void>(resolve =>\n        setTimeout(() => {\n          const chapterCount = getChapterCount(bible, bi)\n          for (let ci = 0; ci < chapterCount; ci++) {\n            const verseCount = getVerseCount(bible, bi, ci)\n            for (let vi = 0; vi < verseCount; vi++) {\n              const verse = getVerse(bible, bi, ci, vi)\n              if (verse && regex.test(verse)) {\n                const fragment: Passage = [bi, ci, vi, vi]\n                Object.preventExtensions(fragment)\n                Object.freeze(fragment)\n                found.push(fragment)\n              }\n            }\n          }\n          progress.step(bi + 1)\n          resolve()\n        }, 100)\n      )\n    )\n  )\n\n  // Store regex for UI highlighting\n  progress.regex = regex\n  Object.preventExtensions(found)\n  Object.freeze(found)\n  return found\n}\n\n/**\n * Ensure regex flag includes \"g\" for global matching\n */\nexport function ensureGlobalRegex(regex?: RegExp): RegExp | string {\n  return regex\n    ? regex.flags.includes('g')\n      ? regex\n      : new RegExp(regex.source, regex.flags + 'g')\n    : ''\n}\n\n/**\n * Sort passages and remove duplicates\n *\n * @param fragments - Array of passages to sort\n * @returns Sorted and deduplicated array\n */\nexport function sortAndDeduplicate(fragments: Passage[]): Passage[] {\n  // Sort by book, chapter, verse\n  fragments.sort((a, b) =>\n    a[0] > b[0] ? 1 : a[0] < b[0] ? -1 :\n      a[1] > b[1] ? 1 : a[1] < b[1] ? -1 :\n        a[2] != null && b[2] != null ? (a[2] > b[2] ? 1 : a[2] < b[2] ? -1 : 0) : 0\n  )\n\n  if (fragments.length < 2) {\n    return fragments\n  }\n\n  // Deduplicate\n  let prev = fragments[0]\n  const result = [prev]\n\n  for (let i = 1; i < fragments.length; i++) {\n    const curr = fragments[i]\n    if (!(prev[0] === curr[0] && prev[1] === curr[1] && (prev[2] === curr[2] || (prev[2] == null && curr[2] == null)))) {\n      result.push(curr)\n    }\n    prev = curr\n  }\n\n  return result\n}\n","/**\n * Reference resolver - converts OSIS strings to passages\n * Framework-agnostic\n */\n\nimport type { Passage, TranslationContent } from '../types'\nimport { getChapterCount, getVerseCount } from '../bible/translation-utils'\nimport { osisToPassage } from './parser'\n\n/**\n * Get list of passages from OSIS string\n *\n * @param translationContent - Translation content\n * @param osis - Comma-separated list of OSIS codes like \"Deut.25.13-14\"\n * @param shouldSort - Whether to sort results\n * @returns Array of passages\n */\nexport function resolveOsisToPassages(\n  translationContent: TranslationContent,\n  osis: string,\n  shouldSort = false\n): Passage[] {\n  if (!osis) return []\n\n  const fragments: Passage[] = []\n\n  osis.split(',').forEach((it: string) => {\n    const [it1, it2] = it.split('-')\n    const from = it1\n    let to: string | true = it2\n\n    const a = osisToPassage(from)\n\n    // Handle case of entire book, e.g., osis = \"Col\"\n    if (isNaN(a[1])) {\n      a[1] = 0\n      to = to || true\n    }\n\n    if (to) {\n      const b = to === true\n        ? [a[0], getChapterCount(translationContent, a[0]) - 1]\n        : osisToPassage(to as string)\n\n      // Only scopes within the same chapter are allowed\n      if (a[0] !== b[0] || a[1] !== b[1]) {\n        a[2] = a[2] || 0\n        if (a[2] === 0) {\n          a.splice(2, 1)\n          fragments.push(a as Passage)\n        } else {\n          push(a, getVerseCount(translationContent, a[0], a[1]) - 1)\n        }\n\n        if (a[0] < b[0]) {\n          // Add the rest of chapters from the starting book\n          addChapters(a[0], a[1] + 1, getChapterCount(translationContent, a[0]))\n        } else {\n          // Add all the chapters in between if start and end are in the same book\n          addChapters(a[0], a[1] + 1, b[1])\n        }\n\n        if (a[0] + 1 < b[0]) {\n          // Add books in between\n          for (let bi = a[0] + 1; bi < b[0]; bi++) {\n            addChapters(bi, 0, getChapterCount(translationContent, bi))\n          }\n        }\n\n        if (a[0] < b[0]) {\n          // Add the starting chapters from the ending book\n          addChapters(b[0], 0, isNaN(b[1]) ? getChapterCount(translationContent, b[0]) : b[1])\n        }\n\n        if (!isNaN(b[1])) {\n          if (isNaN(b[2]) || b[2] === getVerseCount(translationContent, b[0], b[1]) - 1) {\n            fragments.push([b[0], b[1]])\n          } else {\n            fragments.push([b[0], b[1], 0, b[2]])\n          }\n        }\n      } else {\n        push(a, b[2])\n      }\n    } else {\n      push(a, a[2])\n    }\n  })\n\n  return shouldSort ? sortPassages(fragments) : fragments\n\n  function addChapters(bi: number, ci: number, len: number) {\n    for (; ci < len; ci++) {\n      fragments.push([bi, ci])\n    }\n  }\n\n  function push(tokens: number[], end: number) {\n    tokens.push(end)\n    fragments.push(tokens as Passage)\n  }\n}\n\n/**\n * Sort passages by book, chapter, verse\n */\nfunction sortPassages(fragments: Passage[]): Passage[] {\n  fragments.sort((a, b) =>\n    a[0] > b[0] ? 1 : a[0] < b[0] ? -1 :\n      a[1] > b[1] ? 1 : a[1] < b[1] ? -1 :\n        a[2] != null && b[2] != null ? (a[2] > b[2] ? 1 : a[2] < b[2] ? -1 : 0) : 0\n  )\n  return fragments\n}\n","/**\n * Passage formatting utilities\n * Framework-agnostic text formatting for Bible passages\n */\n\nimport type { FormatTemplateData, Formatted, Passage, TranslationContent } from '../types'\nimport { getChapter } from '../bible/translation-utils'\n\n/**\n * Replace enter character placeholder with newline\n */\nfunction replaceEnterChar(str: string): string {\n  return str.replace(/⏎/g, '\\n')\n}\n\n/**\n * Format a passage with template, returning structured output\n *\n * @param template - Format template configuration\n * @param passage - Passage reference\n * @param translationContent - Bible translation content\n * @param bookNames - Array of book names\n * @param translationAbbreviation - Translation abbreviation\n * @returns Formatted output structure or undefined if chapter not found\n */\nexport function formatPassageComposable(\n  template: FormatTemplateData,\n  passage: Passage,\n  translationContent: TranslationContent,\n  bookNames: string[],\n  translationAbbreviation: string\n): Formatted | undefined {\n  const t = {\n    ...template,\n    referenceCharsBefore: replaceEnterChar(template.referenceCharsBefore),\n    referenceCharsAfter: replaceEnterChar(template.referenceCharsAfter),\n    translationAbbreviationCharsBefore: replaceEnterChar(template.translationAbbreviationCharsBefore),\n    translationAbbreviationCharsAfter: replaceEnterChar(template.translationAbbreviationCharsAfter),\n    quoteCharsBefore: replaceEnterChar(template.quoteCharsBefore),\n    quoteCharsAfter: replaceEnterChar(template.quoteCharsAfter),\n    verseNumberCharsBefore: replaceEnterChar(template.verseNumberCharsBefore),\n    verseNumberCharsAfter: replaceEnterChar(template.verseNumberCharsAfter),\n  }\n\n  const [bi, ci, si, ei] = passage\n  const chapter = ci + 1\n  const chapterContent = getChapter(translationContent, bi, ci)\n\n  if (!chapterContent) return undefined\n\n  const bookName = bookNames[bi]\n  const start = si === undefined ? 1 : si + 1\n  const end = ei === undefined ? (si === undefined ? chapterContent.length : si + 1) : ei + 1\n  const ending = start === end ? '' : t.rangeChar + end\n  const ta = t.translationAbbreviation\n  const ab = ta === 'none' ? '' : ta === 'lowercase' ? translationAbbreviation.toLowerCase() : translationAbbreviation.toUpperCase()\n  const abb = ab ? ` ${t.translationAbbreviationCharsBefore}${ab}${t.translationAbbreviationCharsAfter}` : ''\n\n  // Format Reference\n  const reference = `${t.referenceCharsBefore}${bookName} ${chapter}${t.separatorChar}${start}${ending}${abb}${t.referenceCharsAfter}`\n\n  let text = ''\n  const includesNumbers = t.numbers\n  const includesNewLines = t.verseNewLine\n  const oneVerse = start === end\n  const verses = chapterContent.slice(start - 1, end)\n\n  const numberedVerse = (i: number, s: string) =>\n    `${t.verseNumberCharsBefore}${start + i}${t.verseNumberCharsAfter} ${s}`\n\n  if (includesNumbers && includesNewLines) {\n    text = oneVerse ? verses.join(' ') : verses.map((v, i) => numberedVerse(i, v)).join('\\n')\n  } else if (includesNewLines) {\n    text = oneVerse ? verses.join(' ') : verses.join('\\n')\n  } else if (includesNumbers) {\n    text = oneVerse ? verses.join(' ') : verses.map((v, i) => numberedVerse(i, v)).join(' ')\n  } else {\n    text = verses.join(' ')\n  }\n\n  const content = `${t.quoteCharsBefore}${text}${t.quoteCharsAfter}`\n  const separator = t.referenceLine === 'new line' ? '\\n' : ' '\n  const referenceFirst = t.referencePosition === 'before'\n\n  return { reference, separator, content, referenceFirst }\n}\n\n/**\n * Format a passage as a string\n *\n * @param template - Format template configuration\n * @param passage - Passage reference\n * @param translationContent - Bible translation content\n * @param bookNames - Array of book names\n * @param translationAbbreviation - Translation abbreviation\n * @returns Formatted string\n */\nexport function formatPassage(\n  template: FormatTemplateData,\n  passage: Passage,\n  translationContent: TranslationContent,\n  bookNames: string[],\n  translationAbbreviation: string\n): string {\n  const result = formatPassageComposable(template, passage, translationContent, bookNames, translationAbbreviation)\n  if (!result) return ''\n\n  const { reference, separator, content, referenceFirst } = result\n\n  // If referenceWithoutContent is true, return only the reference\n  if (template.referenceWithoutContent) {\n    return reference\n  }\n\n  return referenceFirst ? reference + separator + content : content + separator + reference\n}\n\n/**\n * Format a passage reference (without content)\n *\n * @param passage - Passage reference\n * @param bookNames - Array of book names\n * @param separator - Chapter-verse separator character\n * @returns Formatted reference string\n */\nexport function formatReference(\n  passage: Passage,\n  bookNames: string[],\n  separator: string\n): string {\n  const [bookIndex, chapter, start, end] = passage\n  const book = bookNames[bookIndex]\n\n  if (start == null) {\n    return `${book} ${chapter + 1}`\n  } else if (end == null || start === end) {\n    return `${book} ${chapter + 1}${separator}${start + 1}`\n  } else {\n    return `${book} ${chapter + 1}${separator}${start + 1}-${end + 1}`\n  }\n}\n\n/**\n * Format chapter caption\n *\n * @param passage - Passage reference\n * @param bookNames - Array of book names\n * @returns Chapter title string\n */\nexport function formatChapterCaption(passage: Passage | null, bookNames: string[]): string {\n  if (!passage) return ''\n  const [bookIndex, chapter] = passage\n  const book = bookNames[bookIndex]\n  return `${book} ${chapter + 1}`\n}\n\n/**\n * Get verses from a passage\n *\n * @param bible - Translation content\n * @param passage - Passage reference\n * @returns Array of verse strings\n */\nexport function getPassageVerses(bible: TranslationContent, passage: Passage): string[] {\n  const [bi, ci, si, ei] = passage\n  const content = getChapter(bible, bi, ci)\n  if (!content) return []\n\n  const start = si == null ? 1 : si + 1\n  const end = ei == null ? (si == null ? content.length : si + 1) : ei + 1\n  return content.slice(start - 1, end)\n}\n\n/**\n * Get all verses for a chapter containing the passage\n *\n * @param bible - Translation content\n * @param passage - Passage reference\n * @returns Array of all verses in the chapter\n */\nexport function getChapterVerses(bible: TranslationContent, passage: Passage | null): string[] {\n  if (!passage) return []\n  const [book, chapter] = passage\n  const content = getChapter(bible, book, chapter)\n  return content || []\n}\n","/**\n * Template engine for format patterns\n * Framework-agnostic template processing\n */\n\nimport type { Passage, TranslationContent } from '../types'\nimport { getChapter } from '../bible/translation-utils'\n\n/**\n * Pattern configuration for template generation\n */\nexport interface FormatPattern {\n  referencePosition?: 'before' | 'after'\n  referenceNewLine?: 'same line' | 'new line'\n  separatorChar?: string\n  quotes?: boolean\n  verseNewLine?: boolean\n  numbers?: boolean\n}\n\n/**\n * Convert a pattern object to a template string\n *\n * @param pattern - Format pattern configuration\n * @returns Template string with placeholders\n */\nexport function patternToTemplate(pattern: FormatPattern): string {\n  const { referencePosition, referenceNewLine, separatorChar, quotes, verseNewLine, numbers } = pattern\n  const ref = `\\${book} \\${chapter}${separatorChar}\\${start}-\\${end}`\n  let s = `\\${text${numbers ? 'Numbers' : ''}${verseNewLine ? 'NewLines' : ''}}`\n\n  if (quotes) s = `\"${s}\"`\n\n  if (referencePosition === 'before') {\n    s = `${ref}${referenceNewLine === 'new line' ? '\\n' : ' '}${s}`\n  } else {\n    s = `${s}${referenceNewLine === 'new line' ? '\\n' : ' '}${ref}`\n  }\n\n  return s\n}\n\n/**\n * Format a passage using a template string\n * WARNING: This uses eval() - only use with trusted templates\n *\n * @param translationContent - Bible translation content\n * @param passage - Passage reference\n * @param template - Template string with ${} placeholders\n * @param bookNames - Array of book names\n * @param separator - Chapter-verse separator\n * @param translation - Translation name\n * @returns Formatted string\n */\nexport function formatWithTemplate(\n  translationContent: TranslationContent,\n  passage: Passage,\n  template: string,\n  bookNames: string[],\n  separator: string,\n  translation: string\n): string {\n  const [bi, ci, si, ei] = passage\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const book = bookNames[bi]\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const chapter = ci + 1\n  const content = getChapter(translationContent, bi, ci)\n  if (!content) return ''\n\n  const start = si == null ? 1 : si + 1\n  const end = ei == null ? (si == null ? content.length : si + 1) : ei + 1\n  const verses = content.slice(start - 1, end)\n  if (start === end) template = template.replace('-${end}', '')\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const verse = start\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const translationUpperCase = translation ? translation.toUpperCase() : ''\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  let text: string, textNumbers: string, textNewLines: string, textNumbersNewLines: string\n\n  const includesNumbers = template.includes('Numbers')\n  const includesNewLines = template.includes('NewLines')\n  const oneVerse = start === end\n\n  if (includesNumbers && includesNewLines) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    textNumbersNewLines = oneVerse\n      ? verses.join(' ')\n      : '\\n' + verses.map((v, i) => `(${start + i}) ${v}`).join('\\n')\n  } else if (includesNewLines) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    textNewLines = oneVerse ? verses.join(' ') : '\\n' + verses.join('\\n')\n  } else if (includesNumbers) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    textNumbers = oneVerse\n      ? verses.join(' ')\n      : verses.map((v, i) => `(${start + i}) ${v}`).join(' ')\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    text = verses.join(' ')\n  }\n\n  // Note: eval is used for template string evaluation\n  // This should only be used with trusted templates\n  // eslint-disable-next-line no-eval\n  return eval('`' + template + '`')\n}\n","/**\n * Stateless, referentially-transparent highlighter utilities.\n * All functions accept the current highlights array and return a new array\n * (or a derived value) without mutating the input.\n * Framework-agnostic - no Vue/Quasar dependencies.\n */\n\nimport type { PassageHighlight } from '../types'\n\n/**\n * Complete passage tuple type\n */\nexport type PassageTuple = [number, number, number, number]\n\n/**\n * Generate a unique key for a passage\n */\nfunction getPassageKey(passage: PassageTuple): string {\n  return `${passage[0]}-${passage[1]}-${passage[2]}-${passage[3]}`\n}\n\n/**\n * Get all highlights that overlap with the given passage\n */\nexport function getOverlappingHighlights(\n  highlights: PassageHighlight[],\n  passage: PassageTuple\n): PassageHighlight[] {\n  const [book, chapter, start, end] = passage\n  return highlights.filter(h => {\n    const [hBook, hChapter, hStart, hEnd] = h.passage\n    if (hBook !== book || hChapter !== chapter) return false\n    return !(hEnd < start || hStart > end)\n  })\n}\n\n/**\n * Get the highlight that exactly matches the given passage\n */\nexport function getExactPassageHighlight(\n  highlights: PassageHighlight[],\n  passage: PassageTuple\n): PassageHighlight | undefined {\n  const [book, chapter, start, end] = passage\n  return highlights.find(h => {\n    const [b, c, hStart, hEnd] = h.passage\n    return b === book && c === chapter && hStart === start && hEnd === end\n  })\n}\n\n/**\n * Get the highlight that contains the given verse\n */\nexport function getHighlightForVerse(\n  highlights: PassageHighlight[],\n  book: number,\n  chapter: number,\n  verse: number\n): PassageHighlight | undefined {\n  return highlights.find(h => {\n    const [b, c, start, end] = h.passage\n    return b === book && c === chapter && verse >= start && verse <= end\n  })\n}\n\n/**\n * Get all highlights (identity function for API consistency)\n */\nexport function getHighlights(highlights: PassageHighlight[]): PassageHighlight[] {\n  return highlights\n}\n\n/**\n * Remove highlight at exact passage\n */\nexport function removeHighlight(\n  highlights: PassageHighlight[],\n  passage: PassageTuple\n): PassageHighlight[] {\n  const key = getPassageKey(passage)\n  return highlights.filter(h => getPassageKey(h.passage) !== key)\n}\n\n/**\n * Add a highlight - does not mutate input\n */\nexport function addHighlight(\n  highlights: PassageHighlight[],\n  passage: PassageTuple,\n  colorId: string\n): PassageHighlight[] {\n  const [book, chapter, start, end] = passage\n\n  const overlapping = getOverlappingHighlights(highlights, passage)\n\n  // Remove overlapping highlights\n  const result = highlights.filter(\n    h => !overlapping.some(o => getPassageKey(o.passage) === getPassageKey(h.passage))\n  )\n\n  // Merge same-color overlapping ranges\n  const sameColorOverlapping = overlapping.filter(h => h.highlightColorId === colorId)\n  let mergedStart = start\n  let mergedEnd = end\n\n  if (sameColorOverlapping.length > 0) {\n    sameColorOverlapping.forEach(h => {\n      const [, , hStart, hEnd] = h.passage\n      mergedStart = Math.min(mergedStart, hStart)\n      mergedEnd = Math.max(mergedEnd, hEnd)\n    })\n  }\n\n  const newHighlight: PassageHighlight = {\n    passage: [book, chapter, mergedStart, mergedEnd],\n    highlightColorId: colorId,\n  }\n\n  return [...result, newHighlight]\n}\n\n/**\n * Remove overlapping highlights of the same color and create remainders\n */\nfunction removeOverlappingAndCreateRemainders(\n  highlights: PassageHighlight[],\n  passage: PassageTuple,\n  activeColorId: string\n): PassageHighlight[] {\n  const [, , start, end] = passage\n  const overlapping = getOverlappingHighlights(highlights, passage)\n\n  // Start with highlights that are not overlapping\n  let result = highlights.filter(\n    h => !overlapping.some(o => getPassageKey(o.passage) === getPassageKey(h.passage))\n  )\n\n  overlapping\n    .filter(h => h.highlightColorId === activeColorId)\n    .forEach(highlight => {\n      const [hBook, hChapter, hStart, hEnd] = highlight.passage\n\n      // Create highlight for verses before the removed range\n      if (hStart < start) {\n        result = addHighlight(result, [hBook, hChapter, hStart, start - 1], highlight.highlightColorId)\n      }\n\n      // Create highlight for verses after the removed range\n      if (hEnd > end) {\n        result = addHighlight(result, [hBook, hChapter, end + 1, hEnd], highlight.highlightColorId)\n      }\n    })\n\n  return result\n}\n\n/**\n * Toggle highlight on a passage\n */\nexport function toggleHighlight(\n  highlights: PassageHighlight[],\n  passage: PassageTuple,\n  activeColorId: string\n): PassageHighlight[] {\n  const [book, chapter, start, end] = passage\n\n  // Empty selection check\n  if (start == null || end == null) return highlights\n\n  const overlapping = getOverlappingHighlights(highlights, passage)\n  const sameColorHighlights = overlapping.filter(h => h.highlightColorId === activeColorId)\n  const differentColorHighlights = overlapping.filter(h => h.highlightColorId !== activeColorId)\n\n  let hasExactMatch = false\n  for (const highlight of sameColorHighlights) {\n    const [, , hStart, hEnd] = highlight.passage\n    if (hStart === start && hEnd === end) {\n      hasExactMatch = true\n      break\n    }\n  }\n\n  // Case 1: No overlapping highlights - add new highlight\n  if (overlapping.length === 0) {\n    return addHighlight(highlights, passage, activeColorId)\n  }\n\n  // Case 2: Exact match with same color - remove it and create remainders\n  if (hasExactMatch) {\n    return removeOverlappingAndCreateRemainders(highlights, passage, activeColorId)\n  }\n\n  // Case 3: Single verse toggle or overlapping with any highlights\n  if (start === end || overlapping.length > 0) {\n    let shouldAddHighlight = true\n\n    // Start by removing all overlapping highlights from result\n    let result = highlights.filter(\n      h => !overlapping.some(o => getPassageKey(o.passage) === getPassageKey(h.passage))\n    )\n\n    // Handle overlapping same color highlights\n    sameColorHighlights.forEach(h => {\n      const [hBook, hChapter, hStart, hEnd] = h.passage\n\n      // Create non-overlapping highlight sections\n      if (hStart < start) {\n        result = addHighlight(result, [hBook, hChapter, hStart, start - 1], activeColorId)\n      }\n      if (hEnd > end) {\n        result = addHighlight(result, [hBook, hChapter, end + 1, hEnd], activeColorId)\n      }\n\n      // Don't add a new highlight if we're toggling a single verse that was highlighted\n      if (start === end && hStart <= start && hEnd >= end) {\n        shouldAddHighlight = false\n      }\n    })\n\n    // Handle different color highlights\n    differentColorHighlights.forEach(h => {\n      const [hBook, hChapter, hStart, hEnd] = h.passage\n      // Preserve highlights outside the selected range\n      if (hStart < start) {\n        result = addHighlight(result, [hBook, hChapter, hStart, start - 1], h.highlightColorId)\n      }\n      if (hEnd > end) {\n        result = addHighlight(result, [hBook, hChapter, end + 1, hEnd], h.highlightColorId)\n      }\n    })\n\n    if (shouldAddHighlight) {\n      result = addHighlight(result, passage, activeColorId)\n    }\n\n    return result\n  }\n\n  // Case 4: Extending/merging same color highlights\n  if (sameColorHighlights.length > 0) {\n    let mergedStart = start\n    let mergedEnd = end\n    sameColorHighlights.forEach(h => {\n      const [, , hStart, hEnd] = h.passage\n      mergedStart = Math.min(mergedStart, hStart)\n      mergedEnd = Math.max(mergedEnd, hEnd)\n    })\n\n    // Remove all overlapping and add merged\n    let result = highlights.filter(\n      h => !overlapping.some(o => getPassageKey(o.passage) === getPassageKey(h.passage))\n    )\n    result = addHighlight(result, [book, chapter, mergedStart, mergedEnd], activeColorId)\n    return result\n  }\n\n  // Default: add new highlight\n  return addHighlight(highlights, passage, activeColorId)\n}\n\n/**\n * Clear all highlights\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function clearAllHighlights(_highlights: PassageHighlight[]): PassageHighlight[] {\n  return []\n}\n\n/**\n * Clear highlights of a specific color\n */\nexport function clearColorHighlights(\n  highlights: PassageHighlight[],\n  colorId: string\n): PassageHighlight[] {\n  return highlights.filter(h => h.highlightColorId !== colorId)\n}\n\n/**\n * Backwards-compatible wrapper class.\n * Keeps state at the instance level and delegates to pure functions.\n */\nexport class Highlighter {\n  private highlights: PassageHighlight[]\n\n  constructor(initialHighlights: PassageHighlight[] = []) {\n    this.highlights = [...initialHighlights]\n  }\n\n  addHighlight(passage: PassageTuple, colorId: string) {\n    this.highlights = addHighlight(this.highlights, passage, colorId)\n  }\n\n  removeHighlight(passage: PassageTuple) {\n    this.highlights = removeHighlight(this.highlights, passage)\n  }\n\n  toggleHighlight(passage: PassageTuple, activeColorId: string) {\n    this.highlights = toggleHighlight(this.highlights, passage, activeColorId)\n  }\n\n  getHighlightForVerse(book: number, chapter: number, verse: number) {\n    return getHighlightForVerse(this.highlights, book, chapter, verse)\n  }\n\n  getExactPassageHighlight(passage: PassageTuple) {\n    return getExactPassageHighlight(this.highlights, passage)\n  }\n\n  getOverlappingHighlights(passage: PassageTuple) {\n    return getOverlappingHighlights(this.highlights, passage)\n  }\n\n  getHighlights() {\n    return this.highlights\n  }\n\n  clearColorHighlights(colorId: string) {\n    this.highlights = clearColorHighlights(this.highlights, colorId)\n  }\n\n  clearAllHighlights() {\n    this.highlights = clearAllHighlights(this.highlights)\n  }\n}\n","/**\n * Audio manager - Bible audio source handling\n * Framework-agnostic audio utilities\n */\n\nimport type { Passage } from '../types'\nimport { chapterCounts } from '../bible/books'\n\n/**\n * Audio provider configuration\n */\nexport interface AudioProvider {\n  name: string\n  baseUrl: string\n  getFileName: (chapterIndex: number) => string\n}\n\n/**\n * Get the global chapter index from a passage\n * @param passage - Passage reference [bookIndex, chapterIndex, ...]\n * @returns Global chapter index (0-based)\n */\nexport function getGlobalChapterIndex(passage: Passage): number {\n  const [bookIndex, chapterIndex] = passage\n  const previousChapters = chapterCounts.slice(0, bookIndex).reduce((acc, cur) => acc + cur, 0)\n  return previousChapters + chapterIndex\n}\n\n/**\n * Get total chapter count in the Bible\n */\nexport function getTotalChapterCount(): number {\n  return chapterCounts.reduce((acc, cur) => acc + cur, 0)\n}\n\n/**\n * Abstract audio source resolver\n * Override this with platform-specific implementations\n */\nexport function getAudioSource(\n  passage: Passage | undefined,\n  provider: AudioProvider\n): string {\n  if (!passage) return ''\n  const chapterIndex = getGlobalChapterIndex(passage)\n  return provider.baseUrl + provider.getFileName(chapterIndex)\n}\n","/**\n * Reading plans - Bible reading plan definitions\n * Framework-agnostic\n */\n\n/**\n * Reading plan definition\n */\nexport interface ReadingPlan {\n  name: string\n  steps: number\n  description: string\n  readings: string\n}\n\n/**\n * Parse a reading plan's readings into daily entries\n * @param plan - Reading plan\n * @returns Array of daily reading strings\n */\nexport function parseReadings(plan: ReadingPlan): string[] {\n  return plan.readings\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0)\n}\n\n/**\n * Get reading for a specific day\n * @param plan - Reading plan\n * @param dayIndex - 0-based day index\n * @returns Reading string for the day\n */\nexport function getReadingForDay(plan: ReadingPlan, dayIndex: number): string | undefined {\n  const readings = parseReadings(plan)\n  return readings[dayIndex]\n}\n\n/**\n * Calculate progress percentage\n * @param currentDay - Current day (1-based)\n * @param totalDays - Total days in plan\n * @returns Progress as percentage (0-100)\n */\nexport function calculateProgress(currentDay: number, totalDays: number): number {\n  if (totalDays <= 0) return 0\n  return Math.min(100, Math.round((currentDay / totalDays) * 100))\n}\n\n/**\n * Get day number from start date\n * @param startDate - Plan start date\n * @param currentDate - Current date (defaults to now)\n * @returns Current day number (1-based)\n */\nexport function getDayNumber(startDate: Date, currentDate: Date = new Date()): number {\n  const diffTime = currentDate.getTime() - startDate.getTime()\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24))\n  return Math.max(1, diffDays + 1)\n}\n","/**\n * Date utilities - framework-agnostic\n */\n\n/**\n * Parse a date string in YYYY-MM-DD format\n * @param dateString - Date string in YYYY-MM-DD format\n * @returns Date object\n */\nexport function parseDate(dateString: string): Date {\n  const tokens = dateString.split('-').map(it => parseInt(it))\n  return new Date(tokens[0], tokens[1] - 1, tokens[2])\n}\n\n/**\n * Format a date to YYYY-MM-DD string\n * @param date - Date object (defaults to now)\n * @returns Formatted date string\n */\nexport function formatDate(date?: Date | string): string {\n  if (!date) date = new Date()\n  if (date instanceof Date) {\n    const d = date.getDate().toString().padStart(2, '0')\n    const m = (date.getMonth() + 1).toString().padStart(2, '0')\n    const y = date.getFullYear()\n    return `${y}-${m}-${d}`\n  } else {\n    return date\n  }\n}\n\n/**\n * Get difference in days between two dates\n * @param from - Start date\n * @param to - End date\n * @returns Number of days difference\n */\nexport function daysBetween(from: Date, to: Date): number {\n  const diffTime = to.getTime() - from.getTime()\n  return Math.floor(diffTime / (1000 * 60 * 60 * 24))\n}\n\n/**\n * Add days to a date\n * @param date - Base date\n * @param days - Days to add (can be negative)\n * @returns New date\n */\nexport function addDays(date: Date, days: number): Date {\n  const result = new Date(date)\n  result.setDate(result.getDate() + days)\n  return result\n}\n","/**\n * Text utilities - framework-agnostic\n */\n\n/**\n * Encode HTML entities\n * @param html - Raw HTML string\n * @returns Encoded string\n */\nexport function encodeHtml(html: string): string {\n  return html\n    .replace(/&/g, '&amp;')\n    .replace(/>/g, '&gt;')\n    .replace(/</g, '&lt;')\n    .replace(/\"/g, '&quot;')\n}\n\n/**\n * Decode HTML entities\n * @param encoded - Encoded HTML string\n * @returns Decoded string\n */\nexport function decodeHtml(encoded: string): string {\n  return encoded\n    .replace(/&amp;/g, '&')\n    .replace(/&gt;/g, '>')\n    .replace(/&lt;/g, '<')\n    .replace(/&quot;/g, '\"')\n}\n\n/**\n * Format an error message with prefix\n * @param prefix - Error prefix\n * @param ex - Error object or unknown value\n * @returns Formatted error message\n */\nexport function errorMessage(prefix: string, ex: unknown): string {\n  const message = ex instanceof Error ? ex.message : String(ex)\n  return `${prefix} ${message}`\n}\n\n/**\n * Escape regex special characters\n * @param str - String to escape\n * @returns Escaped string safe for use in RegExp\n */\nexport function escapeRegex(str: string): string {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\n/**\n * Normalize whitespace in a string\n * @param str - Input string\n * @returns String with normalized whitespace\n */\nexport function normalizeWhitespace(str: string): string {\n  return str.replace(/\\s+/g, ' ').trim()\n}\n","/**\n * Locale utilities - framework-agnostic\n */\n\nimport type { LocaleSymbol, LanguageSymbol } from '../types'\n\n/**\n * Navigation direction\n */\nexport enum Direction {\n  Next = 1,\n  Prev = -1,\n}\n\n/**\n * Extract language code from locale\n * @param locale - Full locale like \"en-US\"\n * @returns Language code like \"en\"\n */\nexport function locale2lang(locale: LocaleSymbol | string): LanguageSymbol {\n  return locale.split('-')[0] as LanguageSymbol\n}\n\n/**\n * Extract region code from locale\n * @param locale - Full locale like \"en-US\"\n * @returns Region code like \"us\" (lowercase)\n */\nexport function locale2region(locale: LocaleSymbol | string): string {\n  if (!locale) return ''\n  const parts = locale.split('-')\n  return parts.length > 1 ? parts[1].toLowerCase() : ''\n}\n\n/**\n * Get language from locale or language string\n * @param localeOrLang - Locale or language string\n * @returns Two-letter language code\n */\nexport function getLang(localeOrLang: string): string {\n  return localeOrLang.substring(0, 2)\n}\n\n/**\n * Create a locale-aware name sorter\n * @param locale - Locale for collation\n * @returns Comparator function for sorting by name\n */\nexport function nameSorter(locale: LocaleSymbol | string) {\n  return (a: { name: string }, b: { name: string }) =>\n    a.name.localeCompare(b.name, locale, { sensitivity: 'base', ignorePunctuation: true })\n}\n\n/**\n * Validate locale format\n * @param locale - Locale string to validate\n * @returns True if valid locale format\n */\nexport function isValidLocale(locale: string): boolean {\n  return /^[a-z]{2}(-[A-Z]{2})?$/.test(locale)\n}\n\n/**\n * Normalize locale string\n * @param locale - Locale to normalize\n * @returns Normalized locale (e.g., \"en_us\" -> \"en-US\")\n */\nexport function normalizeLocale(locale: string): string {\n  const parts = locale.replace('_', '-').split('-')\n  if (parts.length === 1) return parts[0].toLowerCase()\n  return `${parts[0].toLowerCase()}-${parts[1].toUpperCase()}`\n}\n"]}