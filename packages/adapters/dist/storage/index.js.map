{"version":3,"sources":["../../src/storage/storage-interface.ts","../../src/storage/memory-storage.ts"],"names":[],"mappings":";AA0FO,IAAM,YAAA,GAAN,cAA2B,KAAA,CAAM;AAAA,EACtC,WAAA,CACE,SACgB,IAAA,EAChB;AACA,IAAA,KAAA,CAAM,OAAO,CAAA;AAFG,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AAGhB,IAAA,IAAA,CAAK,IAAA,GAAO,cAAA;AAAA,EACd;AACF;;;ACxFO,IAAM,uBAAN,MAAqD;AAAA,EAArD,WAAA,GAAA;AACL,IAAA,IAAA,CAAQ,OAAA,uBAAmC,GAAA,EAAI;AAAA,EAAA;AAAA,EAE/C,IAAO,GAAA,EAAuB;AAC5B,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI,GAAG,CAAA;AAClC,IAAA,IAAI,KAAA,KAAU,QAAW,OAAO,IAAA;AAChC,IAAA,IAAI;AACF,MAAA,OAAO,IAAA,CAAK,MAAM,KAAK,CAAA;AAAA,IACzB,CAAA,CAAA,MAAQ;AACN,MAAA,OAAO,IAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,GAAA,CAAO,KAAa,KAAA,EAAgB;AAClC,IAAA,IAAA,CAAK,QAAQ,GAAA,CAAI,GAAA,EAAK,IAAA,CAAK,SAAA,CAAU,KAAK,CAAC,CAAA;AAAA,EAC7C;AAAA,EAEA,OAAO,GAAA,EAAmB;AACxB,IAAA,IAAA,CAAK,OAAA,CAAQ,OAAO,GAAG,CAAA;AAAA,EACzB;AAAA,EAEA,IAAI,GAAA,EAAsB;AACxB,IAAA,OAAO,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI,GAAG,CAAA;AAAA,EAC7B;AAAA,EAEA,KAAA,GAAc;AACZ,IAAA,IAAA,CAAK,QAAQ,KAAA,EAAM;AAAA,EACrB;AAAA,EAEA,IAAA,GAAiB;AACf,IAAA,OAAO,KAAA,CAAM,IAAA,CAAK,IAAA,CAAK,OAAA,CAAQ,MAAM,CAAA;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAA,GAAe;AACb,IAAA,IAAI,KAAA,GAAQ,CAAA;AACZ,IAAA,IAAA,CAAK,OAAA,CAAQ,OAAA,CAAQ,CAAC,KAAA,EAAO,GAAA,KAAQ;AACnC,MAAA,KAAA,IAAS,GAAA,CAAI,SAAS,KAAA,CAAM,MAAA;AAAA,IAC9B,CAAC,CAAA;AACD,IAAA,OAAO,KAAA;AAAA,EACT;AACF;AAKO,SAAS,mBAAA,GAAsC;AACpD,EAAA,OAAO,IAAI,oBAAA,EAAqB;AAClC","file":"index.js","sourcesContent":["/**\n * Abstract storage interface\n * Platform-agnostic storage abstraction\n */\n\n/**\n * Key-value storage interface\n */\nexport interface StorageAdapter {\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): T | null\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): void\n\n  /**\n   * Remove a value from storage\n   * @param key - Storage key\n   */\n  remove(key: string): void\n\n  /**\n   * Check if a key exists\n   * @param key - Storage key\n   */\n  has(key: string): boolean\n\n  /**\n   * Clear all stored values\n   */\n  clear(): void\n\n  /**\n   * Get all keys\n   */\n  keys(): string[]\n}\n\n/**\n * Async storage interface for larger data\n */\nexport interface AsyncStorageAdapter {\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): Promise<T | null>\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): Promise<void>\n\n  /**\n   * Remove a value from storage\n   * @param key - Storage key\n   */\n  remove(key: string): Promise<void>\n\n  /**\n   * Check if a key exists\n   * @param key - Storage key\n   */\n  has(key: string): Promise<boolean>\n\n  /**\n   * Clear all stored values\n   */\n  clear(): Promise<void>\n\n  /**\n   * Get all keys\n   */\n  keys(): Promise<string[]>\n}\n\n/**\n * Storage error types\n */\nexport class StorageError extends Error {\n  constructor(\n    message: string,\n    public readonly code: 'QUOTA_EXCEEDED' | 'NOT_AVAILABLE' | 'UNKNOWN'\n  ) {\n    super(message)\n    this.name = 'StorageError'\n  }\n}\n","/**\n * In-memory storage adapter\n * Useful for testing or server-side rendering\n */\n\nimport type { StorageAdapter } from './storage-interface'\n\n/**\n * In-memory implementation of StorageAdapter\n */\nexport class MemoryStorageAdapter implements StorageAdapter {\n  private storage: Map<string, string> = new Map()\n\n  get<T>(key: string): T | null {\n    const value = this.storage.get(key)\n    if (value === undefined) return null\n    try {\n      return JSON.parse(value) as T\n    } catch {\n      return null\n    }\n  }\n\n  set<T>(key: string, value: T): void {\n    this.storage.set(key, JSON.stringify(value))\n  }\n\n  remove(key: string): void {\n    this.storage.delete(key)\n  }\n\n  has(key: string): boolean {\n    return this.storage.has(key)\n  }\n\n  clear(): void {\n    this.storage.clear()\n  }\n\n  keys(): string[] {\n    return Array.from(this.storage.keys())\n  }\n\n  /**\n   * Get the current size of storage in bytes (approximate)\n   */\n  size(): number {\n    let total = 0\n    this.storage.forEach((value, key) => {\n      total += key.length + value.length\n    })\n    return total\n  }\n}\n\n/**\n * Create a new in-memory storage adapter\n */\nexport function createMemoryStorage(): StorageAdapter {\n  return new MemoryStorageAdapter()\n}\n"]}