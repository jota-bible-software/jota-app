{"version":3,"sources":["../../src/factory/config.ts","../../src/storage/storage-interface.ts","../../src/web/local-storage-adapter.ts","../../src/interfaces/storage.ts","../../src/web/indexed-db-adapter.ts","../../src/interfaces/network.ts","../../src/web/web-network-adapter.ts","../../src/interfaces/audio.ts","../../src/web/web-audio-adapter.ts","../../src/interfaces/platform.ts","../../src/web/web-platform-adapter.ts","../../src/memory/memory-storage-adapter.ts","../../src/memory/mock-network-adapter.ts","../../src/memory/mock-audio-adapter.ts","../../src/memory/mock-platform-adapter.ts","../../src/factory/adapter-factory.ts","../../src/factory/detection.ts"],"names":["StorageError","handleIdCounter"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Adapter configuration types and utilities\n */\n\nimport type { StorageAdapterConfig } from '../interfaces/storage'\nimport type { NetworkAdapterConfig } from '../interfaces/network'\nimport type { AudioAdapterConfig } from '../interfaces/audio'\n\n/**\n * Storage adapter type\n */\nexport type StorageAdapterType =\n  | 'memory'\n  | 'localStorage'\n  | 'indexedDB'\n  | 'hybrid'\n\n/**\n * Network adapter type\n */\nexport type NetworkAdapterType = 'fetch' | 'mock'\n\n/**\n * Audio adapter type\n */\nexport type AudioAdapterType = 'webAudio' | 'mock'\n\n/**\n * Platform adapter type\n */\nexport type PlatformAdapterType = 'web' | 'mock'\n\n/**\n * Storage configuration\n */\nexport interface StorageConfig extends StorageAdapterConfig {\n  /** Storage adapter type */\n  type: StorageAdapterType\n  /** IndexedDB database name */\n  dbName?: string\n  /** For hybrid mode: adapter for small data */\n  small?: {\n    type: 'localStorage' | 'memory'\n    config?: StorageAdapterConfig\n  }\n  /** For hybrid mode: adapter for large data */\n  large?: {\n    type: 'indexedDB' | 'memory'\n    config?: StorageAdapterConfig & { dbName?: string }\n  }\n}\n\n/**\n * Network configuration\n */\nexport interface NetworkConfig extends NetworkAdapterConfig {\n  /** Network adapter type */\n  type: NetworkAdapterType\n  /** Cache configuration */\n  cache?: {\n    /** Enable caching */\n    enabled: boolean\n    /** Default TTL in milliseconds */\n    maxAge?: number\n  }\n}\n\n/**\n * Audio configuration\n */\nexport interface AudioConfig extends AudioAdapterConfig {\n  /** Audio adapter type */\n  type: AudioAdapterType\n  /** Fallback adapter type */\n  fallback?: AudioAdapterType\n}\n\n/**\n * Platform configuration\n */\nexport interface PlatformConfig {\n  /** Platform adapter type */\n  type: PlatformAdapterType\n}\n\n/**\n * Complete adapter configuration\n */\nexport interface AdapterConfig {\n  /** Storage adapter configuration */\n  storage?: StorageConfig\n  /** Network adapter configuration */\n  network?: NetworkConfig\n  /** Audio adapter configuration */\n  audio?: AudioConfig\n  /** Platform adapter configuration */\n  platform?: PlatformConfig\n}\n\n/**\n * Default web app configuration\n */\nexport const defaultWebConfig: AdapterConfig = {\n  storage: {\n    type: 'hybrid',\n    small: { type: 'localStorage' },\n    large: { type: 'indexedDB' },\n  },\n  network: {\n    type: 'fetch',\n    cache: { enabled: true, maxAge: 3600000 },\n  },\n  audio: {\n    type: 'webAudio',\n  },\n  platform: {\n    type: 'web',\n  },\n}\n\n/**\n * Default test configuration\n */\nexport const defaultTestConfig: AdapterConfig = {\n  storage: {\n    type: 'memory',\n  },\n  network: {\n    type: 'mock',\n  },\n  audio: {\n    type: 'mock',\n  },\n  platform: {\n    type: 'mock',\n  },\n}\n\n/**\n * Merge configuration with defaults\n */\nexport function mergeConfig(\n  config: Partial<AdapterConfig>,\n  defaults: AdapterConfig = defaultWebConfig\n): AdapterConfig {\n  return {\n    storage: { ...defaults.storage, ...config.storage } as StorageConfig,\n    network: { ...defaults.network, ...config.network } as NetworkConfig,\n    audio: { ...defaults.audio, ...config.audio } as AudioConfig,\n    platform: { ...defaults.platform, ...config.platform } as PlatformConfig,\n  }\n}\n","/**\n * Abstract storage interface\n * Platform-agnostic storage abstraction\n */\n\n/**\n * Key-value storage interface\n */\nexport interface StorageAdapter {\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): T | null\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): void\n\n  /**\n   * Remove a value from storage\n   * @param key - Storage key\n   */\n  remove(key: string): void\n\n  /**\n   * Check if a key exists\n   * @param key - Storage key\n   */\n  has(key: string): boolean\n\n  /**\n   * Clear all stored values\n   */\n  clear(): void\n\n  /**\n   * Get all keys\n   */\n  keys(): string[]\n}\n\n/**\n * Async storage interface for larger data\n */\nexport interface AsyncStorageAdapter {\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): Promise<T | null>\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): Promise<void>\n\n  /**\n   * Remove a value from storage\n   * @param key - Storage key\n   */\n  remove(key: string): Promise<void>\n\n  /**\n   * Check if a key exists\n   * @param key - Storage key\n   */\n  has(key: string): Promise<boolean>\n\n  /**\n   * Clear all stored values\n   */\n  clear(): Promise<void>\n\n  /**\n   * Get all keys\n   */\n  keys(): Promise<string[]>\n}\n\n/**\n * Storage error types\n */\nexport class StorageError extends Error {\n  constructor(\n    message: string,\n    public readonly code: 'QUOTA_EXCEEDED' | 'NOT_AVAILABLE' | 'UNKNOWN'\n  ) {\n    super(message)\n    this.name = 'StorageError'\n  }\n}\n","/**\n * localStorage adapter for web browsers\n */\n\nimport type { StorageAdapter } from '../storage/storage-interface'\nimport { StorageError } from '../storage/storage-interface'\n\n/**\n * Check if an error is a QuotaExceededError\n */\nexport function isQuotaExceededError(error: unknown): boolean {\n  return (\n    error instanceof DOMException &&\n    (error.code === 22 ||\n      error.code === 1014 ||\n      error.name === 'QuotaExceededError' ||\n      error.name === 'NS_ERROR_DOM_QUOTA_REACHED')\n  )\n}\n\n/**\n * localStorage implementation of StorageAdapter\n */\nexport class LocalStorageAdapter implements StorageAdapter {\n  constructor(private prefix: string = '') {}\n\n  private getKey(key: string): string {\n    return this.prefix ? `${this.prefix}.${key}` : key\n  }\n\n  get<T>(key: string): T | null {\n    try {\n      const value = localStorage.getItem(this.getKey(key))\n      if (value === null) return null\n      return JSON.parse(value) as T\n    } catch {\n      return null\n    }\n  }\n\n  set<T>(key: string, value: T): void {\n    try {\n      localStorage.setItem(this.getKey(key), JSON.stringify(value))\n    } catch (error) {\n      if (isQuotaExceededError(error)) {\n        throw new StorageError('localStorage quota exceeded', 'QUOTA_EXCEEDED')\n      }\n      throw error\n    }\n  }\n\n  remove(key: string): void {\n    localStorage.removeItem(this.getKey(key))\n  }\n\n  has(key: string): boolean {\n    return localStorage.getItem(this.getKey(key)) !== null\n  }\n\n  clear(): void {\n    if (this.prefix) {\n      // Only clear keys with our prefix\n      const keysToRemove: string[] = []\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i)\n        if (key && key.startsWith(this.prefix)) {\n          keysToRemove.push(key)\n        }\n      }\n      keysToRemove.forEach(key => localStorage.removeItem(key))\n    } else {\n      localStorage.clear()\n    }\n  }\n\n  keys(): string[] {\n    const keys: string[] = []\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i)\n      if (key) {\n        if (this.prefix) {\n          if (key.startsWith(this.prefix)) {\n            keys.push(key.substring(this.prefix.length + 1))\n          }\n        } else {\n          keys.push(key)\n        }\n      }\n    }\n    return keys\n  }\n\n  /**\n   * Get approximate localStorage usage in bytes\n   */\n  getSize(): number {\n    let total = 0\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i)\n      if (key) {\n        total += key.length + (localStorage.getItem(key)?.length || 0)\n      }\n    }\n    return total\n  }\n\n  /**\n   * Get localStorage usage as a percentage (assumes 5MB limit)\n   */\n  getUsagePercent(): number {\n    const size = this.getSize()\n    const estimatedLimit = 5 * 1024 * 1024 // 5MB in bytes\n    return Math.min(100, (size / estimatedLimit) * 100)\n  }\n}\n\n/**\n * Create a new localStorage adapter\n * @param prefix - Optional prefix for all keys\n */\nexport function createLocalStorage(prefix?: string): StorageAdapter {\n  return new LocalStorageAdapter(prefix)\n}\n","/**\n * Storage adapter interface\n * Platform-agnostic storage abstraction with support for\n * key-value storage, structured data, and batch operations\n */\n\n/**\n * Storage change event\n */\nexport interface StorageChangeEvent<T = unknown> {\n  key: string\n  oldValue: T | null\n  newValue: T | null\n}\n\n/**\n * Comprehensive storage adapter interface\n * Supports both simple key-value and structured collection-based storage\n */\nexport interface IStorageAdapter {\n  // Key-value storage\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): Promise<T | null>\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): Promise<void>\n\n  /**\n   * Delete a value from storage\n   * @param key - Storage key\n   */\n  delete(key: string): Promise<void>\n\n  /**\n   * Clear all stored values\n   */\n  clear(): Promise<void>\n\n  /**\n   * Get all storage keys\n   */\n  keys(): Promise<string[]>\n\n  // Structured storage for large/organized data\n  /**\n   * Get a structured item from a collection\n   * @param collection - Collection name\n   * @param id - Item identifier\n   */\n  getStructured<T>(collection: string, id: string): Promise<T | null>\n\n  /**\n   * Set a structured item in a collection\n   * @param collection - Collection name\n   * @param id - Item identifier\n   * @param value - Value to store\n   */\n  setStructured<T>(collection: string, id: string, value: T): Promise<void>\n\n  /**\n   * Delete structured item(s) from a collection\n   * @param collection - Collection name\n   * @param id - Optional item identifier (deletes entire collection if omitted)\n   */\n  deleteStructured(collection: string, id?: string): Promise<void>\n\n  /**\n   * List all item IDs in a collection\n   * @param collection - Collection name\n   */\n  listStructured(collection: string): Promise<string[]>\n\n  // Bulk operations\n  /**\n   * Get multiple values at once\n   * @param keys - Array of storage keys\n   */\n  getBatch<T>(keys: string[]): Promise<Record<string, T | null>>\n\n  /**\n   * Set multiple values at once\n   * @param data - Key-value pairs to store\n   */\n  setBatch(data: Record<string, unknown>): Promise<void>\n\n  // Events\n  /**\n   * Subscribe to storage changes\n   * @param callback - Called when storage changes\n   * @returns Cleanup function to unsubscribe\n   */\n  onChanged<T>(callback: (event: StorageChangeEvent<T>) => void): () => void\n}\n\n/**\n * Synchronous storage adapter for simple use cases\n * Useful when async is not needed (e.g., localStorage)\n */\nexport interface ISyncStorageAdapter {\n  get<T>(key: string): T | null\n  set<T>(key: string, value: T): void\n  delete(key: string): void\n  clear(): void\n  keys(): string[]\n  has(key: string): boolean\n}\n\n/**\n * Storage error codes\n */\nexport type StorageErrorCode =\n  | 'QUOTA_EXCEEDED'\n  | 'NOT_AVAILABLE'\n  | 'PERMISSION_DENIED'\n  | 'NOT_FOUND'\n  | 'INVALID_DATA'\n  | 'UNKNOWN'\n\n/**\n * Storage error class\n */\nexport class StorageError extends Error {\n  constructor(\n    message: string,\n    public readonly code: StorageErrorCode\n  ) {\n    super(message)\n    this.name = 'StorageError'\n  }\n}\n\n/**\n * Storage adapter configuration\n */\nexport interface StorageAdapterConfig {\n  /** Prefix for all storage keys */\n  prefix?: string\n  /** Maximum storage quota in bytes (if supported) */\n  maxQuota?: number\n  /** Enable compression for large values */\n  compression?: boolean\n}\n","/**\n * IndexedDB storage adapter\n * Supports large data storage with structured collections\n */\n\nimport type {\n  IStorageAdapter,\n  StorageAdapterConfig,\n  StorageChangeEvent,\n} from '../interfaces/storage'\nimport { StorageError } from '../interfaces/storage'\n\nconst DEFAULT_DB_NAME = 'jota-db'\nconst DEFAULT_VERSION = 1\nconst KV_STORE = 'keyvalue'\nconst COLLECTIONS_STORE = 'collections'\n\ninterface CollectionItem<T = unknown> {\n  collection: string\n  id: string\n  value: T\n}\n\n/**\n * IndexedDB-based storage adapter\n * Provides async storage for large datasets with structured collections\n */\nexport class IndexedDBAdapter implements IStorageAdapter {\n  private db: IDBDatabase | null = null\n  private dbName: string\n  private prefix: string\n  private listeners: Set<(event: StorageChangeEvent) => void> = new Set()\n  private initPromise: Promise<void> | null = null\n\n  constructor(config: StorageAdapterConfig & { dbName?: string } = {}) {\n    this.dbName = config.dbName ?? DEFAULT_DB_NAME\n    this.prefix = config.prefix ?? ''\n  }\n\n  private async init(): Promise<void> {\n    if (this.db) return\n\n    if (this.initPromise) {\n      return this.initPromise\n    }\n\n    this.initPromise = new Promise((resolve, reject) => {\n      if (!('indexedDB' in globalThis)) {\n        reject(new StorageError('IndexedDB is not available', 'NOT_AVAILABLE'))\n        return\n      }\n\n      const request = indexedDB.open(this.dbName, DEFAULT_VERSION)\n\n      request.onerror = () => {\n        reject(new StorageError('Failed to open IndexedDB', 'UNKNOWN'))\n      }\n\n      request.onsuccess = () => {\n        this.db = request.result\n        resolve()\n      }\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result\n\n        // Key-value store\n        if (!db.objectStoreNames.contains(KV_STORE)) {\n          db.createObjectStore(KV_STORE)\n        }\n\n        // Collections store with compound index\n        if (!db.objectStoreNames.contains(COLLECTIONS_STORE)) {\n          const store = db.createObjectStore(COLLECTIONS_STORE, {\n            keyPath: ['collection', 'id'],\n          })\n          store.createIndex('collection', 'collection', { unique: false })\n        }\n      }\n    })\n\n    return this.initPromise\n  }\n\n  private getKey(key: string): string {\n    return this.prefix ? `${this.prefix}.${key}` : key\n  }\n\n  private notifyChange<T>(key: string, oldValue: T | null, newValue: T | null): void {\n    const event: StorageChangeEvent<T> = { key, oldValue, newValue }\n    this.listeners.forEach((listener) => listener(event))\n  }\n\n  // Key-value operations\n\n  async get<T>(key: string): Promise<T | null> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readonly')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.get(this.getKey(key))\n\n      request.onerror = () => reject(new StorageError('Failed to get value', 'UNKNOWN'))\n      request.onsuccess = () => resolve(request.result ?? null)\n    })\n  }\n\n  async set<T>(key: string, value: T): Promise<void> {\n    await this.init()\n    const oldValue = await this.get<T>(key)\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readwrite')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.put(value, this.getKey(key))\n\n      request.onerror = () => {\n        const error = request.error\n        if (error?.name === 'QuotaExceededError') {\n          reject(new StorageError('Storage quota exceeded', 'QUOTA_EXCEEDED'))\n        } else {\n          reject(new StorageError('Failed to set value', 'UNKNOWN'))\n        }\n      }\n      request.onsuccess = () => {\n        this.notifyChange(key, oldValue, value)\n        resolve()\n      }\n    })\n  }\n\n  async delete(key: string): Promise<void> {\n    await this.init()\n    const oldValue = await this.get(key)\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readwrite')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.delete(this.getKey(key))\n\n      request.onerror = () => reject(new StorageError('Failed to delete value', 'UNKNOWN'))\n      request.onsuccess = () => {\n        this.notifyChange(key, oldValue, null)\n        resolve()\n      }\n    })\n  }\n\n  async clear(): Promise<void> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([KV_STORE, COLLECTIONS_STORE], 'readwrite')\n\n      if (this.prefix) {\n        // Clear only keys with our prefix\n        const kvStore = transaction.objectStore(KV_STORE)\n        const cursorRequest = kvStore.openCursor()\n\n        cursorRequest.onsuccess = () => {\n          const cursor = cursorRequest.result\n          if (cursor) {\n            const key = cursor.key as string\n            if (key.startsWith(this.prefix)) {\n              cursor.delete()\n            }\n            cursor.continue()\n          }\n        }\n\n        // Clear collections with prefix\n        const collectionsStore = transaction.objectStore(COLLECTIONS_STORE)\n        const collCursorRequest = collectionsStore.openCursor()\n\n        collCursorRequest.onsuccess = () => {\n          const cursor = collCursorRequest.result\n          if (cursor) {\n            const item = cursor.value as CollectionItem\n            if (item.collection.startsWith(this.prefix)) {\n              cursor.delete()\n            }\n            cursor.continue()\n          }\n        }\n      } else {\n        // Clear all\n        transaction.objectStore(KV_STORE).clear()\n        transaction.objectStore(COLLECTIONS_STORE).clear()\n      }\n\n      transaction.oncomplete = () => resolve()\n      transaction.onerror = () => reject(new StorageError('Failed to clear storage', 'UNKNOWN'))\n    })\n  }\n\n  async keys(): Promise<string[]> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readonly')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.getAllKeys()\n\n      request.onerror = () => reject(new StorageError('Failed to get keys', 'UNKNOWN'))\n      request.onsuccess = () => {\n        let keys = request.result as string[]\n        if (this.prefix) {\n          keys = keys\n            .filter((k) => k.startsWith(this.prefix))\n            .map((k) => k.substring(this.prefix.length + 1))\n        }\n        resolve(keys)\n      }\n    })\n  }\n\n  // Structured storage operations\n\n  async getStructured<T>(collection: string, id: string): Promise<T | null> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readonly')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n      const request = store.get([collectionKey, id])\n\n      request.onerror = () => reject(new StorageError('Failed to get structured value', 'UNKNOWN'))\n      request.onsuccess = () => {\n        const item = request.result as CollectionItem<T> | undefined\n        resolve(item?.value ?? null)\n      }\n    })\n  }\n\n  async setStructured<T>(collection: string, id: string, value: T): Promise<void> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readwrite')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n      const item: CollectionItem<T> = { collection: collectionKey, id, value }\n      const request = store.put(item)\n\n      request.onerror = () => {\n        const error = request.error\n        if (error?.name === 'QuotaExceededError') {\n          reject(new StorageError('Storage quota exceeded', 'QUOTA_EXCEEDED'))\n        } else {\n          reject(new StorageError('Failed to set structured value', 'UNKNOWN'))\n        }\n      }\n      request.onsuccess = () => resolve()\n    })\n  }\n\n  async deleteStructured(collection: string, id?: string): Promise<void> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readwrite')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n\n      if (id !== undefined) {\n        // Delete single item\n        const request = store.delete([collectionKey, id])\n        request.onerror = () =>\n          reject(new StorageError('Failed to delete structured value', 'UNKNOWN'))\n        request.onsuccess = () => resolve()\n      } else {\n        // Delete entire collection\n        const index = store.index('collection')\n        const request = index.openCursor(IDBKeyRange.only(collectionKey))\n\n        request.onsuccess = () => {\n          const cursor = request.result\n          if (cursor) {\n            cursor.delete()\n            cursor.continue()\n          }\n        }\n\n        transaction.oncomplete = () => resolve()\n        transaction.onerror = () =>\n          reject(new StorageError('Failed to delete collection', 'UNKNOWN'))\n      }\n    })\n  }\n\n  async listStructured(collection: string): Promise<string[]> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readonly')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n      const index = store.index('collection')\n      const request = index.getAllKeys(IDBKeyRange.only(collectionKey))\n\n      request.onerror = () =>\n        reject(new StorageError('Failed to list structured items', 'UNKNOWN'))\n      request.onsuccess = () => {\n        // Keys are [collection, id] arrays\n        const ids = (request.result as [string, string][]).map(([, id]) => id)\n        resolve(ids)\n      }\n    })\n  }\n\n  // Batch operations\n\n  async getBatch<T>(keys: string[]): Promise<Record<string, T | null>> {\n    await this.init()\n\n    const results: Record<string, T | null> = {}\n\n    await Promise.all(\n      keys.map(async (key) => {\n        results[key] = await this.get<T>(key)\n      })\n    )\n\n    return results\n  }\n\n  async setBatch(data: Record<string, unknown>): Promise<void> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readwrite')\n      const store = transaction.objectStore(KV_STORE)\n\n      for (const [key, value] of Object.entries(data)) {\n        store.put(value, this.getKey(key))\n      }\n\n      transaction.oncomplete = () => resolve()\n      transaction.onerror = () => {\n        const error = transaction.error\n        if (error?.name === 'QuotaExceededError') {\n          reject(new StorageError('Storage quota exceeded', 'QUOTA_EXCEEDED'))\n        } else {\n          reject(new StorageError('Failed to set batch values', 'UNKNOWN'))\n        }\n      }\n    })\n  }\n\n  // Events\n\n  onChanged<T>(callback: (event: StorageChangeEvent<T>) => void): () => void {\n    this.listeners.add(callback as (event: StorageChangeEvent) => void)\n    return () => {\n      this.listeners.delete(callback as (event: StorageChangeEvent) => void)\n    }\n  }\n\n  // Cleanup\n\n  async close(): Promise<void> {\n    if (this.db) {\n      this.db.close()\n      this.db = null\n      this.initPromise = null\n    }\n  }\n\n  /**\n   * Get storage usage estimate (if supported)\n   */\n  async getStorageEstimate(): Promise<{ usage: number; quota: number } | null> {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      const estimate = await navigator.storage.estimate()\n      return {\n        usage: estimate.usage ?? 0,\n        quota: estimate.quota ?? 0,\n      }\n    }\n    return null\n  }\n}\n\n/**\n * Create an IndexedDB storage adapter\n * @param config - Adapter configuration\n */\nexport function createIndexedDBStorage(\n  config?: StorageAdapterConfig & { dbName?: string }\n): IStorageAdapter {\n  return new IndexedDBAdapter(config)\n}\n","/**\n * Network adapter interface\n * Platform-agnostic network abstraction for HTTP requests,\n * file downloads, caching, and connection status\n */\n\n/**\n * HTTP request options\n */\nexport interface RequestOptions {\n  /** Request headers */\n  headers?: Record<string, string>\n  /** Request timeout in milliseconds */\n  timeout?: number\n  /** Abort signal for request cancellation */\n  signal?: AbortSignal\n  /** Enable/disable credentials (cookies) */\n  credentials?: 'include' | 'omit' | 'same-origin'\n  /** Response type */\n  responseType?: 'json' | 'text' | 'blob' | 'arraybuffer'\n}\n\n/**\n * HTTP response wrapper\n */\nexport interface HttpResponse<T> {\n  /** Response data */\n  data: T\n  /** HTTP status code */\n  status: number\n  /** Response headers */\n  headers: Record<string, string>\n  /** Whether the request was successful (2xx status) */\n  ok: boolean\n}\n\n/**\n * Download progress information\n */\nexport interface DownloadProgress {\n  /** Bytes loaded */\n  loaded: number\n  /** Total bytes (if known) */\n  total: number | null\n  /** Progress percentage (0-100) */\n  percent: number\n}\n\n/**\n * Cache entry metadata\n */\nexport interface CacheEntry<T> {\n  /** Cached data */\n  data: T\n  /** When the entry was cached (timestamp) */\n  cachedAt: number\n  /** Time-to-live in milliseconds */\n  ttl: number\n}\n\n/**\n * Network adapter interface\n */\nexport interface INetworkAdapter {\n  // HTTP requests\n  /**\n   * Perform a GET request\n   * @param url - Request URL\n   * @param options - Request options\n   */\n  get<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a POST request\n   * @param url - Request URL\n   * @param data - Request body\n   * @param options - Request options\n   */\n  post<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a PUT request\n   * @param url - Request URL\n   * @param data - Request body\n   * @param options - Request options\n   */\n  put<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a PATCH request\n   * @param url - Request URL\n   * @param data - Request body\n   * @param options - Request options\n   */\n  patch<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a DELETE request\n   * @param url - Request URL\n   * @param options - Request options\n   */\n  delete<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  // File downloads\n  /**\n   * Download a file as Blob\n   * @param url - File URL\n   * @param onProgress - Progress callback\n   */\n  downloadFile(url: string, onProgress?: (progress: DownloadProgress) => void): Promise<Blob>\n\n  /**\n   * Download and parse JSON\n   * @param url - JSON URL\n   * @param onProgress - Progress callback\n   */\n  downloadJson<T>(url: string, onProgress?: (progress: DownloadProgress) => void): Promise<T>\n\n  // Caching\n  /**\n   * Get cached data if still valid\n   * @param url - Cache key (usually the URL)\n   * @param maxAge - Maximum age in milliseconds\n   */\n  getCached<T>(url: string, maxAge?: number): Promise<T | null>\n\n  /**\n   * Store data in cache\n   * @param url - Cache key\n   * @param data - Data to cache\n   * @param ttl - Time-to-live in milliseconds\n   */\n  setCached<T>(url: string, data: T, ttl?: number): Promise<void>\n\n  /**\n   * Invalidate cached data\n   * @param url - Cache key to invalidate\n   */\n  invalidateCache(url: string): Promise<void>\n\n  /**\n   * Clear all cached data\n   */\n  clearCache(): Promise<void>\n\n  // Connection status\n  /**\n   * Check if currently online\n   */\n  isOnline(): Promise<boolean>\n\n  /**\n   * Subscribe to connection status changes\n   * @param callback - Called when connection status changes\n   * @returns Cleanup function\n   */\n  onConnectionChange(callback: (online: boolean) => void): () => void\n}\n\n/**\n * Network error codes\n */\nexport type NetworkErrorCode =\n  | 'TIMEOUT'\n  | 'OFFLINE'\n  | 'ABORTED'\n  | 'NOT_FOUND'\n  | 'SERVER_ERROR'\n  | 'NETWORK_ERROR'\n  | 'PARSE_ERROR'\n  | 'UNKNOWN'\n\n/**\n * Network error class\n */\nexport class NetworkError extends Error {\n  constructor(\n    message: string,\n    public readonly code: NetworkErrorCode,\n    public readonly status?: number,\n    public readonly response?: unknown\n  ) {\n    super(message)\n    this.name = 'NetworkError'\n  }\n}\n\n/**\n * Network adapter configuration\n */\nexport interface NetworkAdapterConfig {\n  /** Base URL for all requests */\n  baseUrl?: string\n  /** Default timeout in milliseconds */\n  timeout?: number\n  /** Default headers for all requests */\n  headers?: Record<string, string>\n  /** Enable request/response logging */\n  debug?: boolean\n  /** Retry configuration */\n  retry?: {\n    /** Maximum retry attempts */\n    maxAttempts: number\n    /** Delay between retries in milliseconds */\n    delay: number\n    /** Multiply delay by this factor for each retry */\n    backoffFactor?: number\n  }\n}\n","/**\n * Web network adapter\n * Fetch-based HTTP client with caching support\n */\n\nimport type {\n  INetworkAdapter,\n  RequestOptions,\n  HttpResponse,\n  DownloadProgress,\n  NetworkAdapterConfig,\n} from '../interfaces/network'\nimport { NetworkError } from '../interfaces/network'\n\nconst DEFAULT_TIMEOUT = 30000\nconst DEFAULT_CACHE_TTL = 3600000 // 1 hour\n\ninterface CacheItem<T> {\n  data: T\n  cachedAt: number\n  ttl: number\n}\n\n/**\n * Web-based network adapter using fetch API\n */\nexport class WebNetworkAdapter implements INetworkAdapter {\n  private config: NetworkAdapterConfig\n  private cache: Map<string, CacheItem<unknown>> = new Map()\n  private onlineListeners: Set<(online: boolean) => void> = new Set()\n  private boundOnlineHandler: () => void\n  private boundOfflineHandler: () => void\n\n  constructor(config: NetworkAdapterConfig = {}) {\n    this.config = {\n      timeout: DEFAULT_TIMEOUT,\n      ...config,\n    }\n\n    this.boundOnlineHandler = () => this.notifyConnectionChange(true)\n    this.boundOfflineHandler = () => this.notifyConnectionChange(false)\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('online', this.boundOnlineHandler)\n      window.addEventListener('offline', this.boundOfflineHandler)\n    }\n  }\n\n  private notifyConnectionChange(online: boolean): void {\n    this.onlineListeners.forEach((listener) => listener(online))\n  }\n\n  private buildUrl(url: string): string {\n    if (this.config.baseUrl && !url.startsWith('http')) {\n      return `${this.config.baseUrl}${url.startsWith('/') ? '' : '/'}${url}`\n    }\n    return url\n  }\n\n  private buildHeaders(options?: RequestOptions): Record<string, string> {\n    return {\n      ...this.config.headers,\n      ...options?.headers,\n    }\n  }\n\n  private parseResponseHeaders(headers: Headers): Record<string, string> {\n    const result: Record<string, string> = {}\n    headers.forEach((value, key) => {\n      result[key] = value\n    })\n    return result\n  }\n\n  private async request<T>(\n    method: string,\n    url: string,\n    body?: unknown,\n    options?: RequestOptions\n  ): Promise<HttpResponse<T>> {\n    const fullUrl = this.buildUrl(url)\n    const timeout = options?.timeout ?? this.config.timeout ?? DEFAULT_TIMEOUT\n\n    const controller = new AbortController()\n    const timeoutId = setTimeout(() => controller.abort(), timeout)\n\n    try {\n      const fetchOptions: RequestInit = {\n        method,\n        headers: this.buildHeaders(options),\n        signal: options?.signal ?? controller.signal,\n        credentials: options?.credentials,\n      }\n\n      if (body !== undefined && method !== 'GET' && method !== 'HEAD') {\n        fetchOptions.body = JSON.stringify(body)\n        fetchOptions.headers = {\n          'Content-Type': 'application/json',\n          ...fetchOptions.headers,\n        }\n      }\n\n      const response = await fetch(fullUrl, fetchOptions)\n      clearTimeout(timeoutId)\n\n      let data: T\n\n      const responseType = options?.responseType ?? 'json'\n      switch (responseType) {\n        case 'text':\n          data = (await response.text()) as T\n          break\n        case 'blob':\n          data = (await response.blob()) as T\n          break\n        case 'arraybuffer':\n          data = (await response.arrayBuffer()) as T\n          break\n        case 'json':\n        default:\n          data = (await response.json()) as T\n          break\n      }\n\n      return {\n        data,\n        status: response.status,\n        headers: this.parseResponseHeaders(response.headers),\n        ok: response.ok,\n      }\n    } catch (error) {\n      clearTimeout(timeoutId)\n\n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          if (!navigator.onLine) {\n            throw new NetworkError('No internet connection', 'OFFLINE')\n          }\n          throw new NetworkError('Request timeout', 'TIMEOUT')\n        }\n        throw new NetworkError(error.message, 'NETWORK_ERROR')\n      }\n      throw new NetworkError('Unknown network error', 'UNKNOWN')\n    }\n  }\n\n  // HTTP methods\n\n  async get<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('GET', url, undefined, options)\n  }\n\n  async post<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('POST', url, data, options)\n  }\n\n  async put<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('PUT', url, data, options)\n  }\n\n  async patch<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('PATCH', url, data, options)\n  }\n\n  async delete<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('DELETE', url, undefined, options)\n  }\n\n  // File downloads\n\n  async downloadFile(\n    url: string,\n    onProgress?: (progress: DownloadProgress) => void\n  ): Promise<Blob> {\n    const fullUrl = this.buildUrl(url)\n    const response = await fetch(fullUrl)\n\n    if (!response.ok) {\n      throw new NetworkError(`Download failed: ${response.status}`, 'SERVER_ERROR', response.status)\n    }\n\n    if (!response.body) {\n      // Fallback for browsers without streaming support\n      return response.blob()\n    }\n\n    const contentLength = response.headers.get('content-length')\n    const total = contentLength ? parseInt(contentLength, 10) : null\n\n    const reader = response.body.getReader()\n    const chunks: Uint8Array[] = []\n    let loaded = 0\n\n    while (true) {\n      const { done, value } = await reader.read()\n\n      if (done) break\n\n      chunks.push(value)\n      loaded += value.length\n\n      if (onProgress) {\n        onProgress({\n          loaded,\n          total,\n          percent: total ? Math.round((loaded / total) * 100) : 0,\n        })\n      }\n    }\n\n    const blob = new Blob(chunks)\n    return blob\n  }\n\n  async downloadJson<T>(\n    url: string,\n    onProgress?: (progress: DownloadProgress) => void\n  ): Promise<T> {\n    const blob = await this.downloadFile(url, onProgress)\n    const text = await blob.text()\n\n    try {\n      return JSON.parse(text) as T\n    } catch {\n      throw new NetworkError('Failed to parse JSON', 'PARSE_ERROR')\n    }\n  }\n\n  // Caching\n\n  async getCached<T>(url: string, maxAge?: number): Promise<T | null> {\n    const cacheKey = this.buildUrl(url)\n    const cached = this.cache.get(cacheKey) as CacheItem<T> | undefined\n\n    if (!cached) return null\n\n    const age = Date.now() - cached.cachedAt\n    const effectiveMaxAge = maxAge ?? cached.ttl\n\n    if (age > effectiveMaxAge) {\n      this.cache.delete(cacheKey)\n      return null\n    }\n\n    return cached.data\n  }\n\n  async setCached<T>(url: string, data: T, ttl?: number): Promise<void> {\n    const cacheKey = this.buildUrl(url)\n    this.cache.set(cacheKey, {\n      data,\n      cachedAt: Date.now(),\n      ttl: ttl ?? DEFAULT_CACHE_TTL,\n    })\n  }\n\n  async invalidateCache(url: string): Promise<void> {\n    const cacheKey = this.buildUrl(url)\n    this.cache.delete(cacheKey)\n  }\n\n  async clearCache(): Promise<void> {\n    this.cache.clear()\n  }\n\n  // Connection status\n\n  async isOnline(): Promise<boolean> {\n    return navigator.onLine\n  }\n\n  onConnectionChange(callback: (online: boolean) => void): () => void {\n    this.onlineListeners.add(callback)\n    return () => {\n      this.onlineListeners.delete(callback)\n    }\n  }\n\n  // Cleanup\n\n  dispose(): void {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('online', this.boundOnlineHandler)\n      window.removeEventListener('offline', this.boundOfflineHandler)\n    }\n    this.onlineListeners.clear()\n    this.cache.clear()\n  }\n}\n\n/**\n * Create a web network adapter\n * @param config - Adapter configuration\n */\nexport function createWebNetwork(config?: NetworkAdapterConfig): INetworkAdapter {\n  return new WebNetworkAdapter(config)\n}\n","/**\n * Audio adapter interface\n * Platform-agnostic audio playback abstraction\n */\n\n/**\n * Audio playback state\n */\nexport type AudioState = 'idle' | 'loading' | 'playing' | 'paused' | 'ended' | 'error'\n\n/**\n * Audio playback options\n */\nexport interface AudioOptions {\n  /** Initial volume (0-1) */\n  volume?: number\n  /** Playback rate (0.5-2.0 typically) */\n  playbackRate?: number\n  /** Start position in seconds */\n  startTime?: number\n  /** Whether to loop playback */\n  loop?: boolean\n  /** Preload strategy */\n  preload?: 'none' | 'metadata' | 'auto'\n}\n\n/**\n * Audio handle returned by play()\n * Used to control an active audio instance\n */\nexport interface IAudioHandle {\n  /** Unique identifier for this playback instance */\n  id: string\n  /** Source URL */\n  url: string\n  /** Current playback state */\n  state: AudioState\n}\n\n/**\n * Audio playback event data\n */\nexport interface AudioEvent {\n  /** Event type */\n  type: 'statechange' | 'timeupdate' | 'ended' | 'error' | 'loaded'\n  /** Audio handle */\n  handle: IAudioHandle\n  /** Current playback time in seconds */\n  currentTime?: number\n  /** Total duration in seconds */\n  duration?: number\n  /** Error message (if type is 'error') */\n  error?: string\n}\n\n/**\n * Audio event callback\n */\nexport type AudioEventCallback = (event: AudioEvent) => void\n\n/**\n * Audio metadata\n */\nexport interface AudioMetadata {\n  /** Duration in seconds */\n  duration: number\n  /** Sample rate in Hz */\n  sampleRate?: number\n  /** Number of audio channels */\n  channels?: number\n  /** File format */\n  format?: string\n}\n\n/**\n * Audio adapter interface\n */\nexport interface IAudioAdapter {\n  // Playback control\n  /**\n   * Start playing audio from a URL\n   * @param url - Audio source URL\n   * @param options - Playback options\n   * @returns Audio handle for controlling playback\n   */\n  play(url: string, options?: AudioOptions): Promise<IAudioHandle>\n\n  /**\n   * Pause playback\n   * @param handle - Audio handle from play()\n   */\n  pause(handle: IAudioHandle): Promise<void>\n\n  /**\n   * Resume paused playback\n   * @param handle - Audio handle from play()\n   */\n  resume(handle: IAudioHandle): Promise<void>\n\n  /**\n   * Stop playback and release resources\n   * @param handle - Audio handle from play()\n   */\n  stop(handle: IAudioHandle): Promise<void>\n\n  // Seek and position\n  /**\n   * Get current playback position\n   * @param handle - Audio handle\n   * @returns Current time in seconds\n   */\n  getCurrentTime(handle: IAudioHandle): Promise<number>\n\n  /**\n   * Seek to a position\n   * @param handle - Audio handle\n   * @param time - Position in seconds\n   */\n  setCurrentTime(handle: IAudioHandle, time: number): Promise<void>\n\n  /**\n   * Get audio duration\n   * @param handle - Audio handle or URL\n   * @returns Duration in seconds\n   */\n  getDuration(handle: IAudioHandle | string): Promise<number>\n\n  // Volume control\n  /**\n   * Get current volume\n   * @param handle - Audio handle\n   * @returns Volume (0-1)\n   */\n  getVolume(handle: IAudioHandle): Promise<number>\n\n  /**\n   * Set volume\n   * @param handle - Audio handle\n   * @param volume - Volume (0-1)\n   */\n  setVolume(handle: IAudioHandle, volume: number): Promise<void>\n\n  /**\n   * Mute audio\n   * @param handle - Audio handle\n   */\n  mute(handle: IAudioHandle): Promise<void>\n\n  /**\n   * Unmute audio\n   * @param handle - Audio handle\n   */\n  unmute(handle: IAudioHandle): Promise<void>\n\n  // Playback rate\n  /**\n   * Get current playback rate\n   * @param handle - Audio handle\n   * @returns Playback rate (1.0 = normal)\n   */\n  getPlaybackRate(handle: IAudioHandle): Promise<number>\n\n  /**\n   * Set playback rate\n   * @param handle - Audio handle\n   * @param rate - Playback rate (0.5-2.0 typically)\n   */\n  setPlaybackRate(handle: IAudioHandle, rate: number): Promise<void>\n\n  // Metadata\n  /**\n   * Get audio metadata\n   * @param url - Audio URL\n   */\n  getMetadata(url: string): Promise<AudioMetadata>\n\n  // Preloading\n  /**\n   * Preload audio for faster playback\n   * @param url - Audio URL\n   */\n  preload(url: string): Promise<void>\n\n  /**\n   * Cancel preloading\n   * @param url - Audio URL\n   */\n  cancelPreload(url: string): Promise<void>\n\n  // Events\n  /**\n   * Subscribe to playback events\n   * @param handle - Audio handle\n   * @param callback - Event callback\n   * @returns Cleanup function\n   */\n  onPlaybackChange(handle: IAudioHandle, callback: AudioEventCallback): () => void\n\n  // Cleanup\n  /**\n   * Stop all playback and release all resources\n   */\n  dispose(): Promise<void>\n}\n\n/**\n * Audio error codes\n */\nexport type AudioErrorCode =\n  | 'NOT_SUPPORTED'\n  | 'NETWORK_ERROR'\n  | 'DECODE_ERROR'\n  | 'PERMISSION_DENIED'\n  | 'NOT_FOUND'\n  | 'ABORTED'\n  | 'UNKNOWN'\n\n/**\n * Audio error class\n */\nexport class AudioError extends Error {\n  constructor(\n    message: string,\n    public readonly code: AudioErrorCode\n  ) {\n    super(message)\n    this.name = 'AudioError'\n  }\n}\n\n/**\n * Audio adapter configuration\n */\nexport interface AudioAdapterConfig {\n  /** Default volume (0-1) */\n  defaultVolume?: number\n  /** Default playback rate */\n  defaultPlaybackRate?: number\n  /** Enable audio buffering */\n  buffering?: boolean\n  /** Buffer size in seconds */\n  bufferSize?: number\n}\n","/**\n * Web Audio adapter\n * HTML5 Audio-based playback with Web Audio API enhancements\n */\n\nimport type {\n  IAudioAdapter,\n  IAudioHandle,\n  AudioOptions,\n  AudioEvent,\n  AudioEventCallback,\n  AudioMetadata,\n  AudioState,\n  AudioAdapterConfig,\n} from '../interfaces/audio'\nimport { AudioError } from '../interfaces/audio'\n\nlet handleIdCounter = 0\n\nfunction generateHandleId(): string {\n  return `audio_${++handleIdCounter}_${Date.now()}`\n}\n\ninterface AudioInstance {\n  handle: IAudioHandle\n  element: HTMLAudioElement\n  listeners: Set<AudioEventCallback>\n  isMuted: boolean\n  previousVolume: number\n}\n\n/**\n * Web Audio adapter using HTML5 Audio element\n */\nexport class WebAudioAdapter implements IAudioAdapter {\n  private instances: Map<string, AudioInstance> = new Map()\n  private preloadedAudio: Map<string, HTMLAudioElement> = new Map()\n  private config: AudioAdapterConfig\n\n  constructor(config: AudioAdapterConfig = {}) {\n    this.config = {\n      defaultVolume: 1.0,\n      defaultPlaybackRate: 1.0,\n      ...config,\n    }\n  }\n\n  private createAudioElement(url: string, options?: AudioOptions): HTMLAudioElement {\n    // Check for preloaded audio\n    const preloaded = this.preloadedAudio.get(url)\n    if (preloaded) {\n      this.preloadedAudio.delete(url)\n      return preloaded\n    }\n\n    const audio = new Audio()\n    audio.src = url\n    audio.preload = options?.preload ?? 'auto'\n\n    return audio\n  }\n\n  private getState(audio: HTMLAudioElement): AudioState {\n    if (audio.error) return 'error'\n    if (audio.ended) return 'ended'\n    if (audio.paused && audio.currentTime === 0 && audio.readyState < 2) return 'loading'\n    if (audio.paused) return 'paused'\n    if (!audio.paused) return 'playing'\n    return 'idle'\n  }\n\n  private notifyListeners(instance: AudioInstance, eventType: AudioEvent['type']): void {\n    const audio = instance.element\n    const event: AudioEvent = {\n      type: eventType,\n      handle: {\n        ...instance.handle,\n        state: this.getState(audio),\n      },\n      currentTime: audio.currentTime,\n      duration: isNaN(audio.duration) ? undefined : audio.duration,\n    }\n\n    if (eventType === 'error' && audio.error) {\n      event.error = audio.error.message\n    }\n\n    instance.listeners.forEach((callback) => callback(event))\n  }\n\n  private setupEventListeners(instance: AudioInstance): void {\n    const audio = instance.element\n\n    const events = [\n      'play',\n      'pause',\n      'ended',\n      'error',\n      'loadedmetadata',\n      'timeupdate',\n    ] as const\n\n    events.forEach((eventName) => {\n      audio.addEventListener(eventName, () => {\n        // Update handle state\n        instance.handle.state = this.getState(audio)\n\n        // Map to our event types\n        let eventType: AudioEvent['type']\n        switch (eventName) {\n          case 'play':\n          case 'pause':\n            eventType = 'statechange'\n            break\n          case 'ended':\n            eventType = 'ended'\n            break\n          case 'error':\n            eventType = 'error'\n            break\n          case 'loadedmetadata':\n            eventType = 'loaded'\n            break\n          case 'timeupdate':\n            eventType = 'timeupdate'\n            break\n          default:\n            return\n        }\n\n        this.notifyListeners(instance, eventType)\n      })\n    })\n  }\n\n  // Playback control\n\n  async play(url: string, options?: AudioOptions): Promise<IAudioHandle> {\n    const audio = this.createAudioElement(url, options)\n    const handleId = generateHandleId()\n\n    const handle: IAudioHandle = {\n      id: handleId,\n      url,\n      state: 'loading',\n    }\n\n    const instance: AudioInstance = {\n      handle,\n      element: audio,\n      listeners: new Set(),\n      isMuted: false,\n      previousVolume: options?.volume ?? this.config.defaultVolume ?? 1.0,\n    }\n\n    this.instances.set(handleId, instance)\n    this.setupEventListeners(instance)\n\n    // Apply options\n    audio.volume = options?.volume ?? this.config.defaultVolume ?? 1.0\n    audio.playbackRate = options?.playbackRate ?? this.config.defaultPlaybackRate ?? 1.0\n    audio.loop = options?.loop ?? false\n\n    if (options?.startTime) {\n      audio.currentTime = options.startTime\n    }\n\n    try {\n      await audio.play()\n      handle.state = 'playing'\n      return handle\n    } catch (error) {\n      handle.state = 'error'\n      if (error instanceof Error && error.name === 'NotAllowedError') {\n        throw new AudioError(\n          'Playback not allowed. User interaction required.',\n          'PERMISSION_DENIED'\n        )\n      }\n      throw new AudioError('Failed to play audio', 'UNKNOWN')\n    }\n  }\n\n  async pause(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.element.pause()\n    instance.handle.state = 'paused'\n  }\n\n  async resume(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    try {\n      await instance.element.play()\n      instance.handle.state = 'playing'\n    } catch (error) {\n      throw new AudioError('Failed to resume playback', 'UNKNOWN')\n    }\n  }\n\n  async stop(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.element.pause()\n    instance.element.currentTime = 0\n    instance.element.src = ''\n    instance.listeners.clear()\n    instance.handle.state = 'idle'\n    this.instances.delete(handle.id)\n  }\n\n  // Seek and position\n\n  async getCurrentTime(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 0\n    return instance.element.currentTime\n  }\n\n  async setCurrentTime(handle: IAudioHandle, time: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n    instance.element.currentTime = time\n  }\n\n  async getDuration(handle: IAudioHandle | string): Promise<number> {\n    if (typeof handle === 'string') {\n      // Get duration from URL (need to load metadata)\n      const metadata = await this.getMetadata(handle)\n      return metadata.duration\n    }\n\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 0\n\n    const duration = instance.element.duration\n    return isNaN(duration) ? 0 : duration\n  }\n\n  // Volume control\n\n  async getVolume(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 0\n    return instance.element.volume\n  }\n\n  async setVolume(handle: IAudioHandle, volume: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    const clampedVolume = Math.max(0, Math.min(1, volume))\n    instance.element.volume = clampedVolume\n    instance.previousVolume = clampedVolume\n    instance.isMuted = false\n  }\n\n  async mute(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    if (!instance.isMuted) {\n      instance.previousVolume = instance.element.volume\n      instance.element.volume = 0\n      instance.isMuted = true\n    }\n  }\n\n  async unmute(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    if (instance.isMuted) {\n      instance.element.volume = instance.previousVolume\n      instance.isMuted = false\n    }\n  }\n\n  // Playback rate\n\n  async getPlaybackRate(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 1.0\n    return instance.element.playbackRate\n  }\n\n  async setPlaybackRate(handle: IAudioHandle, rate: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    // Clamp to reasonable range\n    const clampedRate = Math.max(0.25, Math.min(4, rate))\n    instance.element.playbackRate = clampedRate\n  }\n\n  // Metadata\n\n  async getMetadata(url: string): Promise<AudioMetadata> {\n    return new Promise((resolve, reject) => {\n      const audio = new Audio()\n      audio.preload = 'metadata'\n      audio.src = url\n\n      const cleanup = () => {\n        audio.removeEventListener('loadedmetadata', onLoaded)\n        audio.removeEventListener('error', onError)\n      }\n\n      const onLoaded = () => {\n        cleanup()\n        resolve({\n          duration: audio.duration,\n        })\n      }\n\n      const onError = () => {\n        cleanup()\n        reject(new AudioError('Failed to load audio metadata', 'NETWORK_ERROR'))\n      }\n\n      audio.addEventListener('loadedmetadata', onLoaded)\n      audio.addEventListener('error', onError)\n    })\n  }\n\n  // Preloading\n\n  async preload(url: string): Promise<void> {\n    if (this.preloadedAudio.has(url)) return\n\n    return new Promise((resolve, reject) => {\n      const audio = new Audio()\n      audio.preload = 'auto'\n      audio.src = url\n\n      const cleanup = () => {\n        audio.removeEventListener('canplaythrough', onCanPlay)\n        audio.removeEventListener('error', onError)\n      }\n\n      const onCanPlay = () => {\n        cleanup()\n        this.preloadedAudio.set(url, audio)\n        resolve()\n      }\n\n      const onError = () => {\n        cleanup()\n        reject(new AudioError('Failed to preload audio', 'NETWORK_ERROR'))\n      }\n\n      audio.addEventListener('canplaythrough', onCanPlay)\n      audio.addEventListener('error', onError)\n    })\n  }\n\n  async cancelPreload(url: string): Promise<void> {\n    const audio = this.preloadedAudio.get(url)\n    if (audio) {\n      audio.src = ''\n      this.preloadedAudio.delete(url)\n    }\n  }\n\n  // Events\n\n  onPlaybackChange(handle: IAudioHandle, callback: AudioEventCallback): () => void {\n    const instance = this.instances.get(handle.id)\n    if (!instance) {\n      return () => {}\n    }\n\n    instance.listeners.add(callback)\n    return () => {\n      instance.listeners.delete(callback)\n    }\n  }\n\n  // Cleanup\n\n  async dispose(): Promise<void> {\n    // Stop all active playback\n    for (const [, instance] of this.instances) {\n      instance.element.pause()\n      instance.element.src = ''\n      instance.listeners.clear()\n    }\n    this.instances.clear()\n\n    // Clear preloaded audio\n    for (const [, audio] of this.preloadedAudio) {\n      audio.src = ''\n    }\n    this.preloadedAudio.clear()\n  }\n}\n\n/**\n * Create a web audio adapter\n * @param config - Adapter configuration\n */\nexport function createWebAudio(config?: AudioAdapterConfig): IAudioAdapter {\n  return new WebAudioAdapter(config)\n}\n","/**\n * Platform adapter interface\n * Platform-agnostic abstraction for platform-specific features\n * like file system, clipboard, notifications, and window management\n */\n\n/**\n * Platform types\n */\nexport type Platform = 'web' | 'electron' | 'server' | 'mobile' | 'unknown'\n\n/**\n * Platform information\n */\nexport interface PlatformInfo {\n  /** Platform type */\n  platform: Platform\n  /** Platform version (e.g., browser version, OS version) */\n  version: string\n  /** User agent string (if available) */\n  userAgent?: string\n  /** Operating system */\n  os?: 'windows' | 'macos' | 'linux' | 'ios' | 'android' | 'unknown'\n  /** Device type */\n  deviceType?: 'desktop' | 'tablet' | 'mobile' | 'unknown'\n  /** Is touch device */\n  isTouch?: boolean\n  /** Is in standalone mode (PWA) */\n  isStandalone?: boolean\n}\n\n/**\n * File picker options\n */\nexport interface FilePickerOptions {\n  /** Accepted file types (MIME types or extensions) */\n  accept?: string[]\n  /** Allow multiple file selection */\n  multiple?: boolean\n  /** Starting directory (if supported) */\n  startIn?: string\n}\n\n/**\n * Selected file information\n */\nexport interface SelectedFile {\n  /** File name */\n  name: string\n  /** File size in bytes */\n  size: number\n  /** MIME type */\n  type: string\n  /** File path (if available, e.g., in Electron) */\n  path?: string\n  /** Read file contents as text */\n  text(): Promise<string>\n  /** Read file contents as ArrayBuffer */\n  arrayBuffer(): Promise<ArrayBuffer>\n}\n\n/**\n * Notification options\n */\nexport interface NotificationOptions {\n  /** Notification body text */\n  body?: string\n  /** Icon URL */\n  icon?: string\n  /** Badge URL */\n  badge?: string\n  /** Tag for grouping notifications */\n  tag?: string\n  /** Auto-close after milliseconds */\n  timeout?: number\n  /** Require user interaction to dismiss */\n  requireInteraction?: boolean\n  /** Additional data */\n  data?: unknown\n}\n\n/**\n * Notification click event\n */\nexport interface NotificationClickEvent {\n  /** Notification tag */\n  tag?: string\n  /** Additional data */\n  data?: unknown\n}\n\n/**\n * Platform capabilities\n */\nexport interface PlatformCapabilities {\n  /** Can access file system */\n  fileSystem: boolean\n  /** Can show notifications */\n  notifications: boolean\n  /** Can access clipboard */\n  clipboard: boolean\n  /** Can share content */\n  share: boolean\n  /** Can use native file picker */\n  filePicker: boolean\n  /** Has window management */\n  windowManagement: boolean\n  /** Supports deep linking */\n  deepLinking: boolean\n  /** Has persistent storage */\n  persistentStorage: boolean\n}\n\n/**\n * Platform adapter interface\n */\nexport interface IPlatformAdapter {\n  // Platform detection\n  /**\n   * Get current platform type\n   */\n  getPlatform(): Platform\n\n  /**\n   * Get detailed platform information\n   */\n  getPlatformInfo(): PlatformInfo\n\n  /**\n   * Get platform version\n   */\n  getVersion(): string\n\n  /**\n   * Get platform capabilities\n   */\n  getCapabilities(): PlatformCapabilities\n\n  // File system operations (if available)\n  /**\n   * Read file contents\n   * @param path - File path\n   * @returns File contents as Uint8Array\n   */\n  readFile?(path: string): Promise<Uint8Array>\n\n  /**\n   * Read file as text\n   * @param path - File path\n   * @returns File contents as string\n   */\n  readTextFile?(path: string): Promise<string>\n\n  /**\n   * Write file contents\n   * @param path - File path\n   * @param data - Data to write\n   */\n  writeFile?(path: string, data: Uint8Array): Promise<void>\n\n  /**\n   * Write text file\n   * @param path - File path\n   * @param text - Text to write\n   */\n  writeTextFile?(path: string, text: string): Promise<void>\n\n  /**\n   * Check if file exists\n   * @param path - File path\n   */\n  fileExists?(path: string): Promise<boolean>\n\n  /**\n   * Delete file\n   * @param path - File path\n   */\n  deleteFile?(path: string): Promise<void>\n\n  // File picker\n  /**\n   * Show file picker dialog\n   * @param options - Picker options\n   * @returns Selected file or null\n   */\n  selectFile?(options?: FilePickerOptions): Promise<SelectedFile | null>\n\n  /**\n   * Show multiple file picker dialog\n   * @param options - Picker options\n   * @returns Selected files\n   */\n  selectFiles?(options?: FilePickerOptions): Promise<SelectedFile[]>\n\n  /**\n   * Show folder picker dialog\n   * @returns Selected folder path or null\n   */\n  selectFolder?(): Promise<string | null>\n\n  // Clipboard\n  /**\n   * Copy text to clipboard\n   * @param text - Text to copy\n   */\n  copyToClipboard(text: string): Promise<void>\n\n  /**\n   * Read text from clipboard\n   * @returns Clipboard text or null\n   */\n  readFromClipboard(): Promise<string | null>\n\n  // Share\n  /**\n   * Share content using native share dialog\n   * @param data - Share data\n   */\n  share?(data: { title?: string; text?: string; url?: string }): Promise<void>\n\n  /**\n   * Check if sharing is supported\n   */\n  canShare?(): boolean\n\n  // Notifications\n  /**\n   * Request notification permission\n   */\n  requestNotificationPermission?(): Promise<'granted' | 'denied' | 'default'>\n\n  /**\n   * Show a notification\n   * @param title - Notification title\n   * @param options - Notification options\n   */\n  showNotification?(title: string, options?: NotificationOptions): Promise<void>\n\n  /**\n   * Subscribe to notification clicks\n   * @param callback - Click handler\n   * @returns Cleanup function\n   */\n  onNotificationClick?(callback: (event: NotificationClickEvent) => void): () => void\n\n  // Window management (desktop apps)\n  /**\n   * Set window title\n   * @param title - Window title\n   */\n  setWindowTitle?(title: string): Promise<void>\n\n  /**\n   * Minimize window\n   */\n  minimizeWindow?(): Promise<void>\n\n  /**\n   * Maximize window\n   */\n  maximizeWindow?(): Promise<void>\n\n  /**\n   * Restore window from minimized/maximized state\n   */\n  restoreWindow?(): Promise<void>\n\n  /**\n   * Close window\n   */\n  closeWindow?(): Promise<void>\n\n  /**\n   * Toggle fullscreen mode\n   */\n  toggleFullscreen?(): Promise<void>\n\n  /**\n   * Check if window is maximized\n   */\n  isMaximized?(): Promise<boolean>\n\n  /**\n   * Check if window is fullscreen\n   */\n  isFullscreen?(): Promise<boolean>\n\n  // Deep linking\n  /**\n   * Register deep link handler\n   * @param callback - Called when app is opened via deep link\n   * @returns Cleanup function\n   */\n  registerDeepLinkHandler?(callback: (url: string) => void): () => void\n\n  // Storage\n  /**\n   * Get app data directory path (desktop apps)\n   */\n  getAppDataPath?(): string\n\n  /**\n   * Get user documents directory path\n   */\n  getUserDocumentsPath?(): string\n\n  // System\n  /**\n   * Open URL in default browser\n   * @param url - URL to open\n   */\n  openExternalUrl?(url: string): Promise<void>\n\n  /**\n   * Get locale/language preference\n   */\n  getLocale(): string\n\n  /**\n   * Get preferred color scheme\n   */\n  getColorScheme(): 'light' | 'dark' | 'system'\n\n  /**\n   * Subscribe to color scheme changes\n   * @param callback - Called when color scheme changes\n   * @returns Cleanup function\n   */\n  onColorSchemeChange?(callback: (scheme: 'light' | 'dark') => void): () => void\n}\n\n/**\n * Platform error codes\n */\nexport type PlatformErrorCode =\n  | 'NOT_SUPPORTED'\n  | 'PERMISSION_DENIED'\n  | 'NOT_FOUND'\n  | 'INVALID_PATH'\n  | 'UNKNOWN'\n\n/**\n * Platform error class\n */\nexport class PlatformError extends Error {\n  constructor(\n    message: string,\n    public readonly code: PlatformErrorCode\n  ) {\n    super(message)\n    this.name = 'PlatformError'\n  }\n}\n","/**\n * Web Platform adapter\n * Browser-specific platform features\n */\n\nimport type {\n  IPlatformAdapter,\n  Platform,\n  PlatformInfo,\n  PlatformCapabilities,\n  FilePickerOptions,\n  SelectedFile,\n  NotificationOptions,\n  NotificationClickEvent,\n} from '../interfaces/platform'\nimport { PlatformError } from '../interfaces/platform'\n\n/**\n * Detect operating system from user agent\n */\nfunction detectOS(): PlatformInfo['os'] {\n  const ua = navigator.userAgent.toLowerCase()\n  if (ua.includes('win')) return 'windows'\n  if (ua.includes('mac')) return 'macos'\n  if (ua.includes('linux')) return 'linux'\n  if (ua.includes('iphone') || ua.includes('ipad')) return 'ios'\n  if (ua.includes('android')) return 'android'\n  return 'unknown'\n}\n\n/**\n * Detect device type\n */\nfunction detectDeviceType(): PlatformInfo['deviceType'] {\n  const ua = navigator.userAgent.toLowerCase()\n  if (ua.includes('mobile')) return 'mobile'\n  if (ua.includes('tablet') || ua.includes('ipad')) return 'tablet'\n  return 'desktop'\n}\n\n/**\n * Wrap a File object to match SelectedFile interface\n */\nfunction wrapFile(file: File): SelectedFile {\n  return {\n    name: file.name,\n    size: file.size,\n    type: file.type,\n    text: () => file.text(),\n    arrayBuffer: () => file.arrayBuffer(),\n  }\n}\n\n/**\n * Web platform adapter for browser environments\n */\nexport class WebPlatformAdapter implements IPlatformAdapter {\n  private colorSchemeMediaQuery: MediaQueryList | null = null\n  private colorSchemeListeners: Set<(scheme: 'light' | 'dark') => void> = new Set()\n  private notificationClickListeners: Set<(event: NotificationClickEvent) => void> = new Set()\n\n  constructor() {\n    if (typeof window !== 'undefined' && window.matchMedia) {\n      this.colorSchemeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n    }\n  }\n\n  // Platform detection\n\n  getPlatform(): Platform {\n    return 'web'\n  }\n\n  getPlatformInfo(): PlatformInfo {\n    const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0\n\n    // Check for PWA/standalone mode\n    const isStandalone =\n      window.matchMedia('(display-mode: standalone)').matches ||\n      (navigator as { standalone?: boolean }).standalone === true\n\n    return {\n      platform: 'web',\n      version: navigator.userAgent,\n      userAgent: navigator.userAgent,\n      os: detectOS(),\n      deviceType: detectDeviceType(),\n      isTouch,\n      isStandalone,\n    }\n  }\n\n  getVersion(): string {\n    return navigator.userAgent\n  }\n\n  getCapabilities(): PlatformCapabilities {\n    return {\n      fileSystem: false, // Web doesn't have direct file system access\n      notifications: 'Notification' in window,\n      clipboard: 'clipboard' in navigator,\n      share: 'share' in navigator,\n      filePicker: 'showOpenFilePicker' in window || true, // Fallback with input element\n      windowManagement: false, // Web can't manage windows\n      deepLinking: true, // URLs work as deep links\n      persistentStorage: 'storage' in navigator && 'persist' in navigator.storage,\n    }\n  }\n\n  // Clipboard\n\n  async copyToClipboard(text: string): Promise<void> {\n    // Try modern Clipboard API first\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      try {\n        await navigator.clipboard.writeText(text)\n        return\n      } catch {\n        // Fall through to fallback\n      }\n    }\n\n    // Fallback using textarea\n    this.copyTextLegacy(text)\n  }\n\n  private copyTextLegacy(text: string): void {\n    const textArea = document.createElement('textarea')\n\n    textArea.style.position = 'fixed'\n    textArea.style.top = '0'\n    textArea.style.left = '0'\n    textArea.style.width = '2em'\n    textArea.style.height = '2em'\n    textArea.style.padding = '0'\n    textArea.style.border = 'none'\n    textArea.style.outline = 'none'\n    textArea.style.boxShadow = 'none'\n    textArea.style.background = 'transparent'\n    textArea.value = text\n\n    document.body.appendChild(textArea)\n    textArea.focus()\n    textArea.select()\n    document.execCommand('copy')\n    document.body.removeChild(textArea)\n  }\n\n  async readFromClipboard(): Promise<string | null> {\n    if (navigator.clipboard && navigator.clipboard.readText) {\n      try {\n        return await navigator.clipboard.readText()\n      } catch {\n        return null\n      }\n    }\n    return null\n  }\n\n  // File picker\n\n  async selectFile(options?: FilePickerOptions): Promise<SelectedFile | null> {\n    const files = await this.selectFilesInternal(options, false)\n    return files.length > 0 ? files[0] : null\n  }\n\n  async selectFiles(options?: FilePickerOptions): Promise<SelectedFile[]> {\n    return this.selectFilesInternal(options, true)\n  }\n\n  private async selectFilesInternal(\n    options?: FilePickerOptions,\n    multiple: boolean = false\n  ): Promise<SelectedFile[]> {\n    return new Promise((resolve) => {\n      const input = document.createElement('input')\n      input.type = 'file'\n      input.multiple = multiple || (options?.multiple ?? false)\n\n      if (options?.accept) {\n        input.accept = options.accept.join(',')\n      }\n\n      input.onchange = () => {\n        const files = Array.from(input.files ?? []).map(wrapFile)\n        resolve(files)\n      }\n\n      // Handle cancel\n      input.oncancel = () => resolve([])\n\n      input.click()\n    })\n  }\n\n  async selectFolder(): Promise<string | null> {\n    // Web doesn't support folder selection in a way that returns a path\n    throw new PlatformError(\n      'Folder selection is not supported in web browsers',\n      'NOT_SUPPORTED'\n    )\n  }\n\n  // Share\n\n  canShare(): boolean {\n    return 'share' in navigator\n  }\n\n  async share(data: { title?: string; text?: string; url?: string }): Promise<void> {\n    if (!navigator.share) {\n      throw new PlatformError('Web Share API not supported', 'NOT_SUPPORTED')\n    }\n\n    try {\n      await navigator.share(data)\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        // User cancelled - not an error\n        return\n      }\n      throw new PlatformError('Share failed', 'UNKNOWN')\n    }\n  }\n\n  // Notifications\n\n  async requestNotificationPermission(): Promise<'granted' | 'denied' | 'default'> {\n    if (!('Notification' in window)) {\n      throw new PlatformError('Notifications not supported', 'NOT_SUPPORTED')\n    }\n\n    const result = await Notification.requestPermission()\n    return result\n  }\n\n  async showNotification(title: string, options?: NotificationOptions): Promise<void> {\n    if (!('Notification' in window)) {\n      throw new PlatformError('Notifications not supported', 'NOT_SUPPORTED')\n    }\n\n    if (Notification.permission !== 'granted') {\n      throw new PlatformError('Notification permission denied', 'PERMISSION_DENIED')\n    }\n\n    const notification = new Notification(title, {\n      body: options?.body,\n      icon: options?.icon,\n      badge: options?.badge,\n      tag: options?.tag,\n      requireInteraction: options?.requireInteraction,\n      data: options?.data,\n    })\n\n    notification.onclick = () => {\n      const event: NotificationClickEvent = {\n        tag: options?.tag,\n        data: options?.data,\n      }\n      this.notificationClickListeners.forEach((callback) => callback(event))\n    }\n\n    if (options?.timeout) {\n      setTimeout(() => notification.close(), options.timeout)\n    }\n  }\n\n  onNotificationClick(callback: (event: NotificationClickEvent) => void): () => void {\n    this.notificationClickListeners.add(callback)\n    return () => {\n      this.notificationClickListeners.delete(callback)\n    }\n  }\n\n  // Window management (limited in web)\n\n  async setWindowTitle(title: string): Promise<void> {\n    document.title = title\n  }\n\n  async toggleFullscreen(): Promise<void> {\n    if (!document.fullscreenElement) {\n      await document.documentElement.requestFullscreen()\n    } else {\n      await document.exitFullscreen()\n    }\n  }\n\n  async isFullscreen(): Promise<boolean> {\n    return document.fullscreenElement !== null\n  }\n\n  // System\n\n  async openExternalUrl(url: string): Promise<void> {\n    window.open(url, '_blank', 'noopener,noreferrer')\n  }\n\n  getLocale(): string {\n    return navigator.language || 'en-US'\n  }\n\n  getColorScheme(): 'light' | 'dark' | 'system' {\n    if (!this.colorSchemeMediaQuery) return 'system'\n    return this.colorSchemeMediaQuery.matches ? 'dark' : 'light'\n  }\n\n  onColorSchemeChange(callback: (scheme: 'light' | 'dark') => void): () => void {\n    if (!this.colorSchemeMediaQuery) {\n      return () => {}\n    }\n\n    const handler = (e: MediaQueryListEvent) => {\n      callback(e.matches ? 'dark' : 'light')\n    }\n\n    this.colorSchemeMediaQuery.addEventListener('change', handler)\n    this.colorSchemeListeners.add(callback)\n\n    return () => {\n      this.colorSchemeMediaQuery?.removeEventListener('change', handler)\n      this.colorSchemeListeners.delete(callback)\n    }\n  }\n\n  // Deep linking (handled by URL/router in web)\n  registerDeepLinkHandler(callback: (url: string) => void): () => void {\n    const handler = () => {\n      callback(window.location.href)\n    }\n\n    window.addEventListener('popstate', handler)\n\n    return () => {\n      window.removeEventListener('popstate', handler)\n    }\n  }\n}\n\n/**\n * Create a web platform adapter\n */\nexport function createWebPlatform(): IPlatformAdapter {\n  return new WebPlatformAdapter()\n}\n","/**\n * In-memory storage adapter\n * Implements full IStorageAdapter for testing and SSR\n */\n\nimport type {\n  IStorageAdapter,\n  StorageAdapterConfig,\n  StorageChangeEvent,\n} from '../interfaces/storage'\n\ninterface CollectionStore {\n  [id: string]: unknown\n}\n\n/**\n * In-memory implementation of IStorageAdapter\n * Useful for testing and server-side rendering\n */\nexport class MemoryStorageAdapter implements IStorageAdapter {\n  private storage: Map<string, unknown> = new Map()\n  private collections: Map<string, CollectionStore> = new Map()\n  private listeners: Set<(event: StorageChangeEvent) => void> = new Set()\n  private prefix: string\n\n  constructor(config: StorageAdapterConfig = {}) {\n    this.prefix = config.prefix ?? ''\n  }\n\n  private getKey(key: string): string {\n    return this.prefix ? `${this.prefix}.${key}` : key\n  }\n\n  private getCollectionKey(collection: string): string {\n    return this.prefix ? `${this.prefix}.${collection}` : collection\n  }\n\n  private notifyChange<T>(key: string, oldValue: T | null, newValue: T | null): void {\n    const event: StorageChangeEvent<T> = { key, oldValue, newValue }\n    this.listeners.forEach((listener) => listener(event))\n  }\n\n  // Key-value operations\n\n  async get<T>(key: string): Promise<T | null> {\n    const value = this.storage.get(this.getKey(key))\n    return (value as T) ?? null\n  }\n\n  async set<T>(key: string, value: T): Promise<void> {\n    const fullKey = this.getKey(key)\n    const oldValue = (this.storage.get(fullKey) as T) ?? null\n    this.storage.set(fullKey, value)\n    this.notifyChange(key, oldValue, value)\n  }\n\n  async delete(key: string): Promise<void> {\n    const fullKey = this.getKey(key)\n    const oldValue = this.storage.get(fullKey) ?? null\n    this.storage.delete(fullKey)\n    this.notifyChange(key, oldValue, null)\n  }\n\n  async clear(): Promise<void> {\n    if (this.prefix) {\n      for (const key of this.storage.keys()) {\n        if (key.startsWith(this.prefix)) {\n          this.storage.delete(key)\n        }\n      }\n      for (const key of this.collections.keys()) {\n        if (key.startsWith(this.prefix)) {\n          this.collections.delete(key)\n        }\n      }\n    } else {\n      this.storage.clear()\n      this.collections.clear()\n    }\n  }\n\n  async keys(): Promise<string[]> {\n    const keys: string[] = []\n    for (const key of this.storage.keys()) {\n      if (this.prefix) {\n        if (key.startsWith(this.prefix)) {\n          keys.push(key.substring(this.prefix.length + 1))\n        }\n      } else {\n        keys.push(key)\n      }\n    }\n    return keys\n  }\n\n  // Structured storage operations\n\n  async getStructured<T>(collection: string, id: string): Promise<T | null> {\n    const collKey = this.getCollectionKey(collection)\n    const coll = this.collections.get(collKey)\n    if (!coll) return null\n    return (coll[id] as T) ?? null\n  }\n\n  async setStructured<T>(collection: string, id: string, value: T): Promise<void> {\n    const collKey = this.getCollectionKey(collection)\n    let coll = this.collections.get(collKey)\n    if (!coll) {\n      coll = {}\n      this.collections.set(collKey, coll)\n    }\n    coll[id] = value\n  }\n\n  async deleteStructured(collection: string, id?: string): Promise<void> {\n    const collKey = this.getCollectionKey(collection)\n    if (id !== undefined) {\n      const coll = this.collections.get(collKey)\n      if (coll) {\n        delete coll[id]\n      }\n    } else {\n      this.collections.delete(collKey)\n    }\n  }\n\n  async listStructured(collection: string): Promise<string[]> {\n    const collKey = this.getCollectionKey(collection)\n    const coll = this.collections.get(collKey)\n    if (!coll) return []\n    return Object.keys(coll)\n  }\n\n  // Batch operations\n\n  async getBatch<T>(keys: string[]): Promise<Record<string, T | null>> {\n    const result: Record<string, T | null> = {}\n    for (const key of keys) {\n      result[key] = await this.get<T>(key)\n    }\n    return result\n  }\n\n  async setBatch(data: Record<string, unknown>): Promise<void> {\n    for (const [key, value] of Object.entries(data)) {\n      await this.set(key, value)\n    }\n  }\n\n  // Events\n\n  onChanged<T>(callback: (event: StorageChangeEvent<T>) => void): () => void {\n    this.listeners.add(callback as (event: StorageChangeEvent) => void)\n    return () => {\n      this.listeners.delete(callback as (event: StorageChangeEvent) => void)\n    }\n  }\n\n  // Utility methods\n\n  /**\n   * Get approximate size of stored data in bytes\n   */\n  size(): number {\n    let total = 0\n    for (const [key, value] of this.storage) {\n      total += key.length + JSON.stringify(value).length\n    }\n    for (const [key, coll] of this.collections) {\n      total += key.length + JSON.stringify(coll).length\n    }\n    return total\n  }\n\n  /**\n   * Dump all data for debugging\n   */\n  dump(): { storage: Record<string, unknown>; collections: Record<string, CollectionStore> } {\n    return {\n      storage: Object.fromEntries(this.storage),\n      collections: Object.fromEntries(this.collections),\n    }\n  }\n}\n\n/**\n * Create an in-memory storage adapter\n * @param config - Adapter configuration\n */\nexport function createMemoryStorage(config?: StorageAdapterConfig): IStorageAdapter {\n  return new MemoryStorageAdapter(config)\n}\n","/**\n * Mock network adapter\n * For testing and offline scenarios\n */\n\nimport type {\n  INetworkAdapter,\n  RequestOptions,\n  HttpResponse,\n  DownloadProgress,\n} from '../interfaces/network'\nimport { NetworkError } from '../interfaces/network'\n\n/**\n * Mock response handler\n */\nexport type MockHandler<T = unknown> = (\n  url: string,\n  options?: RequestOptions & { body?: unknown }\n) => Promise<T> | T\n\n/**\n * Route definition\n */\ninterface MockRoute {\n  method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE' | '*'\n  pattern: string | RegExp\n  handler: MockHandler\n  delay?: number\n}\n\n/**\n * Mock network adapter for testing\n */\nexport class MockNetworkAdapter implements INetworkAdapter {\n  private routes: MockRoute[] = []\n  private cache: Map<string, { data: unknown; cachedAt: number; ttl: number }> = new Map()\n  private isOnlineState: boolean = true\n  private connectionListeners: Set<(online: boolean) => void> = new Set()\n  private defaultDelay: number = 0\n\n  constructor(options: { delay?: number } = {}) {\n    this.defaultDelay = options.delay ?? 0\n  }\n\n  /**\n   * Register a mock route\n   */\n  mock<T>(\n    method: MockRoute['method'],\n    pattern: string | RegExp,\n    handler: MockHandler<T>,\n    delay?: number\n  ): this {\n    this.routes.push({\n      method,\n      pattern,\n      handler: handler as MockHandler,\n      delay: delay ?? this.defaultDelay,\n    })\n    return this\n  }\n\n  /**\n   * Shorthand for GET routes\n   */\n  onGet<T>(pattern: string | RegExp, handler: MockHandler<T>, delay?: number): this {\n    return this.mock('GET', pattern, handler, delay)\n  }\n\n  /**\n   * Shorthand for POST routes\n   */\n  onPost<T>(pattern: string | RegExp, handler: MockHandler<T>, delay?: number): this {\n    return this.mock('POST', pattern, handler, delay)\n  }\n\n  /**\n   * Shorthand for any method\n   */\n  onAny<T>(pattern: string | RegExp, handler: MockHandler<T>, delay?: number): this {\n    return this.mock('*', pattern, handler, delay)\n  }\n\n  /**\n   * Clear all mock routes\n   */\n  clearMocks(): void {\n    this.routes = []\n  }\n\n  /**\n   * Set online state\n   */\n  setOnline(online: boolean): void {\n    if (this.isOnlineState !== online) {\n      this.isOnlineState = online\n      this.connectionListeners.forEach((cb) => cb(online))\n    }\n  }\n\n  private matchRoute(method: string, url: string): MockRoute | undefined {\n    return this.routes.find((route) => {\n      if (route.method !== '*' && route.method !== method) return false\n      if (typeof route.pattern === 'string') {\n        return url.includes(route.pattern)\n      }\n      return route.pattern.test(url)\n    })\n  }\n\n  private async executeRequest<T>(\n    method: string,\n    url: string,\n    body?: unknown,\n    options?: RequestOptions\n  ): Promise<HttpResponse<T>> {\n    if (!this.isOnlineState) {\n      throw new NetworkError('No internet connection', 'OFFLINE')\n    }\n\n    const route = this.matchRoute(method, url)\n    if (!route) {\n      throw new NetworkError(`No mock handler for ${method} ${url}`, 'NOT_FOUND', 404)\n    }\n\n    if (route.delay) {\n      await new Promise((resolve) => setTimeout(resolve, route.delay))\n    }\n\n    try {\n      const data = await route.handler(url, { ...options, body })\n      return {\n        data: data as T,\n        status: 200,\n        headers: {},\n        ok: true,\n      }\n    } catch (error) {\n      if (error instanceof NetworkError) throw error\n      throw new NetworkError(\n        error instanceof Error ? error.message : 'Mock handler error',\n        'UNKNOWN'\n      )\n    }\n  }\n\n  // HTTP methods\n\n  async get<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.executeRequest<T>('GET', url, undefined, options)\n  }\n\n  async post<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.executeRequest<T>('POST', url, data, options)\n  }\n\n  async put<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.executeRequest<T>('PUT', url, data, options)\n  }\n\n  async patch<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.executeRequest<T>('PATCH', url, data, options)\n  }\n\n  async delete<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.executeRequest<T>('DELETE', url, undefined, options)\n  }\n\n  // File downloads\n\n  async downloadFile(\n    url: string,\n    onProgress?: (progress: DownloadProgress) => void\n  ): Promise<Blob> {\n    const response = await this.get<ArrayBuffer>(url, { responseType: 'arraybuffer' as never })\n\n    // Simulate progress\n    if (onProgress) {\n      onProgress({ loaded: 0, total: 100, percent: 0 })\n      await new Promise((resolve) => setTimeout(resolve, 10))\n      onProgress({ loaded: 50, total: 100, percent: 50 })\n      await new Promise((resolve) => setTimeout(resolve, 10))\n      onProgress({ loaded: 100, total: 100, percent: 100 })\n    }\n\n    return new Blob([response.data])\n  }\n\n  async downloadJson<T>(\n    url: string,\n    onProgress?: (progress: DownloadProgress) => void\n  ): Promise<T> {\n    if (onProgress) {\n      onProgress({ loaded: 0, total: 100, percent: 0 })\n    }\n\n    const response = await this.get<T>(url)\n\n    if (onProgress) {\n      onProgress({ loaded: 100, total: 100, percent: 100 })\n    }\n\n    return response.data\n  }\n\n  // Caching\n\n  async getCached<T>(url: string, maxAge?: number): Promise<T | null> {\n    const cached = this.cache.get(url)\n    if (!cached) return null\n\n    const age = Date.now() - cached.cachedAt\n    const effectiveMaxAge = maxAge ?? cached.ttl\n\n    if (age > effectiveMaxAge) {\n      this.cache.delete(url)\n      return null\n    }\n\n    return cached.data as T\n  }\n\n  async setCached<T>(url: string, data: T, ttl: number = 3600000): Promise<void> {\n    this.cache.set(url, {\n      data,\n      cachedAt: Date.now(),\n      ttl,\n    })\n  }\n\n  async invalidateCache(url: string): Promise<void> {\n    this.cache.delete(url)\n  }\n\n  async clearCache(): Promise<void> {\n    this.cache.clear()\n  }\n\n  // Connection status\n\n  async isOnline(): Promise<boolean> {\n    return this.isOnlineState\n  }\n\n  onConnectionChange(callback: (online: boolean) => void): () => void {\n    this.connectionListeners.add(callback)\n    return () => {\n      this.connectionListeners.delete(callback)\n    }\n  }\n}\n\n/**\n * Create a mock network adapter\n */\nexport function createMockNetwork(options?: { delay?: number }): MockNetworkAdapter {\n  return new MockNetworkAdapter(options)\n}\n","/**\n * Mock audio adapter\n * For testing audio functionality\n */\n\nimport type {\n  IAudioAdapter,\n  IAudioHandle,\n  AudioOptions,\n  AudioEvent,\n  AudioEventCallback,\n  AudioMetadata,\n  AudioAdapterConfig,\n} from '../interfaces/audio'\n\nlet handleIdCounter = 0\n\ninterface MockAudioInstance {\n  handle: IAudioHandle\n  currentTime: number\n  duration: number\n  volume: number\n  playbackRate: number\n  isMuted: boolean\n  previousVolume: number\n  listeners: Set<AudioEventCallback>\n}\n\n/**\n * Mock audio adapter for testing\n */\nexport class MockAudioAdapter implements IAudioAdapter {\n  private instances: Map<string, MockAudioInstance> = new Map()\n  private preloadedUrls: Set<string> = new Set()\n  private config: AudioAdapterConfig\n  private mockDurations: Map<string, number> = new Map()\n\n  constructor(config: AudioAdapterConfig = {}) {\n    this.config = {\n      defaultVolume: 1.0,\n      defaultPlaybackRate: 1.0,\n      ...config,\n    }\n  }\n\n  /**\n   * Set mock duration for a URL\n   */\n  setMockDuration(url: string, duration: number): void {\n    this.mockDurations.set(url, duration)\n  }\n\n  private notifyListeners(instance: MockAudioInstance, eventType: AudioEvent['type']): void {\n    const event: AudioEvent = {\n      type: eventType,\n      handle: { ...instance.handle },\n      currentTime: instance.currentTime,\n      duration: instance.duration,\n    }\n\n    instance.listeners.forEach((callback) => callback(event))\n  }\n\n  // Playback control\n\n  async play(url: string, options?: AudioOptions): Promise<IAudioHandle> {\n    const handleId = `mock_audio_${++handleIdCounter}`\n\n    const handle: IAudioHandle = {\n      id: handleId,\n      url,\n      state: 'playing',\n    }\n\n    const instance: MockAudioInstance = {\n      handle,\n      currentTime: options?.startTime ?? 0,\n      duration: this.mockDurations.get(url) ?? 180, // Default 3 minutes\n      volume: options?.volume ?? this.config.defaultVolume ?? 1.0,\n      playbackRate: options?.playbackRate ?? this.config.defaultPlaybackRate ?? 1.0,\n      isMuted: false,\n      previousVolume: options?.volume ?? this.config.defaultVolume ?? 1.0,\n      listeners: new Set(),\n    }\n\n    this.instances.set(handleId, instance)\n\n    // Simulate loaded event\n    setTimeout(() => this.notifyListeners(instance, 'loaded'), 0)\n\n    return handle\n  }\n\n  async pause(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.handle.state = 'paused'\n    this.notifyListeners(instance, 'statechange')\n  }\n\n  async resume(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.handle.state = 'playing'\n    this.notifyListeners(instance, 'statechange')\n  }\n\n  async stop(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.handle.state = 'idle'\n    instance.currentTime = 0\n    this.notifyListeners(instance, 'statechange')\n    this.instances.delete(handle.id)\n  }\n\n  // Seek and position\n\n  async getCurrentTime(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    return instance?.currentTime ?? 0\n  }\n\n  async setCurrentTime(handle: IAudioHandle, time: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.currentTime = Math.max(0, Math.min(time, instance.duration))\n    this.notifyListeners(instance, 'timeupdate')\n  }\n\n  async getDuration(handle: IAudioHandle | string): Promise<number> {\n    if (typeof handle === 'string') {\n      return this.mockDurations.get(handle) ?? 180\n    }\n\n    const instance = this.instances.get(handle.id)\n    return instance?.duration ?? 0\n  }\n\n  // Volume control\n\n  async getVolume(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    return instance?.volume ?? 0\n  }\n\n  async setVolume(handle: IAudioHandle, volume: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.volume = Math.max(0, Math.min(1, volume))\n    instance.previousVolume = instance.volume\n    instance.isMuted = false\n  }\n\n  async mute(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    if (!instance.isMuted) {\n      instance.previousVolume = instance.volume\n      instance.volume = 0\n      instance.isMuted = true\n    }\n  }\n\n  async unmute(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    if (instance.isMuted) {\n      instance.volume = instance.previousVolume\n      instance.isMuted = false\n    }\n  }\n\n  // Playback rate\n\n  async getPlaybackRate(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    return instance?.playbackRate ?? 1.0\n  }\n\n  async setPlaybackRate(handle: IAudioHandle, rate: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.playbackRate = Math.max(0.25, Math.min(4, rate))\n  }\n\n  // Metadata\n\n  async getMetadata(url: string): Promise<AudioMetadata> {\n    return {\n      duration: this.mockDurations.get(url) ?? 180,\n    }\n  }\n\n  // Preloading\n\n  async preload(url: string): Promise<void> {\n    this.preloadedUrls.add(url)\n  }\n\n  async cancelPreload(url: string): Promise<void> {\n    this.preloadedUrls.delete(url)\n  }\n\n  /**\n   * Check if a URL was preloaded (for testing)\n   */\n  isPreloaded(url: string): boolean {\n    return this.preloadedUrls.has(url)\n  }\n\n  // Events\n\n  onPlaybackChange(handle: IAudioHandle, callback: AudioEventCallback): () => void {\n    const instance = this.instances.get(handle.id)\n    if (!instance) {\n      return () => {}\n    }\n\n    instance.listeners.add(callback)\n    return () => {\n      instance.listeners.delete(callback)\n    }\n  }\n\n  // Cleanup\n\n  async dispose(): Promise<void> {\n    this.instances.clear()\n    this.preloadedUrls.clear()\n  }\n\n  /**\n   * Get all active instances (for testing)\n   */\n  getActiveInstances(): IAudioHandle[] {\n    return Array.from(this.instances.values()).map((i) => i.handle)\n  }\n\n  /**\n   * Simulate end of playback (for testing)\n   */\n  simulateEnd(handle: IAudioHandle): void {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.handle.state = 'ended'\n    instance.currentTime = instance.duration\n    this.notifyListeners(instance, 'ended')\n  }\n\n  /**\n   * Simulate error (for testing)\n   */\n  simulateError(handle: IAudioHandle, message: string): void {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.handle.state = 'error'\n    const event: AudioEvent = {\n      type: 'error',\n      handle: { ...instance.handle },\n      error: message,\n    }\n    instance.listeners.forEach((callback) => callback(event))\n  }\n}\n\n/**\n * Create a mock audio adapter\n */\nexport function createMockAudio(config?: AudioAdapterConfig): MockAudioAdapter {\n  return new MockAudioAdapter(config)\n}\n","/**\n * Mock platform adapter\n * For testing platform functionality\n */\n\nimport type {\n  IPlatformAdapter,\n  Platform,\n  PlatformInfo,\n  PlatformCapabilities,\n  FilePickerOptions,\n  SelectedFile,\n  NotificationOptions,\n  NotificationClickEvent,\n} from '../interfaces/platform'\n\n/**\n * Mock file for testing\n */\nfunction createMockFile(name: string, content: string, type: string = 'text/plain'): SelectedFile {\n  return {\n    name,\n    size: content.length,\n    type,\n    text: async () => content,\n    arrayBuffer: async () => new TextEncoder().encode(content).buffer,\n  }\n}\n\n/**\n * Mock platform adapter for testing\n */\nexport class MockPlatformAdapter implements IPlatformAdapter {\n  private clipboardContent: string = ''\n  private colorScheme: 'light' | 'dark' = 'light'\n  private colorSchemeListeners: Set<(scheme: 'light' | 'dark') => void> = new Set()\n  private notificationClickListeners: Set<(event: NotificationClickEvent) => void> = new Set()\n  private deepLinkListeners: Set<(url: string) => void> = new Set()\n  private windowTitle: string = ''\n  private locale: string = 'en-US'\n  private notifications: Array<{ title: string; options?: NotificationOptions }> = []\n  private mockFiles: SelectedFile[] = []\n\n  // Configure mock behavior\n\n  /**\n   * Set mock files for file picker\n   */\n  setMockFiles(files: Array<{ name: string; content: string; type?: string }>): void {\n    this.mockFiles = files.map((f) => createMockFile(f.name, f.content, f.type))\n  }\n\n  /**\n   * Set mock locale\n   */\n  setMockLocale(locale: string): void {\n    this.locale = locale\n  }\n\n  /**\n   * Set mock color scheme\n   */\n  setMockColorScheme(scheme: 'light' | 'dark'): void {\n    if (this.colorScheme !== scheme) {\n      this.colorScheme = scheme\n      this.colorSchemeListeners.forEach((cb) => cb(scheme))\n    }\n  }\n\n  /**\n   * Simulate deep link\n   */\n  simulateDeepLink(url: string): void {\n    this.deepLinkListeners.forEach((cb) => cb(url))\n  }\n\n  /**\n   * Simulate notification click\n   */\n  simulateNotificationClick(event: NotificationClickEvent): void {\n    this.notificationClickListeners.forEach((cb) => cb(event))\n  }\n\n  /**\n   * Get shown notifications (for testing)\n   */\n  getNotifications(): Array<{ title: string; options?: NotificationOptions }> {\n    return [...this.notifications]\n  }\n\n  /**\n   * Get window title (for testing)\n   */\n  getWindowTitle(): string {\n    return this.windowTitle\n  }\n\n  // Platform detection\n\n  getPlatform(): Platform {\n    return 'web'\n  }\n\n  getPlatformInfo(): PlatformInfo {\n    return {\n      platform: 'web',\n      version: 'mock-1.0.0',\n      userAgent: 'MockPlatformAdapter/1.0',\n      os: 'unknown',\n      deviceType: 'desktop',\n      isTouch: false,\n      isStandalone: false,\n    }\n  }\n\n  getVersion(): string {\n    return 'mock-1.0.0'\n  }\n\n  getCapabilities(): PlatformCapabilities {\n    return {\n      fileSystem: false,\n      notifications: true,\n      clipboard: true,\n      share: true,\n      filePicker: true,\n      windowManagement: true,\n      deepLinking: true,\n      persistentStorage: true,\n    }\n  }\n\n  // Clipboard\n\n  async copyToClipboard(text: string): Promise<void> {\n    this.clipboardContent = text\n  }\n\n  async readFromClipboard(): Promise<string | null> {\n    return this.clipboardContent || null\n  }\n\n  // File picker\n\n  async selectFile(options?: FilePickerOptions): Promise<SelectedFile | null> {\n    const filtered = this.filterFiles(options)\n    return filtered.length > 0 ? filtered[0] : null\n  }\n\n  async selectFiles(options?: FilePickerOptions): Promise<SelectedFile[]> {\n    return this.filterFiles(options)\n  }\n\n  private filterFiles(options?: FilePickerOptions): SelectedFile[] {\n    if (!options?.accept) return this.mockFiles\n\n    return this.mockFiles.filter((file) => {\n      return options.accept!.some((accept) => {\n        if (accept.startsWith('.')) {\n          return file.name.endsWith(accept)\n        }\n        return file.type.includes(accept.replace('/*', ''))\n      })\n    })\n  }\n\n  async selectFolder(): Promise<string | null> {\n    return '/mock/folder/path'\n  }\n\n  // Share\n\n  canShare(): boolean {\n    return true\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async share(_data: { title?: string; text?: string; url?: string }): Promise<void> {\n    // Mock share - just succeed\n  }\n\n  // Notifications\n\n  async requestNotificationPermission(): Promise<'granted' | 'denied' | 'default'> {\n    return 'granted'\n  }\n\n  async showNotification(title: string, options?: NotificationOptions): Promise<void> {\n    this.notifications.push({ title, options })\n  }\n\n  onNotificationClick(callback: (event: NotificationClickEvent) => void): () => void {\n    this.notificationClickListeners.add(callback)\n    return () => {\n      this.notificationClickListeners.delete(callback)\n    }\n  }\n\n  // Window management\n\n  async setWindowTitle(title: string): Promise<void> {\n    this.windowTitle = title\n  }\n\n  async minimizeWindow(): Promise<void> {\n    // Mock minimize\n  }\n\n  async maximizeWindow(): Promise<void> {\n    // Mock maximize\n  }\n\n  async restoreWindow(): Promise<void> {\n    // Mock restore\n  }\n\n  async closeWindow(): Promise<void> {\n    // Mock close\n  }\n\n  async toggleFullscreen(): Promise<void> {\n    // Mock fullscreen toggle\n  }\n\n  async isMaximized(): Promise<boolean> {\n    return false\n  }\n\n  async isFullscreen(): Promise<boolean> {\n    return false\n  }\n\n  // Deep linking\n\n  registerDeepLinkHandler(callback: (url: string) => void): () => void {\n    this.deepLinkListeners.add(callback)\n    return () => {\n      this.deepLinkListeners.delete(callback)\n    }\n  }\n\n  // System\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async openExternalUrl(_url: string): Promise<void> {\n    // Mock open external\n  }\n\n  getLocale(): string {\n    return this.locale\n  }\n\n  getColorScheme(): 'light' | 'dark' | 'system' {\n    return this.colorScheme\n  }\n\n  onColorSchemeChange(callback: (scheme: 'light' | 'dark') => void): () => void {\n    this.colorSchemeListeners.add(callback)\n    return () => {\n      this.colorSchemeListeners.delete(callback)\n    }\n  }\n\n  /**\n   * Reset mock state\n   */\n  reset(): void {\n    this.clipboardContent = ''\n    this.colorScheme = 'light'\n    this.windowTitle = ''\n    this.notifications = []\n    this.mockFiles = []\n  }\n}\n\n/**\n * Create a mock platform adapter\n */\nexport function createMockPlatform(): MockPlatformAdapter {\n  return new MockPlatformAdapter()\n}\n","/**\n * Adapter factory\n * Creates platform-specific adapters based on configuration\n */\n\nimport type { IStorageAdapter } from '../interfaces/storage'\nimport type { INetworkAdapter } from '../interfaces/network'\nimport type { IAudioAdapter } from '../interfaces/audio'\nimport type { IPlatformAdapter } from '../interfaces/platform'\n\nimport type {\n  AdapterConfig,\n  StorageConfig,\n  NetworkConfig,\n  AudioConfig,\n  PlatformConfig,\n} from './config'\nimport { defaultWebConfig, mergeConfig } from './config'\n\n// Web adapters\nimport { LocalStorageAdapter } from '../web/local-storage-adapter'\nimport { IndexedDBAdapter } from '../web/indexed-db-adapter'\nimport { WebNetworkAdapter } from '../web/web-network-adapter'\nimport { WebAudioAdapter } from '../web/web-audio-adapter'\nimport { WebPlatformAdapter } from '../web/web-platform-adapter'\n\n// Memory/mock adapters\nimport { MemoryStorageAdapter } from '../memory/memory-storage-adapter'\nimport { MockNetworkAdapter } from '../memory/mock-network-adapter'\nimport { MockAudioAdapter } from '../memory/mock-audio-adapter'\nimport { MockPlatformAdapter } from '../memory/mock-platform-adapter'\n\n/**\n * Adapter suite containing all adapters\n */\nexport interface AdapterSuite {\n  storage: IStorageAdapter\n  network: INetworkAdapter\n  audio: IAudioAdapter\n  platform: IPlatformAdapter\n}\n\n/**\n * Hybrid storage adapter that uses different adapters for small and large data\n */\nclass HybridStorageAdapter implements IStorageAdapter {\n  constructor(\n    private small: IStorageAdapter,\n    private large: IStorageAdapter\n  ) {}\n\n  // Key-value uses small storage\n  get<T>(key: string) {\n    return this.small.get<T>(key)\n  }\n  set<T>(key: string, value: T) {\n    return this.small.set(key, value)\n  }\n  delete(key: string) {\n    return this.small.delete(key)\n  }\n  async clear() {\n    await this.small.clear()\n    await this.large.clear()\n  }\n  keys() {\n    return this.small.keys()\n  }\n\n  // Structured storage uses large storage\n  getStructured<T>(collection: string, id: string) {\n    return this.large.getStructured<T>(collection, id)\n  }\n  setStructured<T>(collection: string, id: string, value: T) {\n    return this.large.setStructured(collection, id, value)\n  }\n  deleteStructured(collection: string, id?: string) {\n    return this.large.deleteStructured(collection, id)\n  }\n  listStructured(collection: string) {\n    return this.large.listStructured(collection)\n  }\n\n  // Batch uses small storage\n  getBatch<T>(keys: string[]) {\n    return this.small.getBatch<T>(keys)\n  }\n  setBatch(data: Record<string, unknown>) {\n    return this.small.setBatch(data)\n  }\n\n  // Events from both\n  onChanged<T>(callback: (event: { key: string; oldValue: T | null; newValue: T | null }) => void) {\n    const unsub1 = this.small.onChanged(callback)\n    const unsub2 = this.large.onChanged(callback)\n    return () => {\n      unsub1()\n      unsub2()\n    }\n  }\n}\n\n/**\n * Async localStorage adapter wrapper\n * Wraps synchronous localStorage for IStorageAdapter compatibility\n */\nclass AsyncLocalStorageAdapter implements IStorageAdapter {\n  private adapter: LocalStorageAdapter\n  private listeners: Set<(event: { key: string; oldValue: unknown; newValue: unknown }) => void> =\n    new Set()\n\n  constructor(prefix?: string) {\n    this.adapter = new LocalStorageAdapter(prefix)\n  }\n\n  async get<T>(key: string): Promise<T | null> {\n    return this.adapter.get<T>(key)\n  }\n\n  async set<T>(key: string, value: T): Promise<void> {\n    const oldValue = this.adapter.get(key)\n    this.adapter.set(key, value)\n    this.notifyChange(key, oldValue, value)\n  }\n\n  async delete(key: string): Promise<void> {\n    const oldValue = this.adapter.get(key)\n    this.adapter.remove(key)\n    this.notifyChange(key, oldValue, null)\n  }\n\n  async clear(): Promise<void> {\n    this.adapter.clear()\n  }\n\n  async keys(): Promise<string[]> {\n    return this.adapter.keys()\n  }\n\n  // Structured storage - simulate with prefixed keys\n  async getStructured<T>(collection: string, id: string): Promise<T | null> {\n    return this.adapter.get<T>(`_coll_${collection}_${id}`)\n  }\n\n  async setStructured<T>(collection: string, id: string, value: T): Promise<void> {\n    this.adapter.set(`_coll_${collection}_${id}`, value)\n  }\n\n  async deleteStructured(collection: string, id?: string): Promise<void> {\n    if (id !== undefined) {\n      this.adapter.remove(`_coll_${collection}_${id}`)\n    } else {\n      const prefix = `_coll_${collection}_`\n      const keys = this.adapter.keys().filter((k) => k.startsWith(prefix))\n      keys.forEach((k) => this.adapter.remove(k))\n    }\n  }\n\n  async listStructured(collection: string): Promise<string[]> {\n    const prefix = `_coll_${collection}_`\n    return this.adapter\n      .keys()\n      .filter((k) => k.startsWith(prefix))\n      .map((k) => k.substring(prefix.length))\n  }\n\n  async getBatch<T>(keys: string[]): Promise<Record<string, T | null>> {\n    const result: Record<string, T | null> = {}\n    for (const key of keys) {\n      result[key] = this.adapter.get<T>(key)\n    }\n    return result\n  }\n\n  async setBatch(data: Record<string, unknown>): Promise<void> {\n    for (const [key, value] of Object.entries(data)) {\n      this.adapter.set(key, value)\n    }\n  }\n\n  private notifyChange(key: string, oldValue: unknown, newValue: unknown): void {\n    this.listeners.forEach((cb) => cb({ key, oldValue, newValue }))\n  }\n\n  onChanged<T>(callback: (event: { key: string; oldValue: T | null; newValue: T | null }) => void) {\n    this.listeners.add(callback as (event: { key: string; oldValue: unknown; newValue: unknown }) => void)\n    return () => {\n      this.listeners.delete(callback as (event: { key: string; oldValue: unknown; newValue: unknown }) => void)\n    }\n  }\n}\n\n/**\n * Create a storage adapter based on configuration\n */\nexport function createStorageAdapter(config?: StorageConfig): IStorageAdapter {\n  const cfg = config ?? defaultWebConfig.storage!\n\n  switch (cfg.type) {\n    case 'memory':\n      return new MemoryStorageAdapter(cfg)\n\n    case 'localStorage':\n      return new AsyncLocalStorageAdapter(cfg.prefix)\n\n    case 'indexedDB':\n      return new IndexedDBAdapter({\n        prefix: cfg.prefix,\n        dbName: cfg.dbName,\n      })\n\n    case 'hybrid': {\n      const smallConfig = cfg.small ?? { type: 'localStorage' as const }\n      const largeConfig = cfg.large ?? { type: 'indexedDB' as const }\n\n      const smallAdapter =\n        smallConfig.type === 'memory'\n          ? new MemoryStorageAdapter(smallConfig.config)\n          : new AsyncLocalStorageAdapter(smallConfig.config?.prefix)\n\n      const largeAdapter =\n        largeConfig.type === 'memory'\n          ? new MemoryStorageAdapter(largeConfig.config)\n          : new IndexedDBAdapter({\n              prefix: largeConfig.config?.prefix,\n              dbName: largeConfig.config?.dbName,\n            })\n\n      return new HybridStorageAdapter(smallAdapter, largeAdapter)\n    }\n\n    default:\n      return new MemoryStorageAdapter()\n  }\n}\n\n/**\n * Create a network adapter based on configuration\n */\nexport function createNetworkAdapter(config?: NetworkConfig): INetworkAdapter {\n  const cfg = config ?? defaultWebConfig.network!\n\n  switch (cfg.type) {\n    case 'mock':\n      return new MockNetworkAdapter()\n\n    case 'fetch':\n    default:\n      return new WebNetworkAdapter({\n        baseUrl: cfg.baseUrl,\n        timeout: cfg.timeout,\n        headers: cfg.headers,\n        debug: cfg.debug,\n        retry: cfg.retry,\n      })\n  }\n}\n\n/**\n * Create an audio adapter based on configuration\n */\nexport function createAudioAdapter(config?: AudioConfig): IAudioAdapter {\n  const cfg = config ?? defaultWebConfig.audio!\n\n  switch (cfg.type) {\n    case 'mock':\n      return new MockAudioAdapter(cfg)\n\n    case 'webAudio':\n    default:\n      return new WebAudioAdapter(cfg)\n  }\n}\n\n/**\n * Create a platform adapter based on configuration\n */\nexport function createPlatformAdapter(config?: PlatformConfig): IPlatformAdapter {\n  const cfg = config ?? defaultWebConfig.platform!\n\n  switch (cfg.type) {\n    case 'mock':\n      return new MockPlatformAdapter()\n\n    case 'web':\n    default:\n      return new WebPlatformAdapter()\n  }\n}\n\n/**\n * Create a complete adapter suite based on configuration\n */\nexport function createAdapterSuite(config?: Partial<AdapterConfig>): AdapterSuite {\n  const mergedConfig = mergeConfig(config ?? {})\n\n  return {\n    storage: createStorageAdapter(mergedConfig.storage),\n    network: createNetworkAdapter(mergedConfig.network),\n    audio: createAudioAdapter(mergedConfig.audio),\n    platform: createPlatformAdapter(mergedConfig.platform),\n  }\n}\n\n/**\n * Adapter factory class for more complex scenarios\n */\nexport class AdapterFactory {\n  private config: AdapterConfig\n\n  constructor(config?: Partial<AdapterConfig>) {\n    this.config = mergeConfig(config ?? {})\n  }\n\n  createStorage(): IStorageAdapter {\n    return createStorageAdapter(this.config.storage)\n  }\n\n  createNetwork(): INetworkAdapter {\n    return createNetworkAdapter(this.config.network)\n  }\n\n  createAudio(): IAudioAdapter {\n    return createAudioAdapter(this.config.audio)\n  }\n\n  createPlatform(): IPlatformAdapter {\n    return createPlatformAdapter(this.config.platform)\n  }\n\n  createSuite(): AdapterSuite {\n    return {\n      storage: this.createStorage(),\n      network: this.createNetwork(),\n      audio: this.createAudio(),\n      platform: this.createPlatform(),\n    }\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): AdapterConfig {\n    return { ...this.config }\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<AdapterConfig>): void {\n    this.config = mergeConfig(config, this.config)\n  }\n}\n","/**\n * Platform and capability detection\n */\n\nimport type { AdapterConfig } from './config'\nimport { defaultWebConfig, defaultTestConfig } from './config'\n\n/**\n * Detected environment\n */\nexport type Environment = 'browser' | 'node' | 'worker' | 'test' | 'unknown'\n\n/**\n * Detected capabilities\n */\nexport interface DetectedCapabilities {\n  /** localStorage available */\n  localStorage: boolean\n  /** IndexedDB available */\n  indexedDB: boolean\n  /** Fetch API available */\n  fetch: boolean\n  /** Web Audio API available */\n  webAudio: boolean\n  /** Notification API available */\n  notifications: boolean\n  /** Clipboard API available */\n  clipboard: boolean\n  /** Share API available */\n  share: boolean\n  /** Service Worker available */\n  serviceWorker: boolean\n  /** Is online */\n  online: boolean\n}\n\n/**\n * Detect current environment\n */\nexport function detectEnvironment(): Environment {\n  // Check for test environment\n  if (\n    typeof process !== 'undefined' &&\n    (process.env.NODE_ENV === 'test' || process.env.VITEST)\n  ) {\n    return 'test'\n  }\n\n  // Check for browser\n  if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n    return 'browser'\n  }\n\n  // Check for web worker\n  if (\n    typeof self !== 'undefined' &&\n    typeof (globalThis as { WorkerGlobalScope?: unknown }).WorkerGlobalScope !== 'undefined'\n  ) {\n    return 'worker'\n  }\n\n  // Check for Node.js\n  if (typeof process !== 'undefined' && process.versions?.node) {\n    return 'node'\n  }\n\n  return 'unknown'\n}\n\n/**\n * Detect available capabilities\n */\nexport function detectCapabilities(): DetectedCapabilities {\n  const env = detectEnvironment()\n\n  if (env !== 'browser') {\n    // Non-browser environments have limited capabilities\n    return {\n      localStorage: false,\n      indexedDB: false,\n      fetch: env === 'node', // Node has fetch in v18+\n      webAudio: false,\n      notifications: false,\n      clipboard: false,\n      share: false,\n      serviceWorker: false,\n      online: true,\n    }\n  }\n\n  // Browser environment\n  return {\n    localStorage: typeof localStorage !== 'undefined',\n    indexedDB: typeof indexedDB !== 'undefined',\n    fetch: typeof fetch !== 'undefined',\n    webAudio: typeof AudioContext !== 'undefined' || typeof (window as { webkitAudioContext?: unknown }).webkitAudioContext !== 'undefined',\n    notifications: 'Notification' in window,\n    clipboard: 'clipboard' in navigator,\n    share: 'share' in navigator,\n    serviceWorker: 'serviceWorker' in navigator,\n    online: navigator.onLine,\n  }\n}\n\n/**\n * Get recommended configuration based on detected environment\n */\nexport function getRecommendedConfig(): AdapterConfig {\n  const env = detectEnvironment()\n  const caps = detectCapabilities()\n\n  // Test environment\n  if (env === 'test') {\n    return defaultTestConfig\n  }\n\n  // Non-browser environment\n  if (env !== 'browser') {\n    return defaultTestConfig // Use memory/mock adapters\n  }\n\n  // Browser environment - customize based on capabilities\n  const config: AdapterConfig = { ...defaultWebConfig }\n\n  // Storage configuration\n  if (caps.indexedDB && caps.localStorage) {\n    config.storage = {\n      type: 'hybrid',\n      small: { type: 'localStorage' },\n      large: { type: 'indexedDB' },\n    }\n  } else if (caps.localStorage) {\n    config.storage = { type: 'localStorage' }\n  } else if (caps.indexedDB) {\n    config.storage = { type: 'indexedDB' }\n  } else {\n    config.storage = { type: 'memory' }\n  }\n\n  // Network configuration\n  if (caps.fetch) {\n    config.network = {\n      type: 'fetch',\n      cache: { enabled: true, maxAge: 3600000 },\n    }\n  } else {\n    config.network = { type: 'mock' }\n  }\n\n  // Audio configuration\n  if (caps.webAudio) {\n    config.audio = { type: 'webAudio' }\n  } else {\n    config.audio = { type: 'mock' }\n  }\n\n  // Platform is always web in browser\n  config.platform = { type: 'web' }\n\n  return config\n}\n\n/**\n * Check if running in a secure context (HTTPS or localhost)\n */\nexport function isSecureContext(): boolean {\n  if (typeof window === 'undefined') return false\n  return window.isSecureContext ?? false\n}\n\n/**\n * Check if running as installed PWA\n */\nexport function isPWA(): boolean {\n  if (typeof window === 'undefined') return false\n\n  return (\n    window.matchMedia('(display-mode: standalone)').matches ||\n    (navigator as { standalone?: boolean }).standalone === true\n  )\n}\n\n/**\n * Get device type based on user agent and screen\n */\nexport function getDeviceType(): 'mobile' | 'tablet' | 'desktop' {\n  if (typeof window === 'undefined') return 'desktop'\n\n  const ua = navigator.userAgent.toLowerCase()\n\n  if (ua.includes('mobile')) return 'mobile'\n  if (ua.includes('tablet') || ua.includes('ipad')) return 'tablet'\n\n  // Check screen size as fallback\n  if (window.innerWidth < 768) return 'mobile'\n  if (window.innerWidth < 1024) return 'tablet'\n\n  return 'desktop'\n}\n\n/**\n * Get preferred color scheme\n */\nexport function getPreferredColorScheme(): 'light' | 'dark' {\n  if (typeof window === 'undefined') return 'light'\n\n  if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    return 'dark'\n  }\n\n  return 'light'\n}\n\n/**\n * Get estimated storage quota\n */\nexport async function getStorageQuota(): Promise<{ usage: number; quota: number } | null> {\n  if (typeof navigator === 'undefined' || !navigator.storage?.estimate) {\n    return null\n  }\n\n  try {\n    const estimate = await navigator.storage.estimate()\n    return {\n      usage: estimate.usage ?? 0,\n      quota: estimate.quota ?? 0,\n    }\n  } catch {\n    return null\n  }\n}\n\n/**\n * Request persistent storage (prevents browser from evicting data)\n */\nexport async function requestPersistentStorage(): Promise<boolean> {\n  if (typeof navigator === 'undefined' || !navigator.storage?.persist) {\n    return false\n  }\n\n  try {\n    return await navigator.storage.persist()\n  } catch {\n    return false\n  }\n}\n"]}