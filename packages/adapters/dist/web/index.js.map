{"version":3,"sources":["../../src/storage/storage-interface.ts","../../src/web/local-storage-adapter.ts","../../src/interfaces/storage.ts","../../src/web/indexed-db-adapter.ts","../../src/interfaces/network.ts","../../src/web/web-network-adapter.ts","../../src/interfaces/audio.ts","../../src/web/web-audio-adapter.ts","../../src/interfaces/platform.ts","../../src/web/web-platform-adapter.ts","../../src/web/clipboard-adapter.ts","../../src/web/keyboard-adapter.ts","../../src/web/http-adapter.ts"],"names":["StorageError"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Abstract storage interface\n * Platform-agnostic storage abstraction\n */\n\n/**\n * Key-value storage interface\n */\nexport interface StorageAdapter {\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): T | null\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): void\n\n  /**\n   * Remove a value from storage\n   * @param key - Storage key\n   */\n  remove(key: string): void\n\n  /**\n   * Check if a key exists\n   * @param key - Storage key\n   */\n  has(key: string): boolean\n\n  /**\n   * Clear all stored values\n   */\n  clear(): void\n\n  /**\n   * Get all keys\n   */\n  keys(): string[]\n}\n\n/**\n * Async storage interface for larger data\n */\nexport interface AsyncStorageAdapter {\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): Promise<T | null>\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): Promise<void>\n\n  /**\n   * Remove a value from storage\n   * @param key - Storage key\n   */\n  remove(key: string): Promise<void>\n\n  /**\n   * Check if a key exists\n   * @param key - Storage key\n   */\n  has(key: string): Promise<boolean>\n\n  /**\n   * Clear all stored values\n   */\n  clear(): Promise<void>\n\n  /**\n   * Get all keys\n   */\n  keys(): Promise<string[]>\n}\n\n/**\n * Storage error types\n */\nexport class StorageError extends Error {\n  constructor(\n    message: string,\n    public readonly code: 'QUOTA_EXCEEDED' | 'NOT_AVAILABLE' | 'UNKNOWN'\n  ) {\n    super(message)\n    this.name = 'StorageError'\n  }\n}\n","/**\n * localStorage adapter for web browsers\n */\n\nimport type { StorageAdapter } from '../storage/storage-interface'\nimport { StorageError } from '../storage/storage-interface'\n\n/**\n * Check if an error is a QuotaExceededError\n */\nexport function isQuotaExceededError(error: unknown): boolean {\n  return (\n    error instanceof DOMException &&\n    (error.code === 22 ||\n      error.code === 1014 ||\n      error.name === 'QuotaExceededError' ||\n      error.name === 'NS_ERROR_DOM_QUOTA_REACHED')\n  )\n}\n\n/**\n * localStorage implementation of StorageAdapter\n */\nexport class LocalStorageAdapter implements StorageAdapter {\n  constructor(private prefix: string = '') {}\n\n  private getKey(key: string): string {\n    return this.prefix ? `${this.prefix}.${key}` : key\n  }\n\n  get<T>(key: string): T | null {\n    try {\n      const value = localStorage.getItem(this.getKey(key))\n      if (value === null) return null\n      return JSON.parse(value) as T\n    } catch {\n      return null\n    }\n  }\n\n  set<T>(key: string, value: T): void {\n    try {\n      localStorage.setItem(this.getKey(key), JSON.stringify(value))\n    } catch (error) {\n      if (isQuotaExceededError(error)) {\n        throw new StorageError('localStorage quota exceeded', 'QUOTA_EXCEEDED')\n      }\n      throw error\n    }\n  }\n\n  remove(key: string): void {\n    localStorage.removeItem(this.getKey(key))\n  }\n\n  has(key: string): boolean {\n    return localStorage.getItem(this.getKey(key)) !== null\n  }\n\n  clear(): void {\n    if (this.prefix) {\n      // Only clear keys with our prefix\n      const keysToRemove: string[] = []\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i)\n        if (key && key.startsWith(this.prefix)) {\n          keysToRemove.push(key)\n        }\n      }\n      keysToRemove.forEach(key => localStorage.removeItem(key))\n    } else {\n      localStorage.clear()\n    }\n  }\n\n  keys(): string[] {\n    const keys: string[] = []\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i)\n      if (key) {\n        if (this.prefix) {\n          if (key.startsWith(this.prefix)) {\n            keys.push(key.substring(this.prefix.length + 1))\n          }\n        } else {\n          keys.push(key)\n        }\n      }\n    }\n    return keys\n  }\n\n  /**\n   * Get approximate localStorage usage in bytes\n   */\n  getSize(): number {\n    let total = 0\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i)\n      if (key) {\n        total += key.length + (localStorage.getItem(key)?.length || 0)\n      }\n    }\n    return total\n  }\n\n  /**\n   * Get localStorage usage as a percentage (assumes 5MB limit)\n   */\n  getUsagePercent(): number {\n    const size = this.getSize()\n    const estimatedLimit = 5 * 1024 * 1024 // 5MB in bytes\n    return Math.min(100, (size / estimatedLimit) * 100)\n  }\n}\n\n/**\n * Create a new localStorage adapter\n * @param prefix - Optional prefix for all keys\n */\nexport function createLocalStorage(prefix?: string): StorageAdapter {\n  return new LocalStorageAdapter(prefix)\n}\n","/**\n * Storage adapter interface\n * Platform-agnostic storage abstraction with support for\n * key-value storage, structured data, and batch operations\n */\n\n/**\n * Storage change event\n */\nexport interface StorageChangeEvent<T = unknown> {\n  key: string\n  oldValue: T | null\n  newValue: T | null\n}\n\n/**\n * Comprehensive storage adapter interface\n * Supports both simple key-value and structured collection-based storage\n */\nexport interface IStorageAdapter {\n  // Key-value storage\n  /**\n   * Get a value from storage\n   * @param key - Storage key\n   * @returns Stored value or null if not found\n   */\n  get<T>(key: string): Promise<T | null>\n\n  /**\n   * Set a value in storage\n   * @param key - Storage key\n   * @param value - Value to store\n   */\n  set<T>(key: string, value: T): Promise<void>\n\n  /**\n   * Delete a value from storage\n   * @param key - Storage key\n   */\n  delete(key: string): Promise<void>\n\n  /**\n   * Clear all stored values\n   */\n  clear(): Promise<void>\n\n  /**\n   * Get all storage keys\n   */\n  keys(): Promise<string[]>\n\n  // Structured storage for large/organized data\n  /**\n   * Get a structured item from a collection\n   * @param collection - Collection name\n   * @param id - Item identifier\n   */\n  getStructured<T>(collection: string, id: string): Promise<T | null>\n\n  /**\n   * Set a structured item in a collection\n   * @param collection - Collection name\n   * @param id - Item identifier\n   * @param value - Value to store\n   */\n  setStructured<T>(collection: string, id: string, value: T): Promise<void>\n\n  /**\n   * Delete structured item(s) from a collection\n   * @param collection - Collection name\n   * @param id - Optional item identifier (deletes entire collection if omitted)\n   */\n  deleteStructured(collection: string, id?: string): Promise<void>\n\n  /**\n   * List all item IDs in a collection\n   * @param collection - Collection name\n   */\n  listStructured(collection: string): Promise<string[]>\n\n  // Bulk operations\n  /**\n   * Get multiple values at once\n   * @param keys - Array of storage keys\n   */\n  getBatch<T>(keys: string[]): Promise<Record<string, T | null>>\n\n  /**\n   * Set multiple values at once\n   * @param data - Key-value pairs to store\n   */\n  setBatch(data: Record<string, unknown>): Promise<void>\n\n  // Events\n  /**\n   * Subscribe to storage changes\n   * @param callback - Called when storage changes\n   * @returns Cleanup function to unsubscribe\n   */\n  onChanged<T>(callback: (event: StorageChangeEvent<T>) => void): () => void\n}\n\n/**\n * Synchronous storage adapter for simple use cases\n * Useful when async is not needed (e.g., localStorage)\n */\nexport interface ISyncStorageAdapter {\n  get<T>(key: string): T | null\n  set<T>(key: string, value: T): void\n  delete(key: string): void\n  clear(): void\n  keys(): string[]\n  has(key: string): boolean\n}\n\n/**\n * Storage error codes\n */\nexport type StorageErrorCode =\n  | 'QUOTA_EXCEEDED'\n  | 'NOT_AVAILABLE'\n  | 'PERMISSION_DENIED'\n  | 'NOT_FOUND'\n  | 'INVALID_DATA'\n  | 'UNKNOWN'\n\n/**\n * Storage error class\n */\nexport class StorageError extends Error {\n  constructor(\n    message: string,\n    public readonly code: StorageErrorCode\n  ) {\n    super(message)\n    this.name = 'StorageError'\n  }\n}\n\n/**\n * Storage adapter configuration\n */\nexport interface StorageAdapterConfig {\n  /** Prefix for all storage keys */\n  prefix?: string\n  /** Maximum storage quota in bytes (if supported) */\n  maxQuota?: number\n  /** Enable compression for large values */\n  compression?: boolean\n}\n","/**\n * IndexedDB storage adapter\n * Supports large data storage with structured collections\n */\n\nimport type {\n  IStorageAdapter,\n  StorageAdapterConfig,\n  StorageChangeEvent,\n} from '../interfaces/storage'\nimport { StorageError } from '../interfaces/storage'\n\nconst DEFAULT_DB_NAME = 'jota-db'\nconst DEFAULT_VERSION = 1\nconst KV_STORE = 'keyvalue'\nconst COLLECTIONS_STORE = 'collections'\n\ninterface CollectionItem<T = unknown> {\n  collection: string\n  id: string\n  value: T\n}\n\n/**\n * IndexedDB-based storage adapter\n * Provides async storage for large datasets with structured collections\n */\nexport class IndexedDBAdapter implements IStorageAdapter {\n  private db: IDBDatabase | null = null\n  private dbName: string\n  private prefix: string\n  private listeners: Set<(event: StorageChangeEvent) => void> = new Set()\n  private initPromise: Promise<void> | null = null\n\n  constructor(config: StorageAdapterConfig & { dbName?: string } = {}) {\n    this.dbName = config.dbName ?? DEFAULT_DB_NAME\n    this.prefix = config.prefix ?? ''\n  }\n\n  private async init(): Promise<void> {\n    if (this.db) return\n\n    if (this.initPromise) {\n      return this.initPromise\n    }\n\n    this.initPromise = new Promise((resolve, reject) => {\n      if (!('indexedDB' in globalThis)) {\n        reject(new StorageError('IndexedDB is not available', 'NOT_AVAILABLE'))\n        return\n      }\n\n      const request = indexedDB.open(this.dbName, DEFAULT_VERSION)\n\n      request.onerror = () => {\n        reject(new StorageError('Failed to open IndexedDB', 'UNKNOWN'))\n      }\n\n      request.onsuccess = () => {\n        this.db = request.result\n        resolve()\n      }\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result\n\n        // Key-value store\n        if (!db.objectStoreNames.contains(KV_STORE)) {\n          db.createObjectStore(KV_STORE)\n        }\n\n        // Collections store with compound index\n        if (!db.objectStoreNames.contains(COLLECTIONS_STORE)) {\n          const store = db.createObjectStore(COLLECTIONS_STORE, {\n            keyPath: ['collection', 'id'],\n          })\n          store.createIndex('collection', 'collection', { unique: false })\n        }\n      }\n    })\n\n    return this.initPromise\n  }\n\n  private getKey(key: string): string {\n    return this.prefix ? `${this.prefix}.${key}` : key\n  }\n\n  private notifyChange<T>(key: string, oldValue: T | null, newValue: T | null): void {\n    const event: StorageChangeEvent<T> = { key, oldValue, newValue }\n    this.listeners.forEach((listener) => listener(event))\n  }\n\n  // Key-value operations\n\n  async get<T>(key: string): Promise<T | null> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readonly')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.get(this.getKey(key))\n\n      request.onerror = () => reject(new StorageError('Failed to get value', 'UNKNOWN'))\n      request.onsuccess = () => resolve(request.result ?? null)\n    })\n  }\n\n  async set<T>(key: string, value: T): Promise<void> {\n    await this.init()\n    const oldValue = await this.get<T>(key)\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readwrite')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.put(value, this.getKey(key))\n\n      request.onerror = () => {\n        const error = request.error\n        if (error?.name === 'QuotaExceededError') {\n          reject(new StorageError('Storage quota exceeded', 'QUOTA_EXCEEDED'))\n        } else {\n          reject(new StorageError('Failed to set value', 'UNKNOWN'))\n        }\n      }\n      request.onsuccess = () => {\n        this.notifyChange(key, oldValue, value)\n        resolve()\n      }\n    })\n  }\n\n  async delete(key: string): Promise<void> {\n    await this.init()\n    const oldValue = await this.get(key)\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readwrite')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.delete(this.getKey(key))\n\n      request.onerror = () => reject(new StorageError('Failed to delete value', 'UNKNOWN'))\n      request.onsuccess = () => {\n        this.notifyChange(key, oldValue, null)\n        resolve()\n      }\n    })\n  }\n\n  async clear(): Promise<void> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([KV_STORE, COLLECTIONS_STORE], 'readwrite')\n\n      if (this.prefix) {\n        // Clear only keys with our prefix\n        const kvStore = transaction.objectStore(KV_STORE)\n        const cursorRequest = kvStore.openCursor()\n\n        cursorRequest.onsuccess = () => {\n          const cursor = cursorRequest.result\n          if (cursor) {\n            const key = cursor.key as string\n            if (key.startsWith(this.prefix)) {\n              cursor.delete()\n            }\n            cursor.continue()\n          }\n        }\n\n        // Clear collections with prefix\n        const collectionsStore = transaction.objectStore(COLLECTIONS_STORE)\n        const collCursorRequest = collectionsStore.openCursor()\n\n        collCursorRequest.onsuccess = () => {\n          const cursor = collCursorRequest.result\n          if (cursor) {\n            const item = cursor.value as CollectionItem\n            if (item.collection.startsWith(this.prefix)) {\n              cursor.delete()\n            }\n            cursor.continue()\n          }\n        }\n      } else {\n        // Clear all\n        transaction.objectStore(KV_STORE).clear()\n        transaction.objectStore(COLLECTIONS_STORE).clear()\n      }\n\n      transaction.oncomplete = () => resolve()\n      transaction.onerror = () => reject(new StorageError('Failed to clear storage', 'UNKNOWN'))\n    })\n  }\n\n  async keys(): Promise<string[]> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readonly')\n      const store = transaction.objectStore(KV_STORE)\n      const request = store.getAllKeys()\n\n      request.onerror = () => reject(new StorageError('Failed to get keys', 'UNKNOWN'))\n      request.onsuccess = () => {\n        let keys = request.result as string[]\n        if (this.prefix) {\n          keys = keys\n            .filter((k) => k.startsWith(this.prefix))\n            .map((k) => k.substring(this.prefix.length + 1))\n        }\n        resolve(keys)\n      }\n    })\n  }\n\n  // Structured storage operations\n\n  async getStructured<T>(collection: string, id: string): Promise<T | null> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readonly')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n      const request = store.get([collectionKey, id])\n\n      request.onerror = () => reject(new StorageError('Failed to get structured value', 'UNKNOWN'))\n      request.onsuccess = () => {\n        const item = request.result as CollectionItem<T> | undefined\n        resolve(item?.value ?? null)\n      }\n    })\n  }\n\n  async setStructured<T>(collection: string, id: string, value: T): Promise<void> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readwrite')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n      const item: CollectionItem<T> = { collection: collectionKey, id, value }\n      const request = store.put(item)\n\n      request.onerror = () => {\n        const error = request.error\n        if (error?.name === 'QuotaExceededError') {\n          reject(new StorageError('Storage quota exceeded', 'QUOTA_EXCEEDED'))\n        } else {\n          reject(new StorageError('Failed to set structured value', 'UNKNOWN'))\n        }\n      }\n      request.onsuccess = () => resolve()\n    })\n  }\n\n  async deleteStructured(collection: string, id?: string): Promise<void> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readwrite')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n\n      if (id !== undefined) {\n        // Delete single item\n        const request = store.delete([collectionKey, id])\n        request.onerror = () =>\n          reject(new StorageError('Failed to delete structured value', 'UNKNOWN'))\n        request.onsuccess = () => resolve()\n      } else {\n        // Delete entire collection\n        const index = store.index('collection')\n        const request = index.openCursor(IDBKeyRange.only(collectionKey))\n\n        request.onsuccess = () => {\n          const cursor = request.result\n          if (cursor) {\n            cursor.delete()\n            cursor.continue()\n          }\n        }\n\n        transaction.oncomplete = () => resolve()\n        transaction.onerror = () =>\n          reject(new StorageError('Failed to delete collection', 'UNKNOWN'))\n      }\n    })\n  }\n\n  async listStructured(collection: string): Promise<string[]> {\n    await this.init()\n    const collectionKey = this.prefix ? `${this.prefix}.${collection}` : collection\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(COLLECTIONS_STORE, 'readonly')\n      const store = transaction.objectStore(COLLECTIONS_STORE)\n      const index = store.index('collection')\n      const request = index.getAllKeys(IDBKeyRange.only(collectionKey))\n\n      request.onerror = () =>\n        reject(new StorageError('Failed to list structured items', 'UNKNOWN'))\n      request.onsuccess = () => {\n        // Keys are [collection, id] arrays\n        const ids = (request.result as [string, string][]).map(([, id]) => id)\n        resolve(ids)\n      }\n    })\n  }\n\n  // Batch operations\n\n  async getBatch<T>(keys: string[]): Promise<Record<string, T | null>> {\n    await this.init()\n\n    const results: Record<string, T | null> = {}\n\n    await Promise.all(\n      keys.map(async (key) => {\n        results[key] = await this.get<T>(key)\n      })\n    )\n\n    return results\n  }\n\n  async setBatch(data: Record<string, unknown>): Promise<void> {\n    await this.init()\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction(KV_STORE, 'readwrite')\n      const store = transaction.objectStore(KV_STORE)\n\n      for (const [key, value] of Object.entries(data)) {\n        store.put(value, this.getKey(key))\n      }\n\n      transaction.oncomplete = () => resolve()\n      transaction.onerror = () => {\n        const error = transaction.error\n        if (error?.name === 'QuotaExceededError') {\n          reject(new StorageError('Storage quota exceeded', 'QUOTA_EXCEEDED'))\n        } else {\n          reject(new StorageError('Failed to set batch values', 'UNKNOWN'))\n        }\n      }\n    })\n  }\n\n  // Events\n\n  onChanged<T>(callback: (event: StorageChangeEvent<T>) => void): () => void {\n    this.listeners.add(callback as (event: StorageChangeEvent) => void)\n    return () => {\n      this.listeners.delete(callback as (event: StorageChangeEvent) => void)\n    }\n  }\n\n  // Cleanup\n\n  async close(): Promise<void> {\n    if (this.db) {\n      this.db.close()\n      this.db = null\n      this.initPromise = null\n    }\n  }\n\n  /**\n   * Get storage usage estimate (if supported)\n   */\n  async getStorageEstimate(): Promise<{ usage: number; quota: number } | null> {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      const estimate = await navigator.storage.estimate()\n      return {\n        usage: estimate.usage ?? 0,\n        quota: estimate.quota ?? 0,\n      }\n    }\n    return null\n  }\n}\n\n/**\n * Create an IndexedDB storage adapter\n * @param config - Adapter configuration\n */\nexport function createIndexedDBStorage(\n  config?: StorageAdapterConfig & { dbName?: string }\n): IStorageAdapter {\n  return new IndexedDBAdapter(config)\n}\n","/**\n * Network adapter interface\n * Platform-agnostic network abstraction for HTTP requests,\n * file downloads, caching, and connection status\n */\n\n/**\n * HTTP request options\n */\nexport interface RequestOptions {\n  /** Request headers */\n  headers?: Record<string, string>\n  /** Request timeout in milliseconds */\n  timeout?: number\n  /** Abort signal for request cancellation */\n  signal?: AbortSignal\n  /** Enable/disable credentials (cookies) */\n  credentials?: 'include' | 'omit' | 'same-origin'\n  /** Response type */\n  responseType?: 'json' | 'text' | 'blob' | 'arraybuffer'\n}\n\n/**\n * HTTP response wrapper\n */\nexport interface HttpResponse<T> {\n  /** Response data */\n  data: T\n  /** HTTP status code */\n  status: number\n  /** Response headers */\n  headers: Record<string, string>\n  /** Whether the request was successful (2xx status) */\n  ok: boolean\n}\n\n/**\n * Download progress information\n */\nexport interface DownloadProgress {\n  /** Bytes loaded */\n  loaded: number\n  /** Total bytes (if known) */\n  total: number | null\n  /** Progress percentage (0-100) */\n  percent: number\n}\n\n/**\n * Cache entry metadata\n */\nexport interface CacheEntry<T> {\n  /** Cached data */\n  data: T\n  /** When the entry was cached (timestamp) */\n  cachedAt: number\n  /** Time-to-live in milliseconds */\n  ttl: number\n}\n\n/**\n * Network adapter interface\n */\nexport interface INetworkAdapter {\n  // HTTP requests\n  /**\n   * Perform a GET request\n   * @param url - Request URL\n   * @param options - Request options\n   */\n  get<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a POST request\n   * @param url - Request URL\n   * @param data - Request body\n   * @param options - Request options\n   */\n  post<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a PUT request\n   * @param url - Request URL\n   * @param data - Request body\n   * @param options - Request options\n   */\n  put<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a PATCH request\n   * @param url - Request URL\n   * @param data - Request body\n   * @param options - Request options\n   */\n  patch<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  /**\n   * Perform a DELETE request\n   * @param url - Request URL\n   * @param options - Request options\n   */\n  delete<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>>\n\n  // File downloads\n  /**\n   * Download a file as Blob\n   * @param url - File URL\n   * @param onProgress - Progress callback\n   */\n  downloadFile(url: string, onProgress?: (progress: DownloadProgress) => void): Promise<Blob>\n\n  /**\n   * Download and parse JSON\n   * @param url - JSON URL\n   * @param onProgress - Progress callback\n   */\n  downloadJson<T>(url: string, onProgress?: (progress: DownloadProgress) => void): Promise<T>\n\n  // Caching\n  /**\n   * Get cached data if still valid\n   * @param url - Cache key (usually the URL)\n   * @param maxAge - Maximum age in milliseconds\n   */\n  getCached<T>(url: string, maxAge?: number): Promise<T | null>\n\n  /**\n   * Store data in cache\n   * @param url - Cache key\n   * @param data - Data to cache\n   * @param ttl - Time-to-live in milliseconds\n   */\n  setCached<T>(url: string, data: T, ttl?: number): Promise<void>\n\n  /**\n   * Invalidate cached data\n   * @param url - Cache key to invalidate\n   */\n  invalidateCache(url: string): Promise<void>\n\n  /**\n   * Clear all cached data\n   */\n  clearCache(): Promise<void>\n\n  // Connection status\n  /**\n   * Check if currently online\n   */\n  isOnline(): Promise<boolean>\n\n  /**\n   * Subscribe to connection status changes\n   * @param callback - Called when connection status changes\n   * @returns Cleanup function\n   */\n  onConnectionChange(callback: (online: boolean) => void): () => void\n}\n\n/**\n * Network error codes\n */\nexport type NetworkErrorCode =\n  | 'TIMEOUT'\n  | 'OFFLINE'\n  | 'ABORTED'\n  | 'NOT_FOUND'\n  | 'SERVER_ERROR'\n  | 'NETWORK_ERROR'\n  | 'PARSE_ERROR'\n  | 'UNKNOWN'\n\n/**\n * Network error class\n */\nexport class NetworkError extends Error {\n  constructor(\n    message: string,\n    public readonly code: NetworkErrorCode,\n    public readonly status?: number,\n    public readonly response?: unknown\n  ) {\n    super(message)\n    this.name = 'NetworkError'\n  }\n}\n\n/**\n * Network adapter configuration\n */\nexport interface NetworkAdapterConfig {\n  /** Base URL for all requests */\n  baseUrl?: string\n  /** Default timeout in milliseconds */\n  timeout?: number\n  /** Default headers for all requests */\n  headers?: Record<string, string>\n  /** Enable request/response logging */\n  debug?: boolean\n  /** Retry configuration */\n  retry?: {\n    /** Maximum retry attempts */\n    maxAttempts: number\n    /** Delay between retries in milliseconds */\n    delay: number\n    /** Multiply delay by this factor for each retry */\n    backoffFactor?: number\n  }\n}\n","/**\n * Web network adapter\n * Fetch-based HTTP client with caching support\n */\n\nimport type {\n  INetworkAdapter,\n  RequestOptions,\n  HttpResponse,\n  DownloadProgress,\n  NetworkAdapterConfig,\n} from '../interfaces/network'\nimport { NetworkError } from '../interfaces/network'\n\nconst DEFAULT_TIMEOUT = 30000\nconst DEFAULT_CACHE_TTL = 3600000 // 1 hour\n\ninterface CacheItem<T> {\n  data: T\n  cachedAt: number\n  ttl: number\n}\n\n/**\n * Web-based network adapter using fetch API\n */\nexport class WebNetworkAdapter implements INetworkAdapter {\n  private config: NetworkAdapterConfig\n  private cache: Map<string, CacheItem<unknown>> = new Map()\n  private onlineListeners: Set<(online: boolean) => void> = new Set()\n  private boundOnlineHandler: () => void\n  private boundOfflineHandler: () => void\n\n  constructor(config: NetworkAdapterConfig = {}) {\n    this.config = {\n      timeout: DEFAULT_TIMEOUT,\n      ...config,\n    }\n\n    this.boundOnlineHandler = () => this.notifyConnectionChange(true)\n    this.boundOfflineHandler = () => this.notifyConnectionChange(false)\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('online', this.boundOnlineHandler)\n      window.addEventListener('offline', this.boundOfflineHandler)\n    }\n  }\n\n  private notifyConnectionChange(online: boolean): void {\n    this.onlineListeners.forEach((listener) => listener(online))\n  }\n\n  private buildUrl(url: string): string {\n    if (this.config.baseUrl && !url.startsWith('http')) {\n      return `${this.config.baseUrl}${url.startsWith('/') ? '' : '/'}${url}`\n    }\n    return url\n  }\n\n  private buildHeaders(options?: RequestOptions): Record<string, string> {\n    return {\n      ...this.config.headers,\n      ...options?.headers,\n    }\n  }\n\n  private parseResponseHeaders(headers: Headers): Record<string, string> {\n    const result: Record<string, string> = {}\n    headers.forEach((value, key) => {\n      result[key] = value\n    })\n    return result\n  }\n\n  private async request<T>(\n    method: string,\n    url: string,\n    body?: unknown,\n    options?: RequestOptions\n  ): Promise<HttpResponse<T>> {\n    const fullUrl = this.buildUrl(url)\n    const timeout = options?.timeout ?? this.config.timeout ?? DEFAULT_TIMEOUT\n\n    const controller = new AbortController()\n    const timeoutId = setTimeout(() => controller.abort(), timeout)\n\n    try {\n      const fetchOptions: RequestInit = {\n        method,\n        headers: this.buildHeaders(options),\n        signal: options?.signal ?? controller.signal,\n        credentials: options?.credentials,\n      }\n\n      if (body !== undefined && method !== 'GET' && method !== 'HEAD') {\n        fetchOptions.body = JSON.stringify(body)\n        fetchOptions.headers = {\n          'Content-Type': 'application/json',\n          ...fetchOptions.headers,\n        }\n      }\n\n      const response = await fetch(fullUrl, fetchOptions)\n      clearTimeout(timeoutId)\n\n      let data: T\n\n      const responseType = options?.responseType ?? 'json'\n      switch (responseType) {\n        case 'text':\n          data = (await response.text()) as T\n          break\n        case 'blob':\n          data = (await response.blob()) as T\n          break\n        case 'arraybuffer':\n          data = (await response.arrayBuffer()) as T\n          break\n        case 'json':\n        default:\n          data = (await response.json()) as T\n          break\n      }\n\n      return {\n        data,\n        status: response.status,\n        headers: this.parseResponseHeaders(response.headers),\n        ok: response.ok,\n      }\n    } catch (error) {\n      clearTimeout(timeoutId)\n\n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          if (!navigator.onLine) {\n            throw new NetworkError('No internet connection', 'OFFLINE')\n          }\n          throw new NetworkError('Request timeout', 'TIMEOUT')\n        }\n        throw new NetworkError(error.message, 'NETWORK_ERROR')\n      }\n      throw new NetworkError('Unknown network error', 'UNKNOWN')\n    }\n  }\n\n  // HTTP methods\n\n  async get<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('GET', url, undefined, options)\n  }\n\n  async post<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('POST', url, data, options)\n  }\n\n  async put<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('PUT', url, data, options)\n  }\n\n  async patch<T>(url: string, data: unknown, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('PATCH', url, data, options)\n  }\n\n  async delete<T>(url: string, options?: RequestOptions): Promise<HttpResponse<T>> {\n    return this.request<T>('DELETE', url, undefined, options)\n  }\n\n  // File downloads\n\n  async downloadFile(\n    url: string,\n    onProgress?: (progress: DownloadProgress) => void\n  ): Promise<Blob> {\n    const fullUrl = this.buildUrl(url)\n    const response = await fetch(fullUrl)\n\n    if (!response.ok) {\n      throw new NetworkError(`Download failed: ${response.status}`, 'SERVER_ERROR', response.status)\n    }\n\n    if (!response.body) {\n      // Fallback for browsers without streaming support\n      return response.blob()\n    }\n\n    const contentLength = response.headers.get('content-length')\n    const total = contentLength ? parseInt(contentLength, 10) : null\n\n    const reader = response.body.getReader()\n    const chunks: Uint8Array[] = []\n    let loaded = 0\n\n    while (true) {\n      const { done, value } = await reader.read()\n\n      if (done) break\n\n      chunks.push(value)\n      loaded += value.length\n\n      if (onProgress) {\n        onProgress({\n          loaded,\n          total,\n          percent: total ? Math.round((loaded / total) * 100) : 0,\n        })\n      }\n    }\n\n    const blob = new Blob(chunks)\n    return blob\n  }\n\n  async downloadJson<T>(\n    url: string,\n    onProgress?: (progress: DownloadProgress) => void\n  ): Promise<T> {\n    const blob = await this.downloadFile(url, onProgress)\n    const text = await blob.text()\n\n    try {\n      return JSON.parse(text) as T\n    } catch {\n      throw new NetworkError('Failed to parse JSON', 'PARSE_ERROR')\n    }\n  }\n\n  // Caching\n\n  async getCached<T>(url: string, maxAge?: number): Promise<T | null> {\n    const cacheKey = this.buildUrl(url)\n    const cached = this.cache.get(cacheKey) as CacheItem<T> | undefined\n\n    if (!cached) return null\n\n    const age = Date.now() - cached.cachedAt\n    const effectiveMaxAge = maxAge ?? cached.ttl\n\n    if (age > effectiveMaxAge) {\n      this.cache.delete(cacheKey)\n      return null\n    }\n\n    return cached.data\n  }\n\n  async setCached<T>(url: string, data: T, ttl?: number): Promise<void> {\n    const cacheKey = this.buildUrl(url)\n    this.cache.set(cacheKey, {\n      data,\n      cachedAt: Date.now(),\n      ttl: ttl ?? DEFAULT_CACHE_TTL,\n    })\n  }\n\n  async invalidateCache(url: string): Promise<void> {\n    const cacheKey = this.buildUrl(url)\n    this.cache.delete(cacheKey)\n  }\n\n  async clearCache(): Promise<void> {\n    this.cache.clear()\n  }\n\n  // Connection status\n\n  async isOnline(): Promise<boolean> {\n    return navigator.onLine\n  }\n\n  onConnectionChange(callback: (online: boolean) => void): () => void {\n    this.onlineListeners.add(callback)\n    return () => {\n      this.onlineListeners.delete(callback)\n    }\n  }\n\n  // Cleanup\n\n  dispose(): void {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('online', this.boundOnlineHandler)\n      window.removeEventListener('offline', this.boundOfflineHandler)\n    }\n    this.onlineListeners.clear()\n    this.cache.clear()\n  }\n}\n\n/**\n * Create a web network adapter\n * @param config - Adapter configuration\n */\nexport function createWebNetwork(config?: NetworkAdapterConfig): INetworkAdapter {\n  return new WebNetworkAdapter(config)\n}\n","/**\n * Audio adapter interface\n * Platform-agnostic audio playback abstraction\n */\n\n/**\n * Audio playback state\n */\nexport type AudioState = 'idle' | 'loading' | 'playing' | 'paused' | 'ended' | 'error'\n\n/**\n * Audio playback options\n */\nexport interface AudioOptions {\n  /** Initial volume (0-1) */\n  volume?: number\n  /** Playback rate (0.5-2.0 typically) */\n  playbackRate?: number\n  /** Start position in seconds */\n  startTime?: number\n  /** Whether to loop playback */\n  loop?: boolean\n  /** Preload strategy */\n  preload?: 'none' | 'metadata' | 'auto'\n}\n\n/**\n * Audio handle returned by play()\n * Used to control an active audio instance\n */\nexport interface IAudioHandle {\n  /** Unique identifier for this playback instance */\n  id: string\n  /** Source URL */\n  url: string\n  /** Current playback state */\n  state: AudioState\n}\n\n/**\n * Audio playback event data\n */\nexport interface AudioEvent {\n  /** Event type */\n  type: 'statechange' | 'timeupdate' | 'ended' | 'error' | 'loaded'\n  /** Audio handle */\n  handle: IAudioHandle\n  /** Current playback time in seconds */\n  currentTime?: number\n  /** Total duration in seconds */\n  duration?: number\n  /** Error message (if type is 'error') */\n  error?: string\n}\n\n/**\n * Audio event callback\n */\nexport type AudioEventCallback = (event: AudioEvent) => void\n\n/**\n * Audio metadata\n */\nexport interface AudioMetadata {\n  /** Duration in seconds */\n  duration: number\n  /** Sample rate in Hz */\n  sampleRate?: number\n  /** Number of audio channels */\n  channels?: number\n  /** File format */\n  format?: string\n}\n\n/**\n * Audio adapter interface\n */\nexport interface IAudioAdapter {\n  // Playback control\n  /**\n   * Start playing audio from a URL\n   * @param url - Audio source URL\n   * @param options - Playback options\n   * @returns Audio handle for controlling playback\n   */\n  play(url: string, options?: AudioOptions): Promise<IAudioHandle>\n\n  /**\n   * Pause playback\n   * @param handle - Audio handle from play()\n   */\n  pause(handle: IAudioHandle): Promise<void>\n\n  /**\n   * Resume paused playback\n   * @param handle - Audio handle from play()\n   */\n  resume(handle: IAudioHandle): Promise<void>\n\n  /**\n   * Stop playback and release resources\n   * @param handle - Audio handle from play()\n   */\n  stop(handle: IAudioHandle): Promise<void>\n\n  // Seek and position\n  /**\n   * Get current playback position\n   * @param handle - Audio handle\n   * @returns Current time in seconds\n   */\n  getCurrentTime(handle: IAudioHandle): Promise<number>\n\n  /**\n   * Seek to a position\n   * @param handle - Audio handle\n   * @param time - Position in seconds\n   */\n  setCurrentTime(handle: IAudioHandle, time: number): Promise<void>\n\n  /**\n   * Get audio duration\n   * @param handle - Audio handle or URL\n   * @returns Duration in seconds\n   */\n  getDuration(handle: IAudioHandle | string): Promise<number>\n\n  // Volume control\n  /**\n   * Get current volume\n   * @param handle - Audio handle\n   * @returns Volume (0-1)\n   */\n  getVolume(handle: IAudioHandle): Promise<number>\n\n  /**\n   * Set volume\n   * @param handle - Audio handle\n   * @param volume - Volume (0-1)\n   */\n  setVolume(handle: IAudioHandle, volume: number): Promise<void>\n\n  /**\n   * Mute audio\n   * @param handle - Audio handle\n   */\n  mute(handle: IAudioHandle): Promise<void>\n\n  /**\n   * Unmute audio\n   * @param handle - Audio handle\n   */\n  unmute(handle: IAudioHandle): Promise<void>\n\n  // Playback rate\n  /**\n   * Get current playback rate\n   * @param handle - Audio handle\n   * @returns Playback rate (1.0 = normal)\n   */\n  getPlaybackRate(handle: IAudioHandle): Promise<number>\n\n  /**\n   * Set playback rate\n   * @param handle - Audio handle\n   * @param rate - Playback rate (0.5-2.0 typically)\n   */\n  setPlaybackRate(handle: IAudioHandle, rate: number): Promise<void>\n\n  // Metadata\n  /**\n   * Get audio metadata\n   * @param url - Audio URL\n   */\n  getMetadata(url: string): Promise<AudioMetadata>\n\n  // Preloading\n  /**\n   * Preload audio for faster playback\n   * @param url - Audio URL\n   */\n  preload(url: string): Promise<void>\n\n  /**\n   * Cancel preloading\n   * @param url - Audio URL\n   */\n  cancelPreload(url: string): Promise<void>\n\n  // Events\n  /**\n   * Subscribe to playback events\n   * @param handle - Audio handle\n   * @param callback - Event callback\n   * @returns Cleanup function\n   */\n  onPlaybackChange(handle: IAudioHandle, callback: AudioEventCallback): () => void\n\n  // Cleanup\n  /**\n   * Stop all playback and release all resources\n   */\n  dispose(): Promise<void>\n}\n\n/**\n * Audio error codes\n */\nexport type AudioErrorCode =\n  | 'NOT_SUPPORTED'\n  | 'NETWORK_ERROR'\n  | 'DECODE_ERROR'\n  | 'PERMISSION_DENIED'\n  | 'NOT_FOUND'\n  | 'ABORTED'\n  | 'UNKNOWN'\n\n/**\n * Audio error class\n */\nexport class AudioError extends Error {\n  constructor(\n    message: string,\n    public readonly code: AudioErrorCode\n  ) {\n    super(message)\n    this.name = 'AudioError'\n  }\n}\n\n/**\n * Audio adapter configuration\n */\nexport interface AudioAdapterConfig {\n  /** Default volume (0-1) */\n  defaultVolume?: number\n  /** Default playback rate */\n  defaultPlaybackRate?: number\n  /** Enable audio buffering */\n  buffering?: boolean\n  /** Buffer size in seconds */\n  bufferSize?: number\n}\n","/**\n * Web Audio adapter\n * HTML5 Audio-based playback with Web Audio API enhancements\n */\n\nimport type {\n  IAudioAdapter,\n  IAudioHandle,\n  AudioOptions,\n  AudioEvent,\n  AudioEventCallback,\n  AudioMetadata,\n  AudioState,\n  AudioAdapterConfig,\n} from '../interfaces/audio'\nimport { AudioError } from '../interfaces/audio'\n\nlet handleIdCounter = 0\n\nfunction generateHandleId(): string {\n  return `audio_${++handleIdCounter}_${Date.now()}`\n}\n\ninterface AudioInstance {\n  handle: IAudioHandle\n  element: HTMLAudioElement\n  listeners: Set<AudioEventCallback>\n  isMuted: boolean\n  previousVolume: number\n}\n\n/**\n * Web Audio adapter using HTML5 Audio element\n */\nexport class WebAudioAdapter implements IAudioAdapter {\n  private instances: Map<string, AudioInstance> = new Map()\n  private preloadedAudio: Map<string, HTMLAudioElement> = new Map()\n  private config: AudioAdapterConfig\n\n  constructor(config: AudioAdapterConfig = {}) {\n    this.config = {\n      defaultVolume: 1.0,\n      defaultPlaybackRate: 1.0,\n      ...config,\n    }\n  }\n\n  private createAudioElement(url: string, options?: AudioOptions): HTMLAudioElement {\n    // Check for preloaded audio\n    const preloaded = this.preloadedAudio.get(url)\n    if (preloaded) {\n      this.preloadedAudio.delete(url)\n      return preloaded\n    }\n\n    const audio = new Audio()\n    audio.src = url\n    audio.preload = options?.preload ?? 'auto'\n\n    return audio\n  }\n\n  private getState(audio: HTMLAudioElement): AudioState {\n    if (audio.error) return 'error'\n    if (audio.ended) return 'ended'\n    if (audio.paused && audio.currentTime === 0 && audio.readyState < 2) return 'loading'\n    if (audio.paused) return 'paused'\n    if (!audio.paused) return 'playing'\n    return 'idle'\n  }\n\n  private notifyListeners(instance: AudioInstance, eventType: AudioEvent['type']): void {\n    const audio = instance.element\n    const event: AudioEvent = {\n      type: eventType,\n      handle: {\n        ...instance.handle,\n        state: this.getState(audio),\n      },\n      currentTime: audio.currentTime,\n      duration: isNaN(audio.duration) ? undefined : audio.duration,\n    }\n\n    if (eventType === 'error' && audio.error) {\n      event.error = audio.error.message\n    }\n\n    instance.listeners.forEach((callback) => callback(event))\n  }\n\n  private setupEventListeners(instance: AudioInstance): void {\n    const audio = instance.element\n\n    const events = [\n      'play',\n      'pause',\n      'ended',\n      'error',\n      'loadedmetadata',\n      'timeupdate',\n    ] as const\n\n    events.forEach((eventName) => {\n      audio.addEventListener(eventName, () => {\n        // Update handle state\n        instance.handle.state = this.getState(audio)\n\n        // Map to our event types\n        let eventType: AudioEvent['type']\n        switch (eventName) {\n          case 'play':\n          case 'pause':\n            eventType = 'statechange'\n            break\n          case 'ended':\n            eventType = 'ended'\n            break\n          case 'error':\n            eventType = 'error'\n            break\n          case 'loadedmetadata':\n            eventType = 'loaded'\n            break\n          case 'timeupdate':\n            eventType = 'timeupdate'\n            break\n          default:\n            return\n        }\n\n        this.notifyListeners(instance, eventType)\n      })\n    })\n  }\n\n  // Playback control\n\n  async play(url: string, options?: AudioOptions): Promise<IAudioHandle> {\n    const audio = this.createAudioElement(url, options)\n    const handleId = generateHandleId()\n\n    const handle: IAudioHandle = {\n      id: handleId,\n      url,\n      state: 'loading',\n    }\n\n    const instance: AudioInstance = {\n      handle,\n      element: audio,\n      listeners: new Set(),\n      isMuted: false,\n      previousVolume: options?.volume ?? this.config.defaultVolume ?? 1.0,\n    }\n\n    this.instances.set(handleId, instance)\n    this.setupEventListeners(instance)\n\n    // Apply options\n    audio.volume = options?.volume ?? this.config.defaultVolume ?? 1.0\n    audio.playbackRate = options?.playbackRate ?? this.config.defaultPlaybackRate ?? 1.0\n    audio.loop = options?.loop ?? false\n\n    if (options?.startTime) {\n      audio.currentTime = options.startTime\n    }\n\n    try {\n      await audio.play()\n      handle.state = 'playing'\n      return handle\n    } catch (error) {\n      handle.state = 'error'\n      if (error instanceof Error && error.name === 'NotAllowedError') {\n        throw new AudioError(\n          'Playback not allowed. User interaction required.',\n          'PERMISSION_DENIED'\n        )\n      }\n      throw new AudioError('Failed to play audio', 'UNKNOWN')\n    }\n  }\n\n  async pause(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.element.pause()\n    instance.handle.state = 'paused'\n  }\n\n  async resume(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    try {\n      await instance.element.play()\n      instance.handle.state = 'playing'\n    } catch (error) {\n      throw new AudioError('Failed to resume playback', 'UNKNOWN')\n    }\n  }\n\n  async stop(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    instance.element.pause()\n    instance.element.currentTime = 0\n    instance.element.src = ''\n    instance.listeners.clear()\n    instance.handle.state = 'idle'\n    this.instances.delete(handle.id)\n  }\n\n  // Seek and position\n\n  async getCurrentTime(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 0\n    return instance.element.currentTime\n  }\n\n  async setCurrentTime(handle: IAudioHandle, time: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n    instance.element.currentTime = time\n  }\n\n  async getDuration(handle: IAudioHandle | string): Promise<number> {\n    if (typeof handle === 'string') {\n      // Get duration from URL (need to load metadata)\n      const metadata = await this.getMetadata(handle)\n      return metadata.duration\n    }\n\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 0\n\n    const duration = instance.element.duration\n    return isNaN(duration) ? 0 : duration\n  }\n\n  // Volume control\n\n  async getVolume(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 0\n    return instance.element.volume\n  }\n\n  async setVolume(handle: IAudioHandle, volume: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    const clampedVolume = Math.max(0, Math.min(1, volume))\n    instance.element.volume = clampedVolume\n    instance.previousVolume = clampedVolume\n    instance.isMuted = false\n  }\n\n  async mute(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    if (!instance.isMuted) {\n      instance.previousVolume = instance.element.volume\n      instance.element.volume = 0\n      instance.isMuted = true\n    }\n  }\n\n  async unmute(handle: IAudioHandle): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    if (instance.isMuted) {\n      instance.element.volume = instance.previousVolume\n      instance.isMuted = false\n    }\n  }\n\n  // Playback rate\n\n  async getPlaybackRate(handle: IAudioHandle): Promise<number> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return 1.0\n    return instance.element.playbackRate\n  }\n\n  async setPlaybackRate(handle: IAudioHandle, rate: number): Promise<void> {\n    const instance = this.instances.get(handle.id)\n    if (!instance) return\n\n    // Clamp to reasonable range\n    const clampedRate = Math.max(0.25, Math.min(4, rate))\n    instance.element.playbackRate = clampedRate\n  }\n\n  // Metadata\n\n  async getMetadata(url: string): Promise<AudioMetadata> {\n    return new Promise((resolve, reject) => {\n      const audio = new Audio()\n      audio.preload = 'metadata'\n      audio.src = url\n\n      const cleanup = () => {\n        audio.removeEventListener('loadedmetadata', onLoaded)\n        audio.removeEventListener('error', onError)\n      }\n\n      const onLoaded = () => {\n        cleanup()\n        resolve({\n          duration: audio.duration,\n        })\n      }\n\n      const onError = () => {\n        cleanup()\n        reject(new AudioError('Failed to load audio metadata', 'NETWORK_ERROR'))\n      }\n\n      audio.addEventListener('loadedmetadata', onLoaded)\n      audio.addEventListener('error', onError)\n    })\n  }\n\n  // Preloading\n\n  async preload(url: string): Promise<void> {\n    if (this.preloadedAudio.has(url)) return\n\n    return new Promise((resolve, reject) => {\n      const audio = new Audio()\n      audio.preload = 'auto'\n      audio.src = url\n\n      const cleanup = () => {\n        audio.removeEventListener('canplaythrough', onCanPlay)\n        audio.removeEventListener('error', onError)\n      }\n\n      const onCanPlay = () => {\n        cleanup()\n        this.preloadedAudio.set(url, audio)\n        resolve()\n      }\n\n      const onError = () => {\n        cleanup()\n        reject(new AudioError('Failed to preload audio', 'NETWORK_ERROR'))\n      }\n\n      audio.addEventListener('canplaythrough', onCanPlay)\n      audio.addEventListener('error', onError)\n    })\n  }\n\n  async cancelPreload(url: string): Promise<void> {\n    const audio = this.preloadedAudio.get(url)\n    if (audio) {\n      audio.src = ''\n      this.preloadedAudio.delete(url)\n    }\n  }\n\n  // Events\n\n  onPlaybackChange(handle: IAudioHandle, callback: AudioEventCallback): () => void {\n    const instance = this.instances.get(handle.id)\n    if (!instance) {\n      return () => {}\n    }\n\n    instance.listeners.add(callback)\n    return () => {\n      instance.listeners.delete(callback)\n    }\n  }\n\n  // Cleanup\n\n  async dispose(): Promise<void> {\n    // Stop all active playback\n    for (const [, instance] of this.instances) {\n      instance.element.pause()\n      instance.element.src = ''\n      instance.listeners.clear()\n    }\n    this.instances.clear()\n\n    // Clear preloaded audio\n    for (const [, audio] of this.preloadedAudio) {\n      audio.src = ''\n    }\n    this.preloadedAudio.clear()\n  }\n}\n\n/**\n * Create a web audio adapter\n * @param config - Adapter configuration\n */\nexport function createWebAudio(config?: AudioAdapterConfig): IAudioAdapter {\n  return new WebAudioAdapter(config)\n}\n","/**\n * Platform adapter interface\n * Platform-agnostic abstraction for platform-specific features\n * like file system, clipboard, notifications, and window management\n */\n\n/**\n * Platform types\n */\nexport type Platform = 'web' | 'electron' | 'server' | 'mobile' | 'unknown'\n\n/**\n * Platform information\n */\nexport interface PlatformInfo {\n  /** Platform type */\n  platform: Platform\n  /** Platform version (e.g., browser version, OS version) */\n  version: string\n  /** User agent string (if available) */\n  userAgent?: string\n  /** Operating system */\n  os?: 'windows' | 'macos' | 'linux' | 'ios' | 'android' | 'unknown'\n  /** Device type */\n  deviceType?: 'desktop' | 'tablet' | 'mobile' | 'unknown'\n  /** Is touch device */\n  isTouch?: boolean\n  /** Is in standalone mode (PWA) */\n  isStandalone?: boolean\n}\n\n/**\n * File picker options\n */\nexport interface FilePickerOptions {\n  /** Accepted file types (MIME types or extensions) */\n  accept?: string[]\n  /** Allow multiple file selection */\n  multiple?: boolean\n  /** Starting directory (if supported) */\n  startIn?: string\n}\n\n/**\n * Selected file information\n */\nexport interface SelectedFile {\n  /** File name */\n  name: string\n  /** File size in bytes */\n  size: number\n  /** MIME type */\n  type: string\n  /** File path (if available, e.g., in Electron) */\n  path?: string\n  /** Read file contents as text */\n  text(): Promise<string>\n  /** Read file contents as ArrayBuffer */\n  arrayBuffer(): Promise<ArrayBuffer>\n}\n\n/**\n * Notification options\n */\nexport interface NotificationOptions {\n  /** Notification body text */\n  body?: string\n  /** Icon URL */\n  icon?: string\n  /** Badge URL */\n  badge?: string\n  /** Tag for grouping notifications */\n  tag?: string\n  /** Auto-close after milliseconds */\n  timeout?: number\n  /** Require user interaction to dismiss */\n  requireInteraction?: boolean\n  /** Additional data */\n  data?: unknown\n}\n\n/**\n * Notification click event\n */\nexport interface NotificationClickEvent {\n  /** Notification tag */\n  tag?: string\n  /** Additional data */\n  data?: unknown\n}\n\n/**\n * Platform capabilities\n */\nexport interface PlatformCapabilities {\n  /** Can access file system */\n  fileSystem: boolean\n  /** Can show notifications */\n  notifications: boolean\n  /** Can access clipboard */\n  clipboard: boolean\n  /** Can share content */\n  share: boolean\n  /** Can use native file picker */\n  filePicker: boolean\n  /** Has window management */\n  windowManagement: boolean\n  /** Supports deep linking */\n  deepLinking: boolean\n  /** Has persistent storage */\n  persistentStorage: boolean\n}\n\n/**\n * Platform adapter interface\n */\nexport interface IPlatformAdapter {\n  // Platform detection\n  /**\n   * Get current platform type\n   */\n  getPlatform(): Platform\n\n  /**\n   * Get detailed platform information\n   */\n  getPlatformInfo(): PlatformInfo\n\n  /**\n   * Get platform version\n   */\n  getVersion(): string\n\n  /**\n   * Get platform capabilities\n   */\n  getCapabilities(): PlatformCapabilities\n\n  // File system operations (if available)\n  /**\n   * Read file contents\n   * @param path - File path\n   * @returns File contents as Uint8Array\n   */\n  readFile?(path: string): Promise<Uint8Array>\n\n  /**\n   * Read file as text\n   * @param path - File path\n   * @returns File contents as string\n   */\n  readTextFile?(path: string): Promise<string>\n\n  /**\n   * Write file contents\n   * @param path - File path\n   * @param data - Data to write\n   */\n  writeFile?(path: string, data: Uint8Array): Promise<void>\n\n  /**\n   * Write text file\n   * @param path - File path\n   * @param text - Text to write\n   */\n  writeTextFile?(path: string, text: string): Promise<void>\n\n  /**\n   * Check if file exists\n   * @param path - File path\n   */\n  fileExists?(path: string): Promise<boolean>\n\n  /**\n   * Delete file\n   * @param path - File path\n   */\n  deleteFile?(path: string): Promise<void>\n\n  // File picker\n  /**\n   * Show file picker dialog\n   * @param options - Picker options\n   * @returns Selected file or null\n   */\n  selectFile?(options?: FilePickerOptions): Promise<SelectedFile | null>\n\n  /**\n   * Show multiple file picker dialog\n   * @param options - Picker options\n   * @returns Selected files\n   */\n  selectFiles?(options?: FilePickerOptions): Promise<SelectedFile[]>\n\n  /**\n   * Show folder picker dialog\n   * @returns Selected folder path or null\n   */\n  selectFolder?(): Promise<string | null>\n\n  // Clipboard\n  /**\n   * Copy text to clipboard\n   * @param text - Text to copy\n   */\n  copyToClipboard(text: string): Promise<void>\n\n  /**\n   * Read text from clipboard\n   * @returns Clipboard text or null\n   */\n  readFromClipboard(): Promise<string | null>\n\n  // Share\n  /**\n   * Share content using native share dialog\n   * @param data - Share data\n   */\n  share?(data: { title?: string; text?: string; url?: string }): Promise<void>\n\n  /**\n   * Check if sharing is supported\n   */\n  canShare?(): boolean\n\n  // Notifications\n  /**\n   * Request notification permission\n   */\n  requestNotificationPermission?(): Promise<'granted' | 'denied' | 'default'>\n\n  /**\n   * Show a notification\n   * @param title - Notification title\n   * @param options - Notification options\n   */\n  showNotification?(title: string, options?: NotificationOptions): Promise<void>\n\n  /**\n   * Subscribe to notification clicks\n   * @param callback - Click handler\n   * @returns Cleanup function\n   */\n  onNotificationClick?(callback: (event: NotificationClickEvent) => void): () => void\n\n  // Window management (desktop apps)\n  /**\n   * Set window title\n   * @param title - Window title\n   */\n  setWindowTitle?(title: string): Promise<void>\n\n  /**\n   * Minimize window\n   */\n  minimizeWindow?(): Promise<void>\n\n  /**\n   * Maximize window\n   */\n  maximizeWindow?(): Promise<void>\n\n  /**\n   * Restore window from minimized/maximized state\n   */\n  restoreWindow?(): Promise<void>\n\n  /**\n   * Close window\n   */\n  closeWindow?(): Promise<void>\n\n  /**\n   * Toggle fullscreen mode\n   */\n  toggleFullscreen?(): Promise<void>\n\n  /**\n   * Check if window is maximized\n   */\n  isMaximized?(): Promise<boolean>\n\n  /**\n   * Check if window is fullscreen\n   */\n  isFullscreen?(): Promise<boolean>\n\n  // Deep linking\n  /**\n   * Register deep link handler\n   * @param callback - Called when app is opened via deep link\n   * @returns Cleanup function\n   */\n  registerDeepLinkHandler?(callback: (url: string) => void): () => void\n\n  // Storage\n  /**\n   * Get app data directory path (desktop apps)\n   */\n  getAppDataPath?(): string\n\n  /**\n   * Get user documents directory path\n   */\n  getUserDocumentsPath?(): string\n\n  // System\n  /**\n   * Open URL in default browser\n   * @param url - URL to open\n   */\n  openExternalUrl?(url: string): Promise<void>\n\n  /**\n   * Get locale/language preference\n   */\n  getLocale(): string\n\n  /**\n   * Get preferred color scheme\n   */\n  getColorScheme(): 'light' | 'dark' | 'system'\n\n  /**\n   * Subscribe to color scheme changes\n   * @param callback - Called when color scheme changes\n   * @returns Cleanup function\n   */\n  onColorSchemeChange?(callback: (scheme: 'light' | 'dark') => void): () => void\n}\n\n/**\n * Platform error codes\n */\nexport type PlatformErrorCode =\n  | 'NOT_SUPPORTED'\n  | 'PERMISSION_DENIED'\n  | 'NOT_FOUND'\n  | 'INVALID_PATH'\n  | 'UNKNOWN'\n\n/**\n * Platform error class\n */\nexport class PlatformError extends Error {\n  constructor(\n    message: string,\n    public readonly code: PlatformErrorCode\n  ) {\n    super(message)\n    this.name = 'PlatformError'\n  }\n}\n","/**\n * Web Platform adapter\n * Browser-specific platform features\n */\n\nimport type {\n  IPlatformAdapter,\n  Platform,\n  PlatformInfo,\n  PlatformCapabilities,\n  FilePickerOptions,\n  SelectedFile,\n  NotificationOptions,\n  NotificationClickEvent,\n} from '../interfaces/platform'\nimport { PlatformError } from '../interfaces/platform'\n\n/**\n * Detect operating system from user agent\n */\nfunction detectOS(): PlatformInfo['os'] {\n  const ua = navigator.userAgent.toLowerCase()\n  if (ua.includes('win')) return 'windows'\n  if (ua.includes('mac')) return 'macos'\n  if (ua.includes('linux')) return 'linux'\n  if (ua.includes('iphone') || ua.includes('ipad')) return 'ios'\n  if (ua.includes('android')) return 'android'\n  return 'unknown'\n}\n\n/**\n * Detect device type\n */\nfunction detectDeviceType(): PlatformInfo['deviceType'] {\n  const ua = navigator.userAgent.toLowerCase()\n  if (ua.includes('mobile')) return 'mobile'\n  if (ua.includes('tablet') || ua.includes('ipad')) return 'tablet'\n  return 'desktop'\n}\n\n/**\n * Wrap a File object to match SelectedFile interface\n */\nfunction wrapFile(file: File): SelectedFile {\n  return {\n    name: file.name,\n    size: file.size,\n    type: file.type,\n    text: () => file.text(),\n    arrayBuffer: () => file.arrayBuffer(),\n  }\n}\n\n/**\n * Web platform adapter for browser environments\n */\nexport class WebPlatformAdapter implements IPlatformAdapter {\n  private colorSchemeMediaQuery: MediaQueryList | null = null\n  private colorSchemeListeners: Set<(scheme: 'light' | 'dark') => void> = new Set()\n  private notificationClickListeners: Set<(event: NotificationClickEvent) => void> = new Set()\n\n  constructor() {\n    if (typeof window !== 'undefined' && window.matchMedia) {\n      this.colorSchemeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n    }\n  }\n\n  // Platform detection\n\n  getPlatform(): Platform {\n    return 'web'\n  }\n\n  getPlatformInfo(): PlatformInfo {\n    const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0\n\n    // Check for PWA/standalone mode\n    const isStandalone =\n      window.matchMedia('(display-mode: standalone)').matches ||\n      (navigator as { standalone?: boolean }).standalone === true\n\n    return {\n      platform: 'web',\n      version: navigator.userAgent,\n      userAgent: navigator.userAgent,\n      os: detectOS(),\n      deviceType: detectDeviceType(),\n      isTouch,\n      isStandalone,\n    }\n  }\n\n  getVersion(): string {\n    return navigator.userAgent\n  }\n\n  getCapabilities(): PlatformCapabilities {\n    return {\n      fileSystem: false, // Web doesn't have direct file system access\n      notifications: 'Notification' in window,\n      clipboard: 'clipboard' in navigator,\n      share: 'share' in navigator,\n      filePicker: 'showOpenFilePicker' in window || true, // Fallback with input element\n      windowManagement: false, // Web can't manage windows\n      deepLinking: true, // URLs work as deep links\n      persistentStorage: 'storage' in navigator && 'persist' in navigator.storage,\n    }\n  }\n\n  // Clipboard\n\n  async copyToClipboard(text: string): Promise<void> {\n    // Try modern Clipboard API first\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      try {\n        await navigator.clipboard.writeText(text)\n        return\n      } catch {\n        // Fall through to fallback\n      }\n    }\n\n    // Fallback using textarea\n    this.copyTextLegacy(text)\n  }\n\n  private copyTextLegacy(text: string): void {\n    const textArea = document.createElement('textarea')\n\n    textArea.style.position = 'fixed'\n    textArea.style.top = '0'\n    textArea.style.left = '0'\n    textArea.style.width = '2em'\n    textArea.style.height = '2em'\n    textArea.style.padding = '0'\n    textArea.style.border = 'none'\n    textArea.style.outline = 'none'\n    textArea.style.boxShadow = 'none'\n    textArea.style.background = 'transparent'\n    textArea.value = text\n\n    document.body.appendChild(textArea)\n    textArea.focus()\n    textArea.select()\n    document.execCommand('copy')\n    document.body.removeChild(textArea)\n  }\n\n  async readFromClipboard(): Promise<string | null> {\n    if (navigator.clipboard && navigator.clipboard.readText) {\n      try {\n        return await navigator.clipboard.readText()\n      } catch {\n        return null\n      }\n    }\n    return null\n  }\n\n  // File picker\n\n  async selectFile(options?: FilePickerOptions): Promise<SelectedFile | null> {\n    const files = await this.selectFilesInternal(options, false)\n    return files.length > 0 ? files[0] : null\n  }\n\n  async selectFiles(options?: FilePickerOptions): Promise<SelectedFile[]> {\n    return this.selectFilesInternal(options, true)\n  }\n\n  private async selectFilesInternal(\n    options?: FilePickerOptions,\n    multiple: boolean = false\n  ): Promise<SelectedFile[]> {\n    return new Promise((resolve) => {\n      const input = document.createElement('input')\n      input.type = 'file'\n      input.multiple = multiple || (options?.multiple ?? false)\n\n      if (options?.accept) {\n        input.accept = options.accept.join(',')\n      }\n\n      input.onchange = () => {\n        const files = Array.from(input.files ?? []).map(wrapFile)\n        resolve(files)\n      }\n\n      // Handle cancel\n      input.oncancel = () => resolve([])\n\n      input.click()\n    })\n  }\n\n  async selectFolder(): Promise<string | null> {\n    // Web doesn't support folder selection in a way that returns a path\n    throw new PlatformError(\n      'Folder selection is not supported in web browsers',\n      'NOT_SUPPORTED'\n    )\n  }\n\n  // Share\n\n  canShare(): boolean {\n    return 'share' in navigator\n  }\n\n  async share(data: { title?: string; text?: string; url?: string }): Promise<void> {\n    if (!navigator.share) {\n      throw new PlatformError('Web Share API not supported', 'NOT_SUPPORTED')\n    }\n\n    try {\n      await navigator.share(data)\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        // User cancelled - not an error\n        return\n      }\n      throw new PlatformError('Share failed', 'UNKNOWN')\n    }\n  }\n\n  // Notifications\n\n  async requestNotificationPermission(): Promise<'granted' | 'denied' | 'default'> {\n    if (!('Notification' in window)) {\n      throw new PlatformError('Notifications not supported', 'NOT_SUPPORTED')\n    }\n\n    const result = await Notification.requestPermission()\n    return result\n  }\n\n  async showNotification(title: string, options?: NotificationOptions): Promise<void> {\n    if (!('Notification' in window)) {\n      throw new PlatformError('Notifications not supported', 'NOT_SUPPORTED')\n    }\n\n    if (Notification.permission !== 'granted') {\n      throw new PlatformError('Notification permission denied', 'PERMISSION_DENIED')\n    }\n\n    const notification = new Notification(title, {\n      body: options?.body,\n      icon: options?.icon,\n      badge: options?.badge,\n      tag: options?.tag,\n      requireInteraction: options?.requireInteraction,\n      data: options?.data,\n    })\n\n    notification.onclick = () => {\n      const event: NotificationClickEvent = {\n        tag: options?.tag,\n        data: options?.data,\n      }\n      this.notificationClickListeners.forEach((callback) => callback(event))\n    }\n\n    if (options?.timeout) {\n      setTimeout(() => notification.close(), options.timeout)\n    }\n  }\n\n  onNotificationClick(callback: (event: NotificationClickEvent) => void): () => void {\n    this.notificationClickListeners.add(callback)\n    return () => {\n      this.notificationClickListeners.delete(callback)\n    }\n  }\n\n  // Window management (limited in web)\n\n  async setWindowTitle(title: string): Promise<void> {\n    document.title = title\n  }\n\n  async toggleFullscreen(): Promise<void> {\n    if (!document.fullscreenElement) {\n      await document.documentElement.requestFullscreen()\n    } else {\n      await document.exitFullscreen()\n    }\n  }\n\n  async isFullscreen(): Promise<boolean> {\n    return document.fullscreenElement !== null\n  }\n\n  // System\n\n  async openExternalUrl(url: string): Promise<void> {\n    window.open(url, '_blank', 'noopener,noreferrer')\n  }\n\n  getLocale(): string {\n    return navigator.language || 'en-US'\n  }\n\n  getColorScheme(): 'light' | 'dark' | 'system' {\n    if (!this.colorSchemeMediaQuery) return 'system'\n    return this.colorSchemeMediaQuery.matches ? 'dark' : 'light'\n  }\n\n  onColorSchemeChange(callback: (scheme: 'light' | 'dark') => void): () => void {\n    if (!this.colorSchemeMediaQuery) {\n      return () => {}\n    }\n\n    const handler = (e: MediaQueryListEvent) => {\n      callback(e.matches ? 'dark' : 'light')\n    }\n\n    this.colorSchemeMediaQuery.addEventListener('change', handler)\n    this.colorSchemeListeners.add(callback)\n\n    return () => {\n      this.colorSchemeMediaQuery?.removeEventListener('change', handler)\n      this.colorSchemeListeners.delete(callback)\n    }\n  }\n\n  // Deep linking (handled by URL/router in web)\n  registerDeepLinkHandler(callback: (url: string) => void): () => void {\n    const handler = () => {\n      callback(window.location.href)\n    }\n\n    window.addEventListener('popstate', handler)\n\n    return () => {\n      window.removeEventListener('popstate', handler)\n    }\n  }\n}\n\n/**\n * Create a web platform adapter\n */\nexport function createWebPlatform(): IPlatformAdapter {\n  return new WebPlatformAdapter()\n}\n","/**\n * Clipboard adapter for web browsers\n */\n\n/**\n * Copy text to clipboard using modern API with fallback\n * @param text - Text to copy\n * @returns Promise that resolves when copy is complete\n */\nexport async function copyToClipboard(text: string): Promise<void> {\n  // Try modern Clipboard API first\n  if (navigator.clipboard && navigator.clipboard.writeText) {\n    try {\n      await navigator.clipboard.writeText(text)\n      return\n    } catch {\n      // Fall through to fallback\n    }\n  }\n\n  // Fallback for older browsers\n  copyTextLegacy(text)\n}\n\n/**\n * Legacy clipboard copy using textarea\n */\nfunction copyTextLegacy(text: string): void {\n  const textArea = document.createElement('textarea')\n\n  // Styling to minimize visual impact\n  textArea.style.position = 'fixed'\n  textArea.style.top = '0'\n  textArea.style.left = '0'\n  textArea.style.width = '2em'\n  textArea.style.height = '2em'\n  textArea.style.padding = '0'\n  textArea.style.border = 'none'\n  textArea.style.outline = 'none'\n  textArea.style.boxShadow = 'none'\n  textArea.style.background = 'transparent'\n\n  textArea.value = text\n\n  document.body.appendChild(textArea)\n  textArea.focus()\n  textArea.select()\n\n  document.execCommand('copy')\n  document.body.removeChild(textArea)\n}\n\n/**\n * Read text from clipboard\n * @returns Promise with clipboard text or null if not available\n */\nexport async function readFromClipboard(): Promise<string | null> {\n  if (navigator.clipboard && navigator.clipboard.readText) {\n    try {\n      return await navigator.clipboard.readText()\n    } catch {\n      return null\n    }\n  }\n  return null\n}\n","/**\n * Keyboard event adapter for web browsers\n */\n\n/**\n * Keyboard binding configuration\n */\nexport interface KeyBinding {\n  key: string\n  shift?: boolean\n  alt?: boolean\n  ctrl?: boolean\n  meta?: boolean\n}\n\n/**\n * Parse a keyboard binding string like \"Ctrl+Shift+K\"\n * @param binding - Binding string\n * @returns KeyBinding configuration\n */\nexport function parseKeyBinding(binding: string): KeyBinding {\n  const parts = binding.split('+')\n  const key = parts[parts.length - 1]\n  return {\n    key,\n    shift: parts.includes('Shift'),\n    alt: parts.includes('Alt'),\n    ctrl: parts.includes('Ctrl'),\n    meta: parts.includes('Meta') || parts.includes('Cmd'),\n  }\n}\n\n/**\n * Create a keyboard event handler from a binding string\n * @param binding - Binding string like \"Ctrl+K\"\n * @param callback - Callback to execute on match\n * @returns Event handler function\n */\nexport function bindKeyEvent(\n  binding: string,\n  callback: (event: KeyboardEvent) => void\n): (event: KeyboardEvent) => void {\n  const config = parseKeyBinding(binding)\n\n  return (event: KeyboardEvent) => {\n    const ctrlOrMeta = config.ctrl ? (event.ctrlKey || event.metaKey) : true\n\n    if (\n      event.key === config.key &&\n      event.shiftKey === (config.shift ?? false) &&\n      event.altKey === (config.alt ?? false) &&\n      ctrlOrMeta\n    ) {\n      callback(event)\n    }\n  }\n}\n\n/**\n * Focus an input element within a container\n * @param ref - Container element\n */\nexport function focusInput(ref: HTMLElement | null): void {\n  if (ref) {\n    const inputElement = ref.querySelector('input') as HTMLInputElement\n    inputElement?.focus()\n  }\n}\n","/**\n * HTTP adapter for web browsers\n */\n\nimport type { TranslationFile } from '@jota/core'\n\n/**\n * HTTP request options\n */\nexport interface HttpOptions {\n  headers?: Record<string, string>\n  timeout?: number\n}\n\n/**\n * HTTP response wrapper\n */\nexport interface HttpResponse<T> {\n  data: T\n  status: number\n  ok: boolean\n}\n\n/**\n * Fetch JSON data from a URL\n * @param url - URL to fetch\n * @param options - Request options\n * @returns Response with parsed JSON\n */\nexport async function fetchJson<T>(\n  url: string,\n  options: HttpOptions = {}\n): Promise<HttpResponse<T>> {\n  const controller = new AbortController()\n  const timeout = options.timeout ?? 30000\n\n  const timeoutId = setTimeout(() => controller.abort(), timeout)\n\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'Accept': 'application/json',\n        ...options.headers,\n      },\n      signal: controller.signal,\n    })\n\n    clearTimeout(timeoutId)\n\n    const data = await response.json()\n\n    return {\n      data: data as T,\n      status: response.status,\n      ok: response.ok,\n    }\n  } catch (error) {\n    clearTimeout(timeoutId)\n    throw error\n  }\n}\n\n/**\n * Load a Bible translation file\n * @param baseUrl - Base URL for translation files\n * @param locale - Locale code\n * @param symbol - Translation symbol\n * @returns Translation file data\n */\nexport async function loadTranslation(\n  baseUrl: string,\n  locale: string,\n  symbol: string\n): Promise<TranslationFile> {\n  const url = `${baseUrl}/${locale}/${symbol}.json`\n  const response = await fetchJson<TranslationFile>(url)\n\n  if (!response.ok) {\n    throw new Error(`Failed to load translation: ${response.status}`)\n  }\n\n  return response.data\n}\n\n/**\n * Check if the browser is online\n */\nexport function isOnline(): boolean {\n  return navigator.onLine\n}\n\n/**\n * Add online/offline event listeners\n * @param onOnline - Callback when browser goes online\n * @param onOffline - Callback when browser goes offline\n * @returns Cleanup function\n */\nexport function onConnectivityChange(\n  onOnline: () => void,\n  onOffline: () => void\n): () => void {\n  window.addEventListener('online', onOnline)\n  window.addEventListener('offline', onOffline)\n\n  return () => {\n    window.removeEventListener('online', onOnline)\n    window.removeEventListener('offline', onOffline)\n  }\n}\n"]}